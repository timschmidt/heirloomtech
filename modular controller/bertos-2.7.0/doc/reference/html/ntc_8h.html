

<!-- Generated by Doxygen 1.7.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_9fd71c1ac00056e7d855336b2291c56c.html">bertos</a>      </li>
      <li class="navelem"><a class="el" href="dir_f7c89dbd63e8f34e572fe939945c15d7.html">drv</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ntc.h File Reference</div>  </div>
</div>
<div class="contents">

<p>Driver for NTC sensors (reads a temperature through an ADC).  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="ntc__map_8h_source.html">hw/ntc_map.h</a>&quot;</code><br/>
<code>#include &lt;<a class="el" href="compiler_8h_source.html">cfg/compiler.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="debug_8h_source.html">cfg/debug.h</a>&gt;</code><br/>
</div>
<p><a href="ntc_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structNtcHwInfo.html">NtcHwInfo</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">type for defining amplifications amp_t = A, where A is a pure number  <a href="structNtcHwInfo.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ntc_8h.html#a7af94b5cb798402bf0230368f635c65f">DEG_TO_DEG_T</a>(x)&#160;&#160;&#160;((deg_t)((x) * 10))</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">type for celsius degrees deg_t = °C * 10  <a href="#a7af94b5cb798402bf0230368f635c65f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a281a9d97de0f81f81cab3a4ef7d72534"></a><!-- doxytag: member="ntc.h::DEG_T_TO_INTDEG" ref="a281a9d97de0f81f81cab3a4ef7d72534" args="(x)" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ntc_8h.html#a281a9d97de0f81f81cab3a4ef7d72534">DEG_T_TO_INTDEG</a>(x)&#160;&#160;&#160;((x) / 10)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Macro for converting from deg_t to celsius degrees (returns only the integer part) <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a32378db179906bf1c22d74494d49c7ce"></a><!-- doxytag: member="ntc.h::DEG_T_TO_DECIMALDEG" ref="a32378db179906bf1c22d74494d49c7ce" args="(x)" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ntc_8h.html#a32378db179906bf1c22d74494d49c7ce">DEG_T_TO_DECIMALDEG</a>(x)&#160;&#160;&#160;((x) % 10)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Macro for converting from deg_t to celsius degrees (returns only the decimal part) <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6d122e8d9500df17298ca0bb0e6149d4"></a><!-- doxytag: member="ntc.h::DEG_T_TO_FLOATDEG" ref="a6d122e8d9500df17298ca0bb0e6149d4" args="(x)" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ntc_8h.html#a6d122e8d9500df17298ca0bb0e6149d4">DEG_T_TO_FLOATDEG</a>(x)&#160;&#160;&#160;((x) / 10.0)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Macro for converting from deg_t to celsius degrees (returns type is float) <br/></td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a796c52d23dd7c5f03ad69c5fc9177fcb"></a><!-- doxytag: member="ntc.h::amp_t" ref="a796c52d23dd7c5f03ad69c5fc9177fcb" args="" -->
typedef float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ntc_8h.html#a796c52d23dd7c5f03ad69c5fc9177fcb">amp_t</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">type for resistor res_t = Ohm * 100 <br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7c5b4d092d8a2de58d6788b3a8ef573b"></a><!-- doxytag: member="ntc.h::ntc_init" ref="a7c5b4d092d8a2de58d6788b3a8ef573b" args="(void)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ntc_8h.html#a7c5b4d092d8a2de58d6788b3a8ef573b">ntc_init</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the NTC module. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">deg_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ntc_8h.html#a94c372924ed335acd89d59442d6554af">ntc_read</a> (NtcDev dev)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a single temperature value from the NTC.  <a href="#a94c372924ed335acd89d59442d6554af"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Driver for NTC sensors (reads a temperature through an ADC). </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Giovanni Bajo &lt;<a href="mailto:rasky@develer.com">rasky@develer.com</a>&gt; </dd>
<dd>
Francesco Sacchi &lt;<a href="mailto:batt@develer.com">batt@develer.com</a>&gt; </dd></dl>

<p>Definition in file <a class="el" href="ntc_8h_source.html">ntc.h</a>.</p>
</div><hr/><h2>Define Documentation</h2>
<a class="anchor" id="a7af94b5cb798402bf0230368f635c65f"></a><!-- doxytag: member="ntc.h::DEG_TO_DEG_T" ref="a7af94b5cb798402bf0230368f635c65f" args="(x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEG_TO_DEG_T</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;((deg_t)((x) * 10))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>type for celsius degrees deg_t = °C * 10 </p>
<p>Macro for converting from deg to deg_t type </p>

<p>Definition at line <a class="el" href="ntc_8h_source.html#l00057">57</a> of file <a class="el" href="ntc_8h_source.html">ntc.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a94c372924ed335acd89d59442d6554af"></a><!-- doxytag: member="ntc.h::ntc_read" ref="a94c372924ed335acd89d59442d6554af" args="(NtcDev dev)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">deg_t ntc_read </td>
          <td>(</td>
          <td class="paramtype">NtcDev&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read a single temperature value from the NTC. </p>
<p>Read a single temperature value from the NTC.</p>
<p>First read the resistence of the NTC through <a class="el" href="hw__ntc_8h.html#a84fdb9b47a0d58ccc41f0371d9a1fa2d">ntc_hw_read()</a>, then, for the conversion from resistance to temperature, since the formula varies from device to device, we implemented a generic system using a table of data which maps temperature (index) to resistance (data). The range of the table (min/max temperature) and the step (temperature difference between two consecutive elements of the table) is variable and can be specified. Notice that values inbetween the table elements are still possible as the library does a linear interpolation using the actual calculated resistance to find out the exact temperature.</p>
<p>The low-level API provides a function to get access to a description of the NTC (<a class="el" href="hw__ntc_8h.html#af641aaa3a24103576e5fa27db935c92e">ntc_hw_getInfo()</a>), including the resistance table. </p>

<p>Definition at line <a class="el" href="ntc_8c_source.html#l00104">104</a> of file <a class="el" href="ntc_8c_source.html">ntc.c</a>.</p>

</div>
</div>
</div>


