

<!-- Generated by Doxygen 1.7.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_9fd71c1ac00056e7d855336b2291c56c.html">bertos</a>      </li>
      <li class="navelem"><a class="el" href="dir_cd5151ad4b595b3b6d6807653813384b.html">fs</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">battfs.h</div>  </div>
</div>
<div class="contents">
<a href="battfs_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00044"></a>00044 <span class="preprocessor">#ifndef FS_BATTFS_H</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span><span class="preprocessor">#define FS_BATTFS_H</span>
<a name="l00046"></a>00046 <span class="preprocessor"></span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &lt;<a class="code" href="compiler_8h.html" title="Additional support macros for compiler independance.">cfg/compiler.h</a>&gt;</span> <span class="comment">// uintXX_t; STATIC_ASSERT</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &lt;<a class="code" href="types_8h.html" title="CPU-specific type definitions.">cpu/types.h</a>&gt;</span> <span class="comment">// CPU_BITS_PER_CHAR</span>
<a name="l00049"></a>00049 <span class="preprocessor">#include &lt;<a class="code" href="rotating__hash_8h.html" title="Rotating Hash algorithm.">algo/rotating_hash.h</a>&gt;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &lt;<a class="code" href="list_8h.html">struct/list.h</a>&gt;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include &lt;<a class="code" href="io_2kfile_8h.html">io/kfile.h</a>&gt;</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include &lt;<a class="code" href="kblock_8h.html">io/kblock.h</a>&gt;</span>
<a name="l00053"></a>00053 
<a name="l00054"></a><a class="code" href="battfs_8h.html#af0b3070403482fbfa266d6e3e6cff088">00054</a> <span class="keyword">typedef</span> uint16_t <a class="code" href="battfs_8h.html#af0b3070403482fbfa266d6e3e6cff088" title="Type for keeping trace of space filled inside a page.">fill_t</a>;    
<a name="l00055"></a><a class="code" href="battfs_8h.html#a533d079449525768fe3d92f4a8089c67">00055</a> <span class="keyword">typedef</span> <a class="code" href="battfs_8h.html#af0b3070403482fbfa266d6e3e6cff088" title="Type for keeping trace of space filled inside a page.">fill_t</a>   <a class="code" href="battfs_8h.html#a533d079449525768fe3d92f4a8089c67" title="Type for addressing space inside a page.">pgaddr_t</a>;  
<a name="l00056"></a><a class="code" href="battfs_8h.html#ab696748712d719603833f401031a7907">00056</a> <span class="keyword">typedef</span> uint16_t <a class="code" href="battfs_8h.html#ab696748712d719603833f401031a7907" title="Type for counting pages on disk.">pgcnt_t</a>;   
<a name="l00057"></a><a class="code" href="battfs_8h.html#abd9d9d290feaf2e76bce6142ae59019e">00057</a> <span class="keyword">typedef</span> <a class="code" href="battfs_8h.html#ab696748712d719603833f401031a7907" title="Type for counting pages on disk.">pgcnt_t</a>  <a class="code" href="battfs_8h.html#abd9d9d290feaf2e76bce6142ae59019e" title="Type for counting pages inside a file.">pgoff_t</a>;   
<a name="l00058"></a><a class="code" href="battfs_8h.html#a74713a2f9f355cad853593781defa824">00058</a> <span class="keyword">typedef</span> uint8_t  <a class="code" href="battfs_8h.html#a74713a2f9f355cad853593781defa824" title="Type for file inodes.">inode_t</a>;   
<a name="l00059"></a><a class="code" href="battfs_8h.html#abbbad188c9c52701e8dbd92f0a5635f5">00059</a> <span class="keyword">typedef</span> uint64_t  <a class="code" href="battfs_8h.html#abbbad188c9c52701e8dbd92f0a5635f5" title="Type for page seq number, at least 40bits wide.">seq_t</a>;    
<a name="l00060"></a><a class="code" href="battfs_8h.html#aaf7617a98621b494ad58b8bbbdf9306e">00060</a> <span class="keyword">typedef</span> rotating_t <a class="code" href="battfs_8h.html#aaf7617a98621b494ad58b8bbbdf9306e" title="Type for header FCS.">fcs_t</a>;   
<a name="l00061"></a>00061 
<a name="l00062"></a>00062 
<a name="l00070"></a><a class="code" href="structBattFsPageHeader.html">00070</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structBattFsPageHeader.html" title="BattFS page header, used to represent a page header in memory.">BattFsPageHeader</a>
<a name="l00071"></a>00071 {
<a name="l00072"></a><a class="code" href="structBattFsPageHeader.html#a073705e71025f5e13f9ccd2f09f469ba">00072</a>     <a class="code" href="battfs_8h.html#a74713a2f9f355cad853593781defa824" title="Type for file inodes.">inode_t</a>  <a class="code" href="structBattFsPageHeader.html#a073705e71025f5e13f9ccd2f09f469ba" title="File inode (file identifier).">inode</a>; 
<a name="l00073"></a><a class="code" href="structBattFsPageHeader.html#a5c59ce00449c562009b680adef4aebe7">00073</a>     <a class="code" href="battfs_8h.html#af0b3070403482fbfa266d6e3e6cff088" title="Type for keeping trace of space filled inside a page.">fill_t</a>   <a class="code" href="structBattFsPageHeader.html#a5c59ce00449c562009b680adef4aebe7" title="Filled bytes in page.">fill</a>;  
<a name="l00074"></a><a class="code" href="structBattFsPageHeader.html#a8976d867f0fb78905c2a572e6cab2992">00074</a>     <a class="code" href="battfs_8h.html#abd9d9d290feaf2e76bce6142ae59019e" title="Type for counting pages inside a file.">pgoff_t</a>  <a class="code" href="structBattFsPageHeader.html#a8976d867f0fb78905c2a572e6cab2992" title="Page offset inside file.">pgoff</a>; 
<a name="l00075"></a>00075 
<a name="l00084"></a><a class="code" href="structBattFsPageHeader.html#aa819f5f419727fa1857635686710d34b">00084</a>     <a class="code" href="battfs_8h.html#abbbad188c9c52701e8dbd92f0a5635f5" title="Type for page seq number, at least 40bits wide.">seq_t</a>    <a class="code" href="structBattFsPageHeader.html#aa819f5f419727fa1857635686710d34b" title="Page sequence number.">seq</a>;
<a name="l00085"></a>00085 
<a name="l00089"></a><a class="code" href="structBattFsPageHeader.html#a5f22e3d0d6a817a95b454dafd43aba3f">00089</a>     <a class="code" href="battfs_8h.html#aaf7617a98621b494ad58b8bbbdf9306e" title="Type for header FCS.">fcs_t</a> <a class="code" href="structBattFsPageHeader.html#a5f22e3d0d6a817a95b454dafd43aba3f" title="FCS (Frame Check Sequence) of the page header.">fcs</a>;
<a name="l00090"></a>00090 } <a class="code" href="structBattFsPageHeader.html" title="BattFS page header, used to represent a page header in memory.">BattFsPageHeader</a>;
<a name="l00091"></a>00091 
<a name="l00097"></a><a class="code" href="battfs_8h.html#a5f50d8650c7f510c735ea41d140fe8b6">00097</a> <span class="preprocessor">#define BATTFS_HEADER_LEN 12</span>
<a name="l00098"></a>00098 <span class="preprocessor"></span>
<a name="l00102"></a><a class="code" href="battfs_8h.html#a2742c4844d0d76afd296112f5893c4ed">00102</a> <span class="preprocessor">#define MAX_PAGE_ADDR ((1 &lt;&lt; (CPU_BITS_PER_CHAR * sizeof(pgcnt_t))) - 1)</span>
<a name="l00103"></a>00103 <span class="preprocessor"></span>
<a name="l00107"></a><a class="code" href="battfs_8h.html#a027862d094e3f04e031a45a0268f6a50">00107</a> <span class="preprocessor">#define BATTFS_MAX_FILES (1 &lt;&lt; (CPU_BITS_PER_CHAR * sizeof(inode_t)))</span>
<a name="l00108"></a>00108 <span class="preprocessor"></span>
<a name="l00112"></a><a class="code" href="battfs_8h.html#a953801195b124d1b4bca5df3c47ff645">00112</a> <span class="preprocessor">#define PAGE_UNSET_SENTINEL ((pgcnt_t)((1L &lt;&lt; (CPU_BITS_PER_CHAR * sizeof(pgcnt_t))) - 1))</span>
<a name="l00113"></a>00113 <span class="preprocessor"></span>
<a name="l00114"></a><a class="code" href="battfs_8h.html#a9017d685cb32390bc614feb39ecf2282">00114</a> <span class="keyword">typedef</span> uint32_t <a class="code" href="battfs_8h.html#a9017d685cb32390bc614feb39ecf2282" title="Type for disk sizes.">disk_size_t</a>; 
<a name="l00115"></a>00115 
<a name="l00121"></a><a class="code" href="structBattFsSuper.html">00121</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structBattFsSuper.html" title="Context used to describe a disk.">BattFsSuper</a>
<a name="l00122"></a>00122 {
<a name="l00123"></a><a class="code" href="structBattFsSuper.html#a6da7bb93863793068a9ca2746fb035b4">00123</a>     <a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *<a class="code" href="structBattFsSuper.html#a6da7bb93863793068a9ca2746fb035b4" title="Block device context (physical disk).">dev</a>;             
<a name="l00124"></a>00124 
<a name="l00125"></a><a class="code" href="structBattFsSuper.html#afc13e79aa3e0714eba8038a97e58caaa">00125</a>     <a class="code" href="battfs_8h.html#a533d079449525768fe3d92f4a8089c67" title="Type for addressing space inside a page.">pgaddr_t</a> <a class="code" href="structBattFsSuper.html#afc13e79aa3e0714eba8038a97e58caaa" title="Size of space usable for data in a disk page, in bytes. The rest is used by the page header...">data_size</a>;      
<a name="l00126"></a>00126 
<a name="l00133"></a><a class="code" href="structBattFsSuper.html#ae018010b1733f1a278a5c40792f393de">00133</a>     <a class="code" href="battfs_8h.html#ab696748712d719603833f401031a7907" title="Type for counting pages on disk.">pgcnt_t</a> *<a class="code" href="structBattFsSuper.html#ae018010b1733f1a278a5c40792f393de" title="Page allocation array.">page_array</a>;
<a name="l00134"></a>00134 
<a name="l00139"></a><a class="code" href="structBattFsSuper.html#ac3d127852dca0d3de1fb9e5ccbec0ecd">00139</a>     <a class="code" href="battfs_8h.html#ab696748712d719603833f401031a7907" title="Type for counting pages on disk.">pgcnt_t</a> <a class="code" href="structBattFsSuper.html#ac3d127852dca0d3de1fb9e5ccbec0ecd" title="Lowest address, in page array, for free pages.">free_page_start</a>;
<a name="l00140"></a>00140 
<a name="l00141"></a><a class="code" href="structBattFsSuper.html#a3230f964310e08bdc9a3fd42b28814f2">00141</a>     <a class="code" href="battfs_8h.html#a9017d685cb32390bc614feb39ecf2282" title="Type for disk sizes.">disk_size_t</a> <a class="code" href="structBattFsSuper.html#a3230f964310e08bdc9a3fd42b28814f2" title="Size of the disk, in bytes (page_count * page_size).">disk_size</a>;   
<a name="l00142"></a><a class="code" href="structBattFsSuper.html#a274792c58d32ea62610a1f44c35b69ac">00142</a>     <a class="code" href="battfs_8h.html#a9017d685cb32390bc614feb39ecf2282" title="Type for disk sizes.">disk_size_t</a> <a class="code" href="structBattFsSuper.html#a274792c58d32ea62610a1f44c35b69ac" title="Free space on the disk.">free_bytes</a>;  
<a name="l00143"></a>00143 
<a name="l00144"></a><a class="code" href="structBattFsSuper.html#a491a8251adeb2f4dafd70b62e26cc195">00144</a>     <a class="code" href="structList.html" title="Head of a doubly-linked list of Node structs.">List</a> <a class="code" href="structBattFsSuper.html#a491a8251adeb2f4dafd70b62e26cc195" title="List used to keep trace of open files.">file_opened_list</a>;       
<a name="l00145"></a>00145     <span class="comment">/* TODO add other fields. */</span>
<a name="l00146"></a>00146 } <a class="code" href="structBattFsSuper.html" title="Context used to describe a disk.">BattFsSuper</a>;
<a name="l00147"></a>00147 
<a name="l00151"></a><a class="code" href="battfs_8h.html#a655dbaa973085429b2b0f5953f256c87">00151</a> <span class="preprocessor">#define SPACE_OVER(disk) ((disk)-&gt;free_page_start &gt;= (disk)-&gt;dev-&gt;blk_cnt)</span>
<a name="l00152"></a>00152 <span class="preprocessor"></span>
<a name="l00153"></a><a class="code" href="battfs_8h.html#adf5532a6841c3713f99a378e3f9f7a82">00153</a> <span class="keyword">typedef</span> uint8_t <a class="code" href="battfs_8h.html#adf5532a6841c3713f99a378e3f9f7a82" title="Type for file open modes.">filemode_t</a>;  
<a name="l00154"></a><a class="code" href="battfs_8h.html#a63bb07cc5b9e2d76ea5499b397e2b4ee">00154</a> <span class="keyword">typedef</span> int32_t <a class="code" href="battfs_8h.html#a63bb07cc5b9e2d76ea5499b397e2b4ee" title="Type for file sizes.">file_size_t</a>; 
<a name="l00155"></a>00155 
<a name="l00160"></a><a class="code" href="battfs_8h.html#a28f6a15a43a57c449718ae0d291cc6a8">00160</a> <span class="preprocessor">#define BATTFS_CREATE BV(0)  ///&lt; Create file if does not exist</span>
<a name="l00161"></a><a class="code" href="battfs_8h.html#af9280046ad0f906092570349a596618c">00161</a> <span class="preprocessor"></span><span class="preprocessor">#define BATTFS_RD     BV(1)  ///&lt; Open file for reading</span>
<a name="l00162"></a><a class="code" href="battfs_8h.html#a0bf91449ef87bac7cd038bdd0f35dd84">00162</a> <span class="preprocessor"></span><span class="preprocessor">#define BATTFS_WR     BV(2)  ///&lt; Open file fir writing</span>
<a name="l00163"></a>00163 <span class="preprocessor"></span><span class="comment">/*/}*/</span>
<a name="l00164"></a>00164 
<a name="l00165"></a>00165 
<a name="l00170"></a><a class="code" href="battfs_8h.html#a56f53433488152eaadf5f32af96b4fca">00170</a> <span class="preprocessor">#define BATTFS_NEGATIVE_SEEK_ERR   BV(0) ///&lt; Trying to read/write before file start.</span>
<a name="l00171"></a><a class="code" href="battfs_8h.html#ad5f5f02fc2e2e920d004790a5ea0d4a5">00171</a> <span class="preprocessor"></span><span class="preprocessor">#define BATTFS_DISK_READ_ERR       BV(1) ///&lt; Error reading from disk device.</span>
<a name="l00172"></a><a class="code" href="battfs_8h.html#a64b38adc1699a23bf33be496bc0a3a11">00172</a> <span class="preprocessor"></span><span class="preprocessor">#define BATTFS_DISK_WRITE_ERR      BV(2) ///&lt; Error writing in the disk device.</span>
<a name="l00173"></a><a class="code" href="battfs_8h.html#a07e6c6967d3b82e1a6003ce648abbd43">00173</a> <span class="preprocessor"></span><span class="preprocessor">#define BATTFS_DISK_SPACEOVER_ERR  BV(3) ///&lt; No more disk space available.</span>
<a name="l00174"></a><a class="code" href="battfs_8h.html#ae58fb1fcd745519527a3df0b6143444c">00174</a> <span class="preprocessor"></span><span class="preprocessor">#define BATTFS_DISK_FLUSHBUF_ERR   BV(4) ///&lt; Error flushing (writing) the current page to disk.</span>
<a name="l00175"></a><a class="code" href="battfs_8h.html#a60adbbfdf02b27134b0a24c7286371f4">00175</a> <span class="preprocessor"></span><span class="preprocessor">#define BATTFS_FILE_NOT_FOUND_ERR  BV(5) ///&lt; File not found on disk.</span>
<a name="l00176"></a>00176 <span class="preprocessor"></span><span class="comment">/*/}*/</span>
<a name="l00177"></a>00177 
<a name="l00181"></a><a class="code" href="structBattFs.html">00181</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structBattFs.html" title="Describe a BattFs file usign a KFile.">BattFs</a>
<a name="l00182"></a>00182 {
<a name="l00183"></a><a class="code" href="structBattFs.html#a1d23a5cab78d0c3831bf5eea4d9509bd">00183</a>     <a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> <a class="code" href="structBattFs.html#a1d23a5cab78d0c3831bf5eea4d9509bd" title="KFile context.">fd</a>;           
<a name="l00184"></a><a class="code" href="structBattFs.html#ab18ef03731072cdd67ccf55af005e781">00184</a>     <a class="code" href="structNode.html" title="This structure represents a node for bidirectional lists.">Node</a> <a class="code" href="structBattFs.html#ab18ef03731072cdd67ccf55af005e781" title="Link for inserting in opened file list.">link</a>;          
<a name="l00185"></a><a class="code" href="structBattFs.html#ad6557799e39cb13d9ae6ce9bfbf50fe2">00185</a>     <a class="code" href="battfs_8h.html#a74713a2f9f355cad853593781defa824" title="Type for file inodes.">inode_t</a> <a class="code" href="structBattFs.html#ad6557799e39cb13d9ae6ce9bfbf50fe2" title="inode of the opened file">inode</a>;      
<a name="l00186"></a><a class="code" href="structBattFs.html#a06a576e0f36f94fb530930993e1d7a51">00186</a>     <a class="code" href="structBattFsSuper.html" title="Context used to describe a disk.">BattFsSuper</a> *<a class="code" href="structBattFs.html#a06a576e0f36f94fb530930993e1d7a51" title="Disk context.">disk</a>;  
<a name="l00187"></a><a class="code" href="structBattFs.html#a869405592419e5bb87961d4c93633d9c">00187</a>     <a class="code" href="battfs_8h.html#adf5532a6841c3713f99a378e3f9f7a82" title="Type for file open modes.">filemode_t</a> <a class="code" href="structBattFs.html#a869405592419e5bb87961d4c93633d9c" title="File open mode.">mode</a>;    
<a name="l00188"></a><a class="code" href="structBattFs.html#ababfd85b718c28670a496a1a96f656e5">00188</a>     <a class="code" href="battfs_8h.html#ab696748712d719603833f401031a7907" title="Type for counting pages on disk.">pgcnt_t</a> *<a class="code" href="structBattFs.html#ababfd85b718c28670a496a1a96f656e5" title="Pointer to page_array file start position.">start</a>;     
<a name="l00189"></a><a class="code" href="structBattFs.html#a60d0d47fd11329f3d579ff375333569d">00189</a>     <a class="code" href="battfs_8h.html#ab696748712d719603833f401031a7907" title="Type for counting pages on disk.">pgcnt_t</a> <a class="code" href="structBattFs.html#a60d0d47fd11329f3d579ff375333569d" title="Max page offset allocated for the file.">max_off</a>;    
<a name="l00190"></a><a class="code" href="structBattFs.html#ae3dd3478b1e9c4b4fb77b0b2099be928">00190</a>     <span class="keywordtype">int</span> <a class="code" href="structBattFs.html#ae3dd3478b1e9c4b4fb77b0b2099be928" title="File status/errors.">errors</a>;         
<a name="l00191"></a>00191 } <a class="code" href="structBattFs.html" title="Describe a BattFs file usign a KFile.">BattFs</a>;
<a name="l00192"></a>00192 
<a name="l00196"></a><a class="code" href="battfs_8h.html#a773a6de12626d04cb1311cf53cb88044">00196</a> <span class="preprocessor">#define KFT_BATTFS MAKE_ID(&#39;B&#39;, &#39;T&#39;, &#39;F&#39;, &#39;S&#39;)</span>
<a name="l00197"></a>00197 <span class="preprocessor"></span>
<a name="l00202"></a><a class="code" href="battfs_8h.html#aa3454be3a409226483796545df248615">00202</a> INLINE <a class="code" href="structBattFs.html" title="Describe a BattFs file usign a KFile.">BattFs</a> * <a class="code" href="battfs_8h.html#aa3454be3a409226483796545df248615" title="Macro used to cast a KFile to a BattFS.">BATTFS_CAST</a>(<a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd)
<a name="l00203"></a>00203 {
<a name="l00204"></a>00204     <a class="code" href="group__debug.html#gaca68c0d4ac8df0838e209fb5300f7be3" title="Assert a pre-condition on code.">ASSERT</a>(fd-&gt;_type == <a class="code" href="battfs_8h.html#a773a6de12626d04cb1311cf53cb88044" title="Id for battfs file descriptors.">KFT_BATTFS</a>);
<a name="l00205"></a>00205     <span class="keywordflow">return</span> (<a class="code" href="structBattFs.html" title="Describe a BattFs file usign a KFile.">BattFs</a> *)fd;
<a name="l00206"></a>00206 }
<a name="l00207"></a>00207 
<a name="l00208"></a>00208 <span class="keywordtype">bool</span> <a class="code" href="battfs_8c.html#a5ae502d0f195b3a16836f3883f80ebac" title="Initialize and mount disk described by disk.">battfs_mount</a>(<span class="keyword">struct</span> <a class="code" href="structBattFsSuper.html" title="Context used to describe a disk.">BattFsSuper</a> *disk, <span class="keyword">struct</span> <a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *dev, <a class="code" href="battfs_8h.html#ab696748712d719603833f401031a7907" title="Type for counting pages on disk.">pgcnt_t</a> *page_array, <span class="keywordtype">size_t</span> array_size);
<a name="l00209"></a>00209 <span class="keywordtype">bool</span> <a class="code" href="battfs_8c.html#abefec8a14bbb305b13d77adc7a56996b" title="Check the filesystem.">battfs_fsck</a>(<span class="keyword">struct</span> <a class="code" href="structBattFsSuper.html" title="Context used to describe a disk.">BattFsSuper</a> *disk);
<a name="l00210"></a>00210 <span class="keywordtype">bool</span> <a class="code" href="battfs_8c.html#a6059da32732f2272b68894610eddb99d" title="Umount disk.">battfs_umount</a>(<span class="keyword">struct</span> <a class="code" href="structBattFsSuper.html" title="Context used to describe a disk.">BattFsSuper</a> *disk);
<a name="l00211"></a>00211 
<a name="l00212"></a>00212 <span class="keywordtype">bool</span> <a class="code" href="battfs_8c.html#a7469859a17ef79668fdc9b3e949bba7b">battfs_fileExists</a>(<a class="code" href="structBattFsSuper.html" title="Context used to describe a disk.">BattFsSuper</a> *disk, <a class="code" href="battfs_8h.html#a74713a2f9f355cad853593781defa824" title="Type for file inodes.">inode_t</a> inode);
<a name="l00213"></a>00213 <span class="keywordtype">bool</span> <a class="code" href="battfs_8c.html#a8295240f9546944d0b8e1b06a1e5579d" title="Open file inode from disk in mode.">battfs_fileopen</a>(<a class="code" href="structBattFsSuper.html" title="Context used to describe a disk.">BattFsSuper</a> *disk, <a class="code" href="structBattFs.html" title="Describe a BattFs file usign a KFile.">BattFs</a> *fd, <a class="code" href="battfs_8h.html#a74713a2f9f355cad853593781defa824" title="Type for file inodes.">inode_t</a> inode, <a class="code" href="battfs_8h.html#adf5532a6841c3713f99a378e3f9f7a82" title="Type for file open modes.">filemode_t</a> mode);
<a name="l00214"></a>00214 
<a name="l00215"></a>00215 <span class="keywordtype">void</span> <a class="code" href="battfs_8h.html#a71a27ec6b07d8232c5cbcc893eb07bfd" title="Modes for battfs_fileopen.">battfs_writeTestBlock</a>(<a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *dev, <a class="code" href="battfs_8h.html#ab696748712d719603833f401031a7907" title="Type for counting pages on disk.">pgcnt_t</a> page, <a class="code" href="battfs_8h.html#a74713a2f9f355cad853593781defa824" title="Type for file inodes.">inode_t</a> inode, <a class="code" href="battfs_8h.html#abbbad188c9c52701e8dbd92f0a5635f5" title="Type for page seq number, at least 40bits wide.">seq_t</a> seq, <a class="code" href="battfs_8h.html#af0b3070403482fbfa266d6e3e6cff088" title="Type for keeping trace of space filled inside a page.">fill_t</a> fill, <a class="code" href="battfs_8h.html#abd9d9d290feaf2e76bce6142ae59019e" title="Type for counting pages inside a file.">pgoff_t</a> pgoff);
<a name="l00216"></a>00216 <span class="keywordtype">void</span> <a class="code" href="battfs_8h.html#aa00a8d53d613cced6d6c36e3a8f92357" title="Modes for battfs_fileopen.">battfs_eraseBlock</a>(<a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *dev, <a class="code" href="battfs_8h.html#ab696748712d719603833f401031a7907" title="Type for counting pages on disk.">pgcnt_t</a> page);
<a name="l00217"></a>00217 <span class="preprocessor">#endif </span><span class="comment">/* FS_BATTFS_H */</span>
</pre></div></div>
</div>


