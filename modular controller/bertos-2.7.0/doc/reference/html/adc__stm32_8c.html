

<!-- Generated by Doxygen 1.7.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_9fd71c1ac00056e7d855336b2291c56c.html">bertos</a>      </li>
      <li class="navelem"><a class="el" href="dir_a5de7543e32a5f073daa04f8834eb5fd.html">cpu</a>      </li>
      <li class="navelem"><a class="el" href="dir_b85b1b77342b0233aa6bdb4655adc5e9.html">cortex-m3</a>      </li>
      <li class="navelem"><a class="el" href="dir_67d33e4ffe4ff938d746541f95b62a0f.html">drv</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">adc_stm32.c File Reference</div>  </div>
</div>
<div class="contents">

<p>ADC hardware-specific implementation.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="adc__stm32_8h_source.html">adc_stm32.h</a>&quot;</code><br/>
<code>#include &lt;<a class="el" href="cpu_2irq_8h_source.html">cpu/irq.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="cfg__adc_8h_source.html">cfg/cfg_adc.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cfg__proc_8h_source.html">cfg/cfg_proc.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cfg__signal_8h_source.html">cfg/cfg_signal.h</a>&quot;</code><br/>
<code>#include &lt;<a class="el" href="macros_8h_source.html">cfg/macros.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="compiler_8h_source.html">cfg/compiler.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="debug_8h_source.html">cfg/debug.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="log_8h_source.html">cfg/log.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="adc_8h_source.html">drv/adc.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="clock__stm32_8h_source.html">drv/clock_stm32.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="gpio__stm32_8h_source.html">drv/gpio_stm32.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="stm32_8h_source.html">io/stm32.h</a>&gt;</code><br/>
</div>
<p><a href="adc__stm32_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="adc__stm32_8c.html#a2654afcc53d07a0fe8677c5c64c94d60">adc_hw_select_ch</a> (uint8_t ch)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Select mux channel <em>ch</em>.  <a href="#a2654afcc53d07a0fe8677c5c64c94d60"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="adc__stm32_8c.html#af53cb85a56dda4aa7f95fc90e4d82069">adc_hw_read</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Start an ADC convertion.  <a href="#af53cb85a56dda4aa7f95fc90e4d82069"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af9c4563e46566bd0b8352ff64f792318"></a><!-- doxytag: member="adc_stm32.c::adc_hw_init" ref="af9c4563e46566bd0b8352ff64f792318" args="(void)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="adc__stm32_8c.html#af9c4563e46566bd0b8352ff64f792318">adc_hw_init</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Init ADC hardware. <br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>ADC hardware-specific implementation. </p>
<p>This ADC module should be use both whit kernel or none. If you are using a kernel, the adc drive does not wait the finish of conversion but use a singal every time a required conversion are ended. This signal wake up a process that return a result of conversion. Otherwise, if you not use a kernl, this module wait whit a loop the finishing of conversion.</p>
<dl class="author"><dt><b>Author:</b></dt><dd>Daniele Basile &lt;<a href="mailto:asterix@develer.com">asterix@develer.com</a>&gt; </dd></dl>

<p>Definition in file <a class="el" href="adc__stm32_8c_source.html">adc_stm32.c</a>.</p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="af53cb85a56dda4aa7f95fc90e4d82069"></a><!-- doxytag: member="adc_stm32.c::adc_hw_read" ref="af53cb85a56dda4aa7f95fc90e4d82069" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t adc_hw_read </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Start an ADC convertion. </p>
<p>If a kernel is present, preempt until convertion is complete, otherwise a busy wait on ADC_DRDY bit is done. </p>

<p>Definition at line <a class="el" href="adc__stm32_8c_source.html#l00131">131</a> of file <a class="el" href="adc__stm32_8c_source.html">adc_stm32.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2654afcc53d07a0fe8677c5c64c94d60"></a><!-- doxytag: member="adc_stm32.c::adc_hw_select_ch" ref="a2654afcc53d07a0fe8677c5c64c94d60" args="(uint8_t ch)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adc_hw_select_ch </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Select mux channel <em>ch</em>. </p>
<p>Generally the stm32 cpu family allow us to program the order of adc channel that we want to read. In this driver implementation we put as fist channel to read the select ones. </p>

<p>Definition at line <a class="el" href="adc__stm32_8c_source.html#l00119">119</a> of file <a class="el" href="adc__stm32_8c_source.html">adc_stm32.c</a>.</p>

</div>
</div>
</div>


