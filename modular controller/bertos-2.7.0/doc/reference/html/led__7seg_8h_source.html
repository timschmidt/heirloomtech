

<!-- Generated by Doxygen 1.7.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_9fd71c1ac00056e7d855336b2291c56c.html">bertos</a>      </li>
      <li class="navelem"><a class="el" href="dir_f7c89dbd63e8f34e572fe939945c15d7.html">drv</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">led_7seg.h</div>  </div>
</div>
<div class="contents">
<a href="led__7seg_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00090"></a>00090 <span class="preprocessor">#ifndef DRV_LED_7SEG_H</span>
<a name="l00091"></a>00091 <span class="preprocessor"></span><span class="preprocessor">#define DRV_LED_7SEG_H</span>
<a name="l00092"></a>00092 <span class="preprocessor"></span>
<a name="l00093"></a>00093 <span class="preprocessor">#include &quot;<a class="code" href="cfg__led__7seg_8h.html" title="Configuration file for led 7 segment display.">cfg/cfg_led_7seg.h</a>&quot;</span>
<a name="l00094"></a>00094 <span class="preprocessor">#include &lt;<a class="code" href="timer_8h.html">drv/timer.h</a>&gt;</span>
<a name="l00095"></a>00095 <span class="preprocessor">#include &lt;<a class="code" href="event_8h.html">mware/event.h</a>&gt;</span>
<a name="l00096"></a>00096 
<a name="l00112"></a>00112 <span class="preprocessor">#if CONFIG_LED_7SEG_CCAT</span>
<a name="l00113"></a>00113 <span class="preprocessor"></span>        <span class="keyword">static</span> <span class="keyword">const</span> uint8_t segstable[] =
<a name="l00114"></a>00114         {
<a name="l00115"></a>00115                 0x3f, 0x6, 0x5b, 0x4f, 0x66, 0x6d, 0x7d, 0x7, 0x7f,
<a name="l00116"></a>00116                 0x6f, 0x80, 0x40, 0x77, 0x7c, 0x39, 0x5e, 0x79, 0x71,
<a name="l00117"></a>00117                 0x3d, 0x74, 0x30, 0x1e, 0x75, 0x38, 0x15, 0x37, 0x3f,
<a name="l00118"></a>00118                 0x73, 0x67, 0x50, 0x6d, 0x78, 0x3e, 0x2a, 0x6a, 0x76,
<a name="l00119"></a>00119                 0x6e, 0x5b, 0x0
<a name="l00120"></a>00120         };
<a name="l00121"></a>00121 <span class="preprocessor">#else</span>
<a name="l00122"></a>00122 <span class="preprocessor"></span>        <span class="keyword">static</span> <span class="keyword">const</span> uint8_t segstable[] =
<a name="l00123"></a>00123         {
<a name="l00124"></a>00124                 0xc0, 0xf9, 0xa4, 0xb0, 0x99, 0x92, 0x82, 0xf8, 0x80,
<a name="l00125"></a>00125                 0x90, 0x7f, 0xbf, 0x88, 0x83, 0xc6, 0xa1, 0x86, 0x8e,
<a name="l00126"></a>00126                 0xc2, 0x8b, 0xcf, 0xe1, 0x8a, 0xc7, 0xea, 0xc8, 0xc0,
<a name="l00127"></a>00127                 0x8c, 0x98, 0xaf, 0x92, 0x87, 0xc1, 0xd5, 0x95, 0x89,
<a name="l00128"></a>00128                 0x91, 0xa4, 0xff
<a name="l00129"></a>00129         };
<a name="l00130"></a>00130 <span class="preprocessor">#endif</span>
<a name="l00131"></a>00131 <span class="preprocessor"></span>
<a name="l00137"></a><a class="code" href="structSevenSeg.html">00137</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structSevenSeg.html" title="Context data for Display functions.">SevenSeg</a>
<a name="l00138"></a>00138 {
<a name="l00140"></a><a class="code" href="structSevenSeg.html#ac171cdfbdac61c83ff3a2f96a4698fc3">00140</a>         uint8_t <span class="keywordtype">string</span>[<a class="code" href="group__SevenSegDisplay.html#gaaf8eb040245b97fa569c3ead8215971d" title="Max lenght of the string to be displayed.">CONFIG_LED_7SEG_STRLEN</a>];
<a name="l00142"></a><a class="code" href="structSevenSeg.html#ac96f863120bdae5081ee236839db20a0">00142</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structSevenSeg.html#ac96f863120bdae5081ee236839db20a0" title="The length of the string to be displayed.">string_len</a>;
<a name="l00144"></a><a class="code" href="structSevenSeg.html#a499fbe67df8814ef60c79651a4c2e9f0">00144</a>         <span class="keywordtype">bool</span> <a class="code" href="structSevenSeg.html#a499fbe67df8814ef60c79651a4c2e9f0" title="Has to blink?">blink</a>;
<a name="l00146"></a><a class="code" href="structSevenSeg.html#af30f5da3cb040e98e26e2c34b9b00f1f">00146</a>         uint8_t <a class="code" href="structSevenSeg.html#af30f5da3cb040e98e26e2c34b9b00f1f" title="Has to blink only one digit?">bdigit</a>;
<a name="l00148"></a><a class="code" href="structSevenSeg.html#a3d3986f18dbc16cc3589477f5a97dad0">00148</a>         <span class="keywordtype">bool</span> <a class="code" href="structSevenSeg.html#a3d3986f18dbc16cc3589477f5a97dad0" title="Has to be displayed only one time?">runonce</a>;
<a name="l00150"></a><a class="code" href="structSevenSeg.html#af205235c7d82d5e663aae2572bf3e699">00150</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structSevenSeg.html#af205235c7d82d5e663aae2572bf3e699" title="Scrolling speed.">speed</a>;
<a name="l00152"></a><a class="code" href="structSevenSeg.html#a4769182c92e04dd81c57a64ffe6e3408">00152</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structSevenSeg.html#a4769182c92e04dd81c57a64ffe6e3408" title="Working scrolling speed.">curspeed</a>;
<a name="l00154"></a><a class="code" href="structSevenSeg.html#a52d8dcc2120c8546478e576109232053">00154</a>         <span class="keywordtype">bool</span> <a class="code" href="structSevenSeg.html#a52d8dcc2120c8546478e576109232053" title="Is it printed at least one time?">firstrun</a>;
<a name="l00156"></a><a class="code" href="structSevenSeg.html#aef677238dc31002c2dce0addd4b5f056">00156</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structSevenSeg.html#aef677238dc31002c2dce0addd4b5f056" title="Working current position.">curpos</a>;
<a name="l00158"></a><a class="code" href="structSevenSeg.html#ae599485da1d3c9d746838ea275dfc1fe">00158</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structSevenSeg.html#ae599485da1d3c9d746838ea275dfc1fe" title="Working current digit.">curdigit</a>;
<a name="l00160"></a><a class="code" href="structSevenSeg.html#ad8050be682a2f28d9260165437143832">00160</a>         <span class="keywordtype">bool</span> <a class="code" href="structSevenSeg.html#ad8050be682a2f28d9260165437143832" title="Is the structure in edit?">busyedit</a>;
<a name="l00161"></a>00161 } <a class="code" href="structSevenSeg.html" title="Context data for Display functions.">SevenSeg</a>;
<a name="l00162"></a>00162 
<a name="l00163"></a>00163 <span class="comment">/* Functions prototypes */</span>
<a name="l00164"></a>00164 
<a name="l00165"></a>00165 <span class="comment">/*</span>
<a name="l00166"></a>00166 <span class="comment"> * This is the procedure that fills the seven_seg structure with the translated</span>
<a name="l00167"></a>00167 <span class="comment"> * string to display. It swaps also the structures to display the new text when</span>
<a name="l00168"></a>00168 <span class="comment"> * all the data is ready to display.</span>
<a name="l00169"></a>00169 <span class="comment"> */</span>
<a name="l00170"></a>00170 <span class="keywordtype">int</span> <a class="code" href="group__SevenSegDisplay.html#gadbdb730fe489f13944c584720c1c456d" title="Print a string on the display.">sevenseg_print</a>(<a class="code" href="structSevenSeg.html" title="Context data for Display functions.">SevenSeg</a> *SS, <span class="keyword">const</span> <span class="keywordtype">char</span> *sstring);
<a name="l00171"></a>00171 
<a name="l00172"></a>00172 <span class="comment">/*</span>
<a name="l00173"></a>00173 <span class="comment"> * This is the procedure that inits all the structures that rules the 7 segments</span>
<a name="l00174"></a>00174 <span class="comment"> * display and set the timer for the proper print/refresh of the text.</span>
<a name="l00175"></a>00175 <span class="comment"> */</span>
<a name="l00176"></a>00176 <span class="keywordtype">void</span> <a class="code" href="group__SevenSegDisplay.html#ga83e09b743ec54a60b596c154d501ad00" title="initialize the structure and the timer for the display">sevenseg_init</a>(<a class="code" href="structSevenSeg.html" title="Context data for Display functions.">SevenSeg</a> *SS);
<a name="l00177"></a>00177 
<a name="l00178"></a>00178 <span class="comment">/*</span>
<a name="l00179"></a>00179 <span class="comment"> * This is the procedure that does a short print of all segments of all</span>
<a name="l00180"></a>00180 <span class="comment"> * digits of the display.</span>
<a name="l00181"></a>00181 <span class="comment"> */</span>
<a name="l00182"></a>00182 <span class="keywordtype">void</span> sevenseg_test(<a class="code" href="structSevenSeg.html" title="Context data for Display functions.">SevenSeg</a> *SS);
<a name="l00183"></a>00183 
<a name="l00184"></a>00184 <span class="comment">/*</span>
<a name="l00185"></a>00185 <span class="comment"> * This is the procedure that check if the print of the current text is run</span>
<a name="l00186"></a>00186 <span class="comment"> * almost one time and we&#39;re ready to print a new text.</span>
<a name="l00187"></a>00187 <span class="comment"> */</span>
<a name="l00188"></a>00188 <span class="keywordtype">bool</span> <a class="code" href="group__SevenSegDisplay.html#ga602f45b9575ad540c3dbb4c23f82c11a" title="check if is possible to do a new print">sevenseg_isReady</a>(<a class="code" href="structSevenSeg.html" title="Context data for Display functions.">SevenSeg</a> *SS);
<a name="l00189"></a>00189 
<a name="l00190"></a>00190 <span class="comment">/*</span>
<a name="l00191"></a>00191 <span class="comment"> * This is the procedure that check if the print of the current text is run</span>
<a name="l00192"></a>00192 <span class="comment"> * almost one time and then set the status of the display to &quot;unlocked&quot;.</span>
<a name="l00193"></a>00193 <span class="comment"> */</span>
<a name="l00194"></a>00194 <span class="keywordtype">bool</span> <a class="code" href="group__SevenSegDisplay.html#ga4e700e600551b1f72cde57c259bdf610" title="unlock the SevenSeg structure and stops the print">sevenseg_unlock</a>(<a class="code" href="structSevenSeg.html" title="Context data for Display functions.">SevenSeg</a> *SS);
<a name="l00195"></a>00195 
<a name="l00196"></a>00196 <span class="comment">/*</span>
<a name="l00197"></a>00197 <span class="comment"> * This is the procedure that lock the display and permit</span>
<a name="l00198"></a>00198 <span class="comment"> * the print of the text.</span>
<a name="l00199"></a>00199 <span class="comment"> */</span>
<a name="l00200"></a>00200 <span class="keywordtype">bool</span> <a class="code" href="group__SevenSegDisplay.html#ga95eaf543d14935798d714cf9386d9b6c" title="lock the SeveSeg structure and starts a new print">sevenseg_lock</a>(<a class="code" href="structSevenSeg.html" title="Context data for Display functions.">SevenSeg</a> *SS);
<a name="l00201"></a>00201 
<a name="l00202"></a>00202 <span class="comment">/*</span>
<a name="l00203"></a>00203 <span class="comment"> * This is the procedure that set the blinking of the display.</span>
<a name="l00204"></a>00204 <span class="comment"> * You can choose to blink all the display or only a single</span>
<a name="l00205"></a>00205 <span class="comment"> * digit.</span>
<a name="l00206"></a>00206 <span class="comment"> */</span>
<a name="l00207"></a>00207 <span class="keywordtype">bool</span> <a class="code" href="group__SevenSegDisplay.html#ga83f7f9e39d428e5e8eea6327175c7953" title="set the blinking of the digits of the display">sevenseg_setBlink</a>(<a class="code" href="structSevenSeg.html" title="Context data for Display functions.">SevenSeg</a> *SS, <span class="keywordtype">bool</span> blink, uint8_t digit);
<a name="l00208"></a>00208 
<a name="l00209"></a>00209 <span class="comment">/*</span>
<a name="l00210"></a>00210 <span class="comment"> * This is the procedure that set if the text has to be displayed</span>
<a name="l00211"></a>00211 <span class="comment"> * just one time</span>
<a name="l00212"></a>00212 <span class="comment"> */</span>
<a name="l00213"></a>00213 <span class="keywordtype">bool</span> <a class="code" href="group__SevenSegDisplay.html#ga0acfcb4e8a556d2a9abc8d858735cdcd" title="set if the text has to be displayed just one time">sevenseg_setRunonce</a>(<a class="code" href="structSevenSeg.html" title="Context data for Display functions.">SevenSeg</a> *SS, <span class="keywordtype">bool</span> runonce);
<a name="l00214"></a>00214 
<a name="l00215"></a>00215 <span class="comment">/*</span>
<a name="l00216"></a>00216 <span class="comment"> * This is the procedure that set the scrolling speed of the text</span>
<a name="l00217"></a>00217 <span class="comment"> * if the text is longer than the display digits or the</span>
<a name="l00218"></a>00218 <span class="comment"> * duration of the display if the text is smaller or equal the</span>
<a name="l00219"></a>00219 <span class="comment"> * length of display digits.</span>
<a name="l00220"></a>00220 <span class="comment"> */</span>
<a name="l00221"></a>00221 <span class="keywordtype">bool</span> <a class="code" href="group__SevenSegDisplay.html#ga7dc8265f345b3001b8b68d4e5402bd76" title="set the scrolling speed of the text">sevenseg_setRunspeed</a>(<a class="code" href="structSevenSeg.html" title="Context data for Display functions.">SevenSeg</a> *SS, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> r_speed);
<a name="l00222"></a>00222 
<a name="l00223"></a>00223 <span class="comment">/*</span>
<a name="l00224"></a>00224 <span class="comment"> * This is the procedure that blanks the text to be displayed</span>
<a name="l00225"></a>00225 <span class="comment"> * and so on clear the display.</span>
<a name="l00226"></a>00226 <span class="comment"> */</span>
<a name="l00227"></a>00227 <span class="keywordtype">bool</span> <a class="code" href="group__SevenSegDisplay.html#gae1efd17019b365c64e4c1b3a8425d347" title="clear the display">sevenseg_clear</a>(<a class="code" href="structSevenSeg.html" title="Context data for Display functions.">SevenSeg</a> *SS);
<a name="l00228"></a>00228 
<a name="l00229"></a>00229 <span class="preprocessor">#endif </span><span class="comment">/* DRV_LED_7SEG_H */</span>
<a name="l00230"></a>00230  <span class="comment">//defgroup drivers</span>
</pre></div></div>
</div>


