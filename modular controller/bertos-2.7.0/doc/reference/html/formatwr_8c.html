

<!-- Generated by Doxygen 1.7.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_9fd71c1ac00056e7d855336b2291c56c.html">bertos</a>      </li>
      <li class="navelem"><a class="el" href="dir_5b85ff6a72c79a71106598e13514bf0c.html">mware</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">formatwr.c File Reference</div>  </div>
</div>
<div class="contents">

<p>Basic "printf", "sprintf" and "fprintf" formatter.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="formatwr_8h_source.html">formatwr.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cfg__formatwr_8h_source.html">cfg/cfg_formatwr.h</a>&quot;</code><br/>
<code>#include &lt;<a class="el" href="debug_8h_source.html">cfg/debug.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="cpu_2pgm_8h_source.html">cpu/pgm.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="hex_8h_source.html">mware/hex.h</a>&gt;</code><br/>
<code>#include &lt;float.h&gt;</code><br/>
</div>
<p><a href="formatwr_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="formatwr_8c.html#aece5f43fffe1e18ad6a8daedff5593cd">CONFIG_PRINTF_N_FORMATTER</a>&#160;&#160;&#160;0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable the arcane n formatter.  <a href="#aece5f43fffe1e18ad6a8daedff5593cd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="formatwr_8c.html#a60e00759890f928b452342a7eae7417d">CONFIG_PRINTF_OCTAL_FORMATTER</a>&#160;&#160;&#160;0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable the o formatter.  <a href="#a60e00759890f928b452342a7eae7417d"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="formatwr_8c.html#a906fe12653cd950cbbc0537144947d58">_formatted_write</a> (const char *PGM_ATTR format, void put_one_char(char, void *), void *secret_pointer, va_list ap)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This routine forms the core and entry of the formatter.  <a href="#a906fe12653cd950cbbc0537144947d58"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Basic "printf", "sprintf" and "fprintf" formatter. </p>
<p>This module is 100% reentrant and can be adapted to user-defined routines that needs formatters with special properties like different output channels or new format specifiers.</p>
<p>To reduce size in applications not using real numbers or long integers the formatter may be compiled to exclude certain parts. This is controlled by giving a -D option a compilation time:</p>
<div class="fragment"><pre class="fragment">  -D <a class="code" href="cfg__formatwr_8h.html#a18f175c8284c489d58b84780d4b9e205" title="printf()-style formatter configuration.">CONFIG_PRINTF</a>=PRINTF_FULL         Full ANSI printf formatter, with some C99 extensions
  -D CONFIG_PRINTF=PRINTF_NOFLOAT      Exclude support <span class="keywordflow">for</span> floats
  -D CONFIG_PRINTF=PRINTF_REDUCED      Simplified formatter (see below)
  -D CONFIG_PRINTF=PRINTF_NOMODIFIERS  Exclude <span class="stringliteral">&quot;l&quot;</span>, <span class="stringliteral">&quot;z&quot;</span> and <span class="stringliteral">&quot;h&quot;</span> modifiers in reduced version
  -D CONFIG_PRINTF=PRINTF_DISABLED     No formatter at all
</pre></div><p>Code size on AVR4 with GCC 3.4.1 (-O2): </p>
<ul>
<li>PRINTF_FULL 2912byte (0xB60) </li>
<li>PRINTF_NOFLOAT 1684byte (0x694) </li>
<li>PRINTF_REDUCED 924byte (0x39C) </li>
<li>PRINTF_NOMODIFIERS 416byte (0x1A0)</li>
</ul>
<p>Code/data size in words on DSP56K with CodeWarrior 6.0: </p>
<ul>
<li>PRINTF_FULL 1493/45 </li>
<li>PRINTF_NOFLOAT 795/45 </li>
<li>PRINTF_REDUCED 482/0 </li>
<li>PRINTF_NOMODIFIERS 301/0</li>
</ul>
<p>The reduced version of formatter is suitable when program size is critical rather than formatting power. This routine uses less than 20 bytes of stack space which makes it practical even in systems with less than 256 bytes of user RAM.</p>
<p>The only formatting specifiers supported by the reduced formatter are: </p>
<div class="fragment"><pre class="fragment">    %% %c %s %d %o %x %<a class="code" href="md2_8c.html#a207fd5507206d307cd63f95374fcd00d" title="Md2_perm() function generate an array of 256 &quot;casual&quot; permutation.">X</a> and %hd %ho %hx %hX %ld %lo %lx %lX
</pre></div><p>It means that real variables are not supported as well as field width and precision arguments. </p>

<p>Definition in file <a class="el" href="formatwr_8c_source.html">formatwr.c</a>.</p>
</div><hr/><h2>Define Documentation</h2>
<a class="anchor" id="aece5f43fffe1e18ad6a8daedff5593cd"></a><!-- doxytag: member="formatwr.c::CONFIG_PRINTF_N_FORMATTER" ref="aece5f43fffe1e18ad6a8daedff5593cd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIG_PRINTF_N_FORMATTER&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Disable the arcane n formatter. </p>

<p>Definition at line <a class="el" href="formatwr_8c_source.html#l00089">89</a> of file <a class="el" href="formatwr_8c_source.html">formatwr.c</a>.</p>

</div>
</div>
<a class="anchor" id="a60e00759890f928b452342a7eae7417d"></a><!-- doxytag: member="formatwr.c::CONFIG_PRINTF_OCTAL_FORMATTER" ref="a60e00759890f928b452342a7eae7417d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIG_PRINTF_OCTAL_FORMATTER&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Disable the o formatter. </p>

<p>Definition at line <a class="el" href="formatwr_8c_source.html#l00094">94</a> of file <a class="el" href="formatwr_8c_source.html">formatwr.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a906fe12653cd950cbbc0537144947d58"></a><!-- doxytag: member="formatwr.c::_formatted_write" ref="a906fe12653cd950cbbc0537144947d58" args="(const char *PGM_ATTR format, void put_one_char(char, void *), void *secret_pointer, va_list ap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int _formatted_write </td>
          <td>(</td>
          <td class="paramtype">const char *PGM_ATTR&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void &#160;</td>
          <td class="paramname"><em>put_one_char</em>char, void *, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>secret_pointer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">va_list&#160;</td>
          <td class="paramname"><em>ap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This routine forms the core and entry of the formatter. </p>
<p>The conversion performed conforms to the ANSI specification for "printf". </p>

<p>Definition at line <a class="el" href="formatwr_8c_source.html#l00333">333</a> of file <a class="el" href="formatwr_8c_source.html">formatwr.c</a>.</p>

</div>
</div>
</div>


