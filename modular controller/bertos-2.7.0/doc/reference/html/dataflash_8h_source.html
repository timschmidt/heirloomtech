

<!-- Generated by Doxygen 1.7.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_9fd71c1ac00056e7d855336b2291c56c.html">bertos</a>      </li>
      <li class="navelem"><a class="el" href="dir_f7c89dbd63e8f34e572fe939945c15d7.html">drv</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">dataflash.h</div>  </div>
</div>
<div class="contents">
<a href="dataflash_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00045"></a>00045 <span class="preprocessor">#ifndef DRV_DATAFLASH_H</span>
<a name="l00046"></a>00046 <span class="preprocessor"></span><span class="preprocessor">#define DRV_DATAFLASH_H</span>
<a name="l00047"></a>00047 <span class="preprocessor"></span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &lt;<a class="code" href="compiler_8h.html" title="Additional support macros for compiler independance.">cfg/compiler.h</a>&gt;</span>
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 <span class="preprocessor">#include &lt;<a class="code" href="io_2kfile_8h.html">io/kfile.h</a>&gt;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include &lt;<a class="code" href="battfs_8h.html" title="BattFS: a filesystem for embedded platforms (interface). TODO: Add detailed filesystem description...">fs/battfs.h</a>&gt;</span>
<a name="l00052"></a>00052 
<a name="l00057"></a><a class="code" href="dataflash_8h.html#a6736fa391e3a05f8b73c87291ff26640">00057</a> <span class="keyword">typedef</span> uint32_t <a class="code" href="dataflash_8h.html#a6736fa391e3a05f8b73c87291ff26640" title="Type definitions for dflash memory.">dataflash_page_t</a>;
<a name="l00058"></a><a class="code" href="dataflash_8h.html#a452e496b581ae3449b4f6a3886891424">00058</a> <span class="keyword">typedef</span> uint32_t <a class="code" href="dataflash_8h.html#a452e496b581ae3449b4f6a3886891424" title="Type definitions for dflash memory.">dataflash_offset_t</a>;
<a name="l00059"></a><a class="code" href="dataflash_8h.html#a9aa2cd64e8fd8bf19413f1dc61399006">00059</a> <span class="keyword">typedef</span> uint32_t <a class="code" href="dataflash_8h.html#a9aa2cd64e8fd8bf19413f1dc61399006" title="Type definitions for dflash memory.">dataflash_size_t</a>;
<a name="l00060"></a>00060 <span class="comment">/*\}*/</span>
<a name="l00061"></a>00061 
<a name="l00065"></a>00065 <span class="keyword">typedef</span> void (dataflash_setReset_t)(bool);
<a name="l00066"></a>00066 <span class="keyword">typedef</span> void (dataflash_setCS_t)(bool);
<a name="l00067"></a>00067 
<a name="l00076"></a><a class="code" href="dataflash_8h.html#a734aa6956f6ea34cd612b934e3003675">00076</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="dataflash_8h.html#a734aa6956f6ea34cd612b934e3003675" title="Memory definitions.">DataflashType</a>
<a name="l00077"></a>00077 {
<a name="l00078"></a>00078     DFT_AT45DB041B = 0,
<a name="l00079"></a>00079     DFT_AT45DB081D,
<a name="l00080"></a>00080     DFT_AT45DB161D,
<a name="l00081"></a>00081     DFT_AT45DB642D,
<a name="l00082"></a>00082     DFT_CNT
<a name="l00083"></a>00083 } <a class="code" href="dataflash_8h.html#a734aa6956f6ea34cd612b934e3003675" title="Memory definitions.">DataflashType</a>;
<a name="l00084"></a>00084 
<a name="l00085"></a>00085 
<a name="l00089"></a><a class="code" href="structDataFlash.html">00089</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structDataFlash.html" title="Dataflash KFile context structure.">DataFlash</a>
<a name="l00090"></a>00090 {
<a name="l00091"></a><a class="code" href="structDataFlash.html#ab355ec31810d8f259f629e6248982f37">00091</a>     <a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> <a class="code" href="structDataFlash.html#ab355ec31810d8f259f629e6248982f37" title="File descriptor.">fd</a>;                       
<a name="l00092"></a><a class="code" href="structDataFlash.html#a66c8c7e0d50990dc7b4ea04178ee049a">00092</a>     <a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *<a class="code" href="structDataFlash.html#a66c8c7e0d50990dc7b4ea04178ee049a" title="Dataflash comm channel (usually SPI).">channel</a>;                 
<a name="l00093"></a><a class="code" href="structDataFlash.html#aa1c6e8f445fd6c711268116d59fee26b">00093</a>     <a class="code" href="dataflash_8h.html#a734aa6956f6ea34cd612b934e3003675" title="Memory definitions.">DataflashType</a> <a class="code" href="structDataFlash.html#aa1c6e8f445fd6c711268116d59fee26b" title="Memory device type;.">dev</a>;              
<a name="l00094"></a><a class="code" href="structDataFlash.html#a3bd8f4428863de5f0be98304ef35ce2a">00094</a>     <a class="code" href="dataflash_8h.html#a6736fa391e3a05f8b73c87291ff26640" title="Type definitions for dflash memory.">dataflash_page_t</a> <a class="code" href="structDataFlash.html#a3bd8f4428863de5f0be98304ef35ce2a" title="Current loaded dataflash page.">current_page</a>;  
<a name="l00095"></a><a class="code" href="structDataFlash.html#a7b57d37b226b5c4729c57a86e8d135b8">00095</a>     <span class="keywordtype">bool</span> <a class="code" href="structDataFlash.html#a7b57d37b226b5c4729c57a86e8d135b8" title="True if current_page is dirty (needs to be flushed).">page_dirty</a>;                
<a name="l00096"></a><a class="code" href="structDataFlash.html#a94b920ac2db147c2e87150632b825ee3">00096</a>     dataflash_setReset_t *<a class="code" href="structDataFlash.html#a94b920ac2db147c2e87150632b825ee3" title="Callback used to set reset pin of dataflash.">setReset</a>; 
<a name="l00097"></a><a class="code" href="structDataFlash.html#a18537afdb4fd6e621cbfd2b60e3578d4">00097</a>     dataflash_setCS_t *<a class="code" href="structDataFlash.html#a18537afdb4fd6e621cbfd2b60e3578d4" title="Callback used to set CS pin of dataflash.">setCS</a>;       
<a name="l00098"></a>00098 } <a class="code" href="structDataFlash.html" title="Dataflash KFile context structure.">DataFlash</a>;
<a name="l00099"></a>00099 
<a name="l00103"></a><a class="code" href="dataflash_8h.html#aee6325d28cbc4fe0b7de904e0ee8dd72">00103</a> <span class="preprocessor">#define KFT_DATAFLASH MAKE_ID(&#39;D&#39;, &#39;F&#39;, &#39;L&#39;, &#39;H&#39;)</span>
<a name="l00104"></a>00104 <span class="preprocessor"></span>
<a name="l00108"></a><a class="code" href="dataflash_8h.html#a27dfcfa2c9aad38bde336138e1e12155">00108</a> INLINE <a class="code" href="structDataFlash.html" title="Dataflash KFile context structure.">DataFlash</a> * <a class="code" href="dataflash_8h.html#a27dfcfa2c9aad38bde336138e1e12155" title="Convert + ASSERT from generic KFile to DataFlash.">DATAFLASH_CAST</a>(<a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd)
<a name="l00109"></a>00109 {
<a name="l00110"></a>00110     <a class="code" href="group__debug.html#gaca68c0d4ac8df0838e209fb5300f7be3" title="Assert a pre-condition on code.">ASSERT</a>(fd-&gt;_type == <a class="code" href="dataflash_8h.html#aee6325d28cbc4fe0b7de904e0ee8dd72" title="ID for dataflash.">KFT_DATAFLASH</a>);
<a name="l00111"></a>00111     <span class="keywordflow">return</span> (<a class="code" href="structDataFlash.html" title="Dataflash KFile context structure.">DataFlash</a> *)fd;
<a name="l00112"></a>00112 }
<a name="l00113"></a>00113 
<a name="l00114"></a><a class="code" href="dataflash_8h.html#ab8d07a2bf94d02c956096bf05bbc2ccb">00114</a> <span class="preprocessor">#define RESET_PULSE_WIDTH     10 ///&lt; Width of reset pulse in usec.</span>
<a name="l00115"></a><a class="code" href="dataflash_8h.html#a7e9eda34f27d379d599f1dc4cd837ff3">00115</a> <span class="preprocessor"></span><span class="preprocessor">#define BUSY_BIT            0x80 ///&lt; Select a busy bit in status register.</span>
<a name="l00116"></a><a class="code" href="dataflash_8h.html#af4afb3e4e91a9c205d9baf8c25a4f1e4">00116</a> <span class="preprocessor"></span><span class="preprocessor">#define CMP_BIT             0x40 ///&lt; Select a compare bit in status register.</span>
<a name="l00117"></a>00117 <span class="preprocessor"></span>
<a name="l00123"></a><a class="code" href="dataflash_8h.html#a4c41f17fb857b88db83bdfbc9eba34de">00123</a> <span class="preprocessor">#define GET_ID_DESITY_DEVICE(reg_stat) (((reg_stat) &amp; 0x3C) &gt;&gt; 2)</span>
<a name="l00124"></a>00124 <span class="preprocessor"></span>
<a name="l00128"></a><a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92">00128</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92" title="Data flash opcode commands.">DataFlashOpcode</a> {
<a name="l00133"></a><a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92ad036ed80a2a8a5958d251a0ba64427b7">00133</a>     <a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92ad036ed80a2a8a5958d251a0ba64427b7" title="Dataflash read commands.">DFO_READ_FLASH_MEM_BYTE_D</a>  = 0x0B, 
<a name="l00134"></a><a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92ade837679e682b7a7a33a1d793f5dbefb">00134</a>     <a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92ade837679e682b7a7a33a1d793f5dbefb" title="Continuos array read for B type memories.">DFO_READ_FLASH_MEM_BYTE_B</a>  = 0xE8, 
<a name="l00135"></a>00135 
<a name="l00136"></a><a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92aa74716949be82438035f8727ea652698">00136</a>     <a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92aa74716949be82438035f8727ea652698" title="Main memory page read.">DFO_READ_FLASH_MEM</a>       = 0xD2, 
<a name="l00137"></a><a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92a0d98a778eeec8f2a37727e220586c964">00137</a>     <a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92a0d98a778eeec8f2a37727e220586c964" title="SRAM buffer 1 read.">DFO_READ_BUFF1</a>           = 0xD4, 
<a name="l00138"></a><a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92a267ea3d857a530aecf8c5cb66ab33a88">00138</a>     <a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92a267ea3d857a530aecf8c5cb66ab33a88" title="SRAM buffer 2 read.">DFO_READ_BUFF2</a>           = 0xD6, 
<a name="l00139"></a>00139     <span class="comment">/* \}*/</span>
<a name="l00140"></a>00140 
<a name="l00145"></a><a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92a86a2a643712387e95d1c58f2c643ae0b">00145</a>     <a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92a86a2a643712387e95d1c58f2c643ae0b" title="Program and erase commands data flash.">DFO_WRITE_BUFF1</a>          =  0x84, 
<a name="l00146"></a><a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92acdaa6699eca2875fb53e0764b4efcdaa">00146</a>     <a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92acdaa6699eca2875fb53e0764b4efcdaa" title="SRAM buffer 2 write.">DFO_WRITE_BUFF2</a>          =  0x87, 
<a name="l00147"></a><a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92ab5848665fc842321148e38bf58f27418">00147</a>     <a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92ab5848665fc842321148e38bf58f27418" title="Buffer 1 to main memory page program with built-in erase.">DFO_WRITE_BUFF1_TO_MEM_E</a> =  0x83, 
<a name="l00148"></a><a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92ad1d72ae783c58b91f6f7da58f80ddfe1">00148</a>     <a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92ad1d72ae783c58b91f6f7da58f80ddfe1" title="Buffer 2 to main memory page program with built-in erase.">DFO_WRITE_BUFF2_TO_MEM_E</a> =  0x86, 
<a name="l00149"></a><a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92ab4c6b3fb7f4ace40fdeb2768e9dd50e6">00149</a>     <a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92ab4c6b3fb7f4ace40fdeb2768e9dd50e6" title="Buffer 1 to main memory page program without built-in erase.">DFO_WRITE_BUFF1_TO_MEM</a>   =  0x88, 
<a name="l00150"></a><a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92a6506d0b611f3a545ef2115db14c217ab">00150</a>     <a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92a6506d0b611f3a545ef2115db14c217ab" title="Buffer 2 to main memory page program without built-in erase.">DFO_WRITE_BUFF2_TO_MEM</a>   =  0x89, 
<a name="l00151"></a><a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92a251e37030c9d752bca111bb186fe7a7c">00151</a>     <a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92a251e37030c9d752bca111bb186fe7a7c" title="Erase page.">DFO_ERASE_PAGE</a>           =  0x81, 
<a name="l00152"></a><a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92a109a8dac46e8e29af0dae03832cf8e84">00152</a>     <a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92a109a8dac46e8e29af0dae03832cf8e84" title="Erase block.">DFO_ERASE_BLOCK</a>          =  0x50, 
<a name="l00153"></a><a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92ad2bb597693a212ee1700282b35911ba6">00153</a>     <a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92ad2bb597693a212ee1700282b35911ba6" title="Erase sector.">DFO_ERASE_SECTOR</a>         =  0x7C, 
<a name="l00154"></a><a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92a1430024d07e9d32ba59d7867470e9f52">00154</a>     <a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92a1430024d07e9d32ba59d7867470e9f52" title="Write main memory page through buffer 1.">DFO_WRITE_MEM_TR_BUFF1</a>   =  0x82, 
<a name="l00155"></a><a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92ae1956333505ba5814e264ec750ae9b8a">00155</a>     <a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92ae1956333505ba5814e264ec750ae9b8a" title="Write main memory page through buffer 2.">DFO_WRITE_MEM_TR_BUFF2</a>   =  0x85, 
<a name="l00156"></a>00156     <span class="comment">/* \}*/</span>
<a name="l00157"></a>00157 
<a name="l00162"></a><a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92a6bf8852f48ed4b34247b304789281836">00162</a>     <a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92a6bf8852f48ed4b34247b304789281836" title="Additional dataflash commands.">DFO_MOV_MEM_TO_BUFF1</a>     =  0x53, 
<a name="l00163"></a><a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92ac5b2f67f2a7f5c73e0799ef64a37a888">00163</a>     <a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92ac5b2f67f2a7f5c73e0799ef64a37a888" title="Transfer main mmemory to buffer 2.">DFO_MOV_MEM_TO_BUFF2</a>     =  0x55, 
<a name="l00164"></a><a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92a5acca40ba912817abafed7b90dbc18d5">00164</a>     <a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92a5acca40ba912817abafed7b90dbc18d5" title="Compare main mmemory with buffer 1.">DFO_CMP_MEM_TO_BUFF1</a>     =  0x60, 
<a name="l00165"></a><a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92ac93605f59b9790b9e612d732a396e11b">00165</a>     <a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92ac93605f59b9790b9e612d732a396e11b" title="Compare main mmemory with buffer 2.">DFO_CMP_MEM_TO_BUFF2</a>     =  0x61, 
<a name="l00166"></a><a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92a2f4a992e644b366a5ee67903a608b0c7">00166</a>     <a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92a2f4a992e644b366a5ee67903a608b0c7" title="Auto page rewrite through buffer 1.">DFO_ARW_MEM_TR_BUFF1</a>     =  0x58, 
<a name="l00167"></a><a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92a9308d7e463c3a14c20778bebf050f0e5">00167</a>     <a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92a9308d7e463c3a14c20778bebf050f0e5" title="Auto page rewrite through buffer 2.">DFO_ARW_MEM_TR_BUFF2</a>     =  0x59, 
<a name="l00168"></a><a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92a885fd69d269b49687cda77a1bf6a1ce5">00168</a>     <a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92a885fd69d269b49687cda77a1bf6a1ce5" title="Deep power-down.">DFO_PWR_DOWN</a>             =  0xB9, 
<a name="l00169"></a><a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92a1934ee73a529be582f41ccbe778cde27">00169</a>     <a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92a1934ee73a529be582f41ccbe778cde27" title="Resume from deep power-down.">DFO_RESUME_PWR_DOWN</a>      =  0xAB, 
<a name="l00170"></a><a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92ada7d1d4f9517b71a69b88b9ee322ae43">00170</a>     <a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92ada7d1d4f9517b71a69b88b9ee322ae43" title="Read status register.">DFO_READ_STATUS</a>          =  0xD7, 
<a name="l00171"></a><a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92ae062b0c6a9afba1dc1cfda98d2dd9003">00171</a>     <a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92ae062b0c6a9afba1dc1cfda98d2dd9003" title="Read manufacturer and device ID.">DFO_ID_DEV</a>               =  0x9F  
<a name="l00172"></a>00172     <span class="comment">/* \}*/</span>
<a name="l00173"></a>00173 } <a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92" title="Data flash opcode commands.">DataFlashOpcode</a>;
<a name="l00174"></a>00174 
<a name="l00175"></a>00175 
<a name="l00179"></a><a class="code" href="structDataflashInfo.html">00179</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structDataflashInfo.html" title="Structure used to describe a dataflash memory.">DataflashInfo</a>
<a name="l00180"></a>00180 {
<a name="l00181"></a><a class="code" href="structDataflashInfo.html#ac67e37e0d5ec2c943ae0aa7ccdff1618">00181</a>     uint8_t <a class="code" href="structDataflashInfo.html#ac67e37e0d5ec2c943ae0aa7ccdff1618" title="Density id, used to check memory type.">density_id</a>;       
<a name="l00182"></a><a class="code" href="structDataflashInfo.html#a42966f10c83a958cd9f84b5522c7bef0">00182</a>     <a class="code" href="dataflash_8h.html#a9aa2cd64e8fd8bf19413f1dc61399006" title="Type definitions for dflash memory.">dataflash_size_t</a> <a class="code" href="structDataflashInfo.html#a42966f10c83a958cd9f84b5522c7bef0" title="Page size, in bytes.">page_size</a>;       
<a name="l00183"></a><a class="code" href="structDataflashInfo.html#a1930b3b5d5784b1ed86174ad1227bb19">00183</a>     uint8_t <a class="code" href="structDataflashInfo.html#a1930b3b5d5784b1ed86174ad1227bb19" title="Number of bits needed to access a page.">page_bits</a>;        
<a name="l00184"></a><a class="code" href="structDataflashInfo.html#ae8f6e2c63e78e39cce26c32cecd3c54d">00184</a>     uint16_t <a class="code" href="structDataflashInfo.html#ae8f6e2c63e78e39cce26c32cecd3c54d" title="Number of pages on memory.">page_cnt</a>;        
<a name="l00185"></a><a class="code" href="structDataflashInfo.html#af31ab8568982c8fa605de14d85b79913">00185</a>     <a class="code" href="dataflash_8h.html#a3cee1707173f93c4e2a23dd95bad4a92" title="Data flash opcode commands.">DataFlashOpcode</a> <a class="code" href="structDataflashInfo.html#af31ab8568982c8fa605de14d85b79913" title="Command to be used to perform a continuous array.">read_cmd</a>; 
<a name="l00186"></a>00186 } <a class="code" href="structDataflashInfo.html" title="Structure used to describe a dataflash memory.">DataflashInfo</a>;
<a name="l00187"></a>00187 
<a name="l00188"></a>00188 
<a name="l00189"></a>00189 <span class="keywordtype">bool</span> <a class="code" href="dataflash_8c.html#a524d11c33d73a33947a089d9bfe6bfc7" title="Dataflash init function.">dataflash_init</a>(<a class="code" href="structDataFlash.html" title="Dataflash KFile context structure.">DataFlash</a> *fd, <a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *ch, <a class="code" href="dataflash_8h.html#a734aa6956f6ea34cd612b934e3003675" title="Memory definitions.">DataflashType</a> type, dataflash_setCS_t *setCS, dataflash_setReset_t *setReset);
<a name="l00190"></a>00190 <span class="keywordtype">bool</span> dataflash_diskInit(<span class="keyword">struct</span> <a class="code" href="structBattFsSuper.html" title="Context used to describe a disk.">BattFsSuper</a> *d, <a class="code" href="structDataFlash.html" title="Dataflash KFile context structure.">DataFlash</a> *fd, <a class="code" href="battfs_8h.html#ab696748712d719603833f401031a7907" title="Type for counting pages on disk.">pgcnt_t</a> *page_array);
<a name="l00191"></a>00191 
<a name="l00199"></a>00199 <span class="keywordtype">int</span> <a class="code" href="dataflash_8h.html#a75673105711df5351b73e37c61c6ea6d" title="To test data falsh drive you could use this functions.">dataflash_testSetup</a>(<span class="keywordtype">void</span>);
<a name="l00200"></a>00200 <span class="comment">/* For backward compatibility */</span>
<a name="l00201"></a>00201 <span class="preprocessor">#define dataflash_testSetUp() dataflash_testSetup()</span>
<a name="l00202"></a>00202 <span class="preprocessor"></span><span class="keywordtype">int</span> <a class="code" href="dataflash_8h.html#aefd160bda57d4829ffbb3a4cd630ee6c" title="Run dataflash test memory.">dataflash_testRun</a>(<span class="keywordtype">void</span>);
<a name="l00203"></a>00203 <span class="keywordtype">int</span> <a class="code" href="dataflash_8h.html#a7d1d3b4a05a83bccf06a4a4d1408957b" title="End a dataflash Test.">dataflash_testTearDown</a>(<span class="keywordtype">void</span>);
<a name="l00204"></a>00204 
<a name="l00205"></a>00205 <span class="preprocessor">#endif </span><span class="comment">/* DRV_DATAFLASH_H */</span>
</pre></div></div>
</div>


