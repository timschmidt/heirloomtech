

<!-- Generated by Doxygen 1.7.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_9fd71c1ac00056e7d855336b2291c56c.html">bertos</a>      </li>
      <li class="navelem"><a class="el" href="dir_f7c89dbd63e8f34e572fe939945c15d7.html">drv</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">nand.h File Reference</div>  </div>
</div>
<div class="contents">

<p>ONFI 1.0 compliant NAND kblock driver.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="cfg__nand_8h_source.html">cfg/cfg_nand.h</a>&quot;</code><br/>
<code>#include &lt;<a class="el" href="kblock_8h_source.html">io/kblock.h</a>&gt;</code><br/>
</div>
<p><a href="nand_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structNand.html">Nand</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">NAND context.  <a href="structNand.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Error codes.</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a27acfccad3b617b3d3bfe4f397c38203"></a><!-- doxytag: member="nand.h::NAND_ERR_ERASE" ref="a27acfccad3b617b3d3bfe4f397c38203" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nand_8h.html#a27acfccad3b617b3d3bfe4f397c38203">NAND_ERR_ERASE</a>&#160;&#160;&#160;BV(1)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Error erasing a block. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af717a6b63e64b162a09b618f8048adc6"></a><!-- doxytag: member="nand.h::NAND_ERR_WRITE" ref="af717a6b63e64b162a09b618f8048adc6" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nand_8h.html#af717a6b63e64b162a09b618f8048adc6">NAND_ERR_WRITE</a>&#160;&#160;&#160;BV(2)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Error writing a page. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afcc7b5ef051cc84a0c9b99211606d9b2"></a><!-- doxytag: member="nand.h::NAND_ERR_RD_TMOUT" ref="afcc7b5ef051cc84a0c9b99211606d9b2" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nand_8h.html#afcc7b5ef051cc84a0c9b99211606d9b2">NAND_ERR_RD_TMOUT</a>&#160;&#160;&#160;BV(3)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Read timeout. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af1f185e077d9226ab2026b2601960ca0"></a><!-- doxytag: member="nand.h::NAND_ERR_WR_TMOUT" ref="af1f185e077d9226ab2026b2601960ca0" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nand_8h.html#af1f185e077d9226ab2026b2601960ca0">NAND_ERR_WR_TMOUT</a>&#160;&#160;&#160;BV(4)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write timeout. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a18d84478773892c10fcc27f8187c82a3"></a><!-- doxytag: member="nand.h::NAND_ERR_ECC" ref="a18d84478773892c10fcc27f8187c82a3" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nand_8h.html#a18d84478773892c10fcc27f8187c82a3">NAND_ERR_ECC</a>&#160;&#160;&#160;BV(5)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Unrecoverable ECC error. <br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6d1162afea17dfd7368a16cc4f24dc34"></a><!-- doxytag: member="nand.h::NAND_CAST" ref="a6d1162afea17dfd7368a16cc4f24dc34" args="(KBlock *kb)" -->
<a class="el" href="structNand.html">Nand</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nand_8h.html#a6d1162afea17dfd7368a16cc4f24dc34">NAND_CAST</a> (<a class="el" href="structKBlock.html">KBlock</a> *kb)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert + ASSERT from generic <a class="el" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> to NAND context. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aba7b59d0b1d12f5c51326d05e61e9fa1"></a><!-- doxytag: member="nand.h::nand_init" ref="aba7b59d0b1d12f5c51326d05e61e9fa1" args="(Nand *chip, struct Heap *heap, unsigned chip_select)" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nand_8h.html#aba7b59d0b1d12f5c51326d05e61e9fa1">nand_init</a> (<a class="el" href="structNand.html">Nand</a> *chip, struct <a class="el" href="structHeap.html">Heap</a> *heap, unsigned chip_select)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize NAND kblock driver in buffered mode. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa29c1bd93915eed71f8632d261d6dec3"></a><!-- doxytag: member="nand.h::nand_initUnbuffered" ref="aa29c1bd93915eed71f8632d261d6dec3" args="(Nand *chip, struct Heap *heap, unsigned chip_select)" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nand_8h.html#aa29c1bd93915eed71f8632d261d6dec3">nand_initUnbuffered</a> (<a class="el" href="structNand.html">Nand</a> *chip, struct <a class="el" href="structHeap.html">Heap</a> *heap, unsigned chip_select)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize NAND kblock driver in unbuffered mode. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6f7cc3d0e8a27d2f665cf68d0639f381"></a><!-- doxytag: member="nand.h::nand_getDevId" ref="a6f7cc3d0e8a27d2f665cf68d0639f381" args="(Nand *chip, uint8_t dev_id[5])" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nand_8h.html#a6f7cc3d0e8a27d2f665cf68d0639f381">nand_getDevId</a> (<a class="el" href="structNand.html">Nand</a> *chip, uint8_t dev_id[5])</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Read Device ID and configuration codes. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af2e90befdbbfe75a0cf34e09eb380c37"></a><!-- doxytag: member="nand.h::nand_blockErase" ref="af2e90befdbbfe75a0cf34e09eb380c37" args="(Nand *chip, uint16_t block)" -->
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nand_8h.html#af2e90befdbbfe75a0cf34e09eb380c37">nand_blockErase</a> (<a class="el" href="structNand.html">Nand</a> *chip, uint16_t block)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Erase the whole block. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nand_8h.html#a44423986e2972887a6bc8af431bf3012">nand_format</a> (<a class="el" href="structNand.html">Nand</a> *chip)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset bad blocks map and erase all blocks.  <a href="#a44423986e2972887a6bc8af431bf3012"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>ONFI 1.0 compliant NAND kblock driver. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Stefano Fedrigo &lt;<a href="mailto:aleph@develer.com">aleph@develer.com</a>&gt; </dd></dl>

<p>Definition in file <a class="el" href="nand_8h_source.html">nand.h</a>.</p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="a44423986e2972887a6bc8af431bf3012"></a><!-- doxytag: member="nand.h::nand_format" ref="a44423986e2972887a6bc8af431bf3012" args="(Nand *chip)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nand_format </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structNand.html">Nand</a> *&#160;</td>
          <td class="paramname"><em>chip</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reset bad blocks map and erase all blocks. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>DON'T USE on production chips: this function will try to erase factory marked bad blocks too. </dd></dl>

<p>Definition at line <a class="el" href="nand_8c_source.html#l00511">511</a> of file <a class="el" href="nand_8c_source.html">nand.c</a>.</p>

</div>
</div>
</div>


