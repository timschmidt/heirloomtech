

<!-- Generated by Doxygen 1.7.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_9fd71c1ac00056e7d855336b2291c56c.html">bertos</a>      </li>
      <li class="navelem"><a class="el" href="dir_73fc058393fdbb37a5c2cb9d89ac7c2b.html">gui</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">levelbar.c</div>  </div>
</div>
<div class="contents">
<a href="levelbar_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00011"></a>00011 <span class="preprocessor">#include &quot;<a class="code" href="levelbar_8h.html" title="Copyright 2004, 2006 Develer S.r.l.">levelbar.h</a>&quot;</span>
<a name="l00012"></a>00012 
<a name="l00013"></a>00013 
<a name="l00020"></a><a class="code" href="levelbar_8h.html#a49c64d59048e09ce11838c84d84a30a6">00020</a> <span class="keywordtype">void</span> <a class="code" href="levelbar_8c.html#a49c64d59048e09ce11838c84d84a30a6" title="Initialize the LevelBar widget with the bitmap associated, the value range and the coordinates in the...">lbar_init</a>(<span class="keyword">struct</span> LevelBar *lb, <span class="keyword">struct</span> <a class="code" href="structBitmap.html" title="Control structure to draw in a bitmap.">Bitmap</a> *bmp, <span class="keywordtype">int</span> type, <span class="keywordtype">int</span> min, <span class="keywordtype">int</span> max, <span class="keywordtype">int</span> pos,
<a name="l00021"></a>00021         <a class="code" href="gfx_8h.html#a42746d495d7387857c767974b8c960a3" title="Common type for coordinates expressed in pixel units.">coord_t</a> x1, <a class="code" href="gfx_8h.html#a42746d495d7387857c767974b8c960a3" title="Common type for coordinates expressed in pixel units.">coord_t</a> y1, <a class="code" href="gfx_8h.html#a42746d495d7387857c767974b8c960a3" title="Common type for coordinates expressed in pixel units.">coord_t</a> x2, <a class="code" href="gfx_8h.html#a42746d495d7387857c767974b8c960a3" title="Common type for coordinates expressed in pixel units.">coord_t</a> y2)
<a name="l00022"></a>00022 {
<a name="l00023"></a>00023     lb-&gt;bitmap = bmp;
<a name="l00024"></a>00024     lb-&gt;type = type;
<a name="l00025"></a>00025     lb-&gt;min = min;
<a name="l00026"></a>00026     lb-&gt;max = max;
<a name="l00027"></a>00027     lb-&gt;pos = pos;
<a name="l00028"></a>00028     lb-&gt;x1 = x1;
<a name="l00029"></a>00029     lb-&gt;y1 = y1;
<a name="l00030"></a>00030     lb-&gt;x2 = x2;
<a name="l00031"></a>00031     lb-&gt;y2 = y2;
<a name="l00032"></a>00032 }
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 
<a name="l00038"></a><a class="code" href="levelbar_8h.html#a3f822468c5cfe5ac997bc05039b733c5">00038</a> <span class="keywordtype">void</span> <a class="code" href="levelbar_8c.html#a3f822468c5cfe5ac997bc05039b733c5" title="Set the level.">lbar_setLevel</a>(<span class="keyword">struct</span> LevelBar *lb, <span class="keywordtype">int</span> level)
<a name="l00039"></a>00039 {
<a name="l00040"></a>00040     <span class="keywordflow">if</span> (level &lt; lb-&gt;min)
<a name="l00041"></a>00041         level = lb-&gt;min;
<a name="l00042"></a>00042     <span class="keywordflow">if</span> (level &gt; lb-&gt;max)
<a name="l00043"></a>00043         level = lb-&gt;max;
<a name="l00044"></a>00044 
<a name="l00045"></a>00045     lb-&gt;pos = level;
<a name="l00046"></a>00046 }
<a name="l00047"></a>00047 
<a name="l00048"></a>00048 
<a name="l00052"></a><a class="code" href="levelbar_8h.html#aead2479fba21974a0700b6b1505104fa">00052</a> <span class="keywordtype">int</span> <a class="code" href="levelbar_8c.html#aead2479fba21974a0700b6b1505104fa" title="Get current level.">lbar_getLevel</a>(<span class="keyword">struct</span> LevelBar *lb)
<a name="l00053"></a>00053 {
<a name="l00054"></a>00054     <span class="keywordflow">return</span> lb-&gt;pos;
<a name="l00055"></a>00055 }
<a name="l00056"></a>00056 
<a name="l00057"></a>00057 
<a name="l00062"></a><a class="code" href="levelbar_8h.html#ab08ba9a89a440da97f12643f8551cba1">00062</a> <span class="keywordtype">void</span> <a class="code" href="levelbar_8c.html#ab08ba9a89a440da97f12643f8551cba1" title="Change level with respect to previous value (delta can be negative).">lbar_changeLevel</a>(<span class="keyword">struct</span> LevelBar *lb, <span class="keywordtype">int</span> delta)
<a name="l00063"></a>00063 {
<a name="l00064"></a>00064     <a class="code" href="levelbar_8c.html#a3f822468c5cfe5ac997bc05039b733c5" title="Set the level.">lbar_setLevel</a>(lb, lb-&gt;pos + delta);
<a name="l00065"></a>00065 }
<a name="l00066"></a>00066 
<a name="l00067"></a>00067 
<a name="l00071"></a><a class="code" href="levelbar_8h.html#a11f8c2457bd9cd34bf5c545f65fbfcef">00071</a> <span class="keywordtype">void</span> <a class="code" href="levelbar_8c.html#a11f8c2457bd9cd34bf5c545f65fbfcef" title="Change the top limit.">lbar_setMax</a>(<span class="keyword">struct</span> LevelBar *lb, <span class="keywordtype">int</span> max)
<a name="l00072"></a>00072 {
<a name="l00073"></a>00073     lb-&gt;max = max;
<a name="l00074"></a>00074 }
<a name="l00075"></a>00075 
<a name="l00076"></a>00076 
<a name="l00080"></a><a class="code" href="levelbar_8h.html#a6e5204d0bd941f70cab21e39775b520e">00080</a> <span class="keywordtype">void</span> <a class="code" href="levelbar_8c.html#a6e5204d0bd941f70cab21e39775b520e" title="Render the LevelBar on the bitmap.">lbar_draw</a>(<span class="keyword">struct</span> LevelBar *lb)
<a name="l00081"></a>00081 {
<a name="l00082"></a>00082 <span class="preprocessor">#define BORDERW 1</span>
<a name="l00083"></a>00083 <span class="preprocessor"></span><span class="preprocessor">#define BORDERH 1</span>
<a name="l00084"></a>00084 <span class="preprocessor"></span>
<a name="l00085"></a>00085     <span class="comment">/* Compute filled bar length in pixels */</span>
<a name="l00086"></a>00086     <span class="keywordtype">int</span> totlen = (lb-&gt;type &amp; <a class="code" href="levelbar_8h.html#a4203540c71b47e590e93fada77e81910" title="Type of levelbar.">LBAR_HORIZONTAL</a>) ? lb-&gt;x2 - lb-&gt;x1 - BORDERW*4 : lb-&gt;y2 - lb-&gt;y1 - BORDERH*4;
<a name="l00087"></a>00087     <span class="keywordtype">int</span> range  = lb-&gt;max - lb-&gt;min;
<a name="l00088"></a>00088     <span class="keywordtype">int</span> barlen = ((<span class="keywordtype">long</span>)(lb-&gt;pos - lb-&gt;min) * (<span class="keywordtype">long</span>)totlen + range - 1) / range;
<a name="l00089"></a>00089 
<a name="l00090"></a>00090     <span class="comment">// Draw border</span>
<a name="l00091"></a>00091     <a class="code" href="gfx_8h.html#a463a712ced05d9f1719fdfc85299ce84" title="Draw the perimeter of an hollow rectangle.">gfx_rectDraw</a>(lb-&gt;bitmap, lb-&gt;x1, lb-&gt;y1, lb-&gt;x2, lb-&gt;y2);
<a name="l00092"></a>00092 
<a name="l00093"></a>00093     <span class="comment">// Clear inside</span>
<a name="l00094"></a>00094     <a class="code" href="gfx_8h.html#ab7124b6d3eafe66785656ffdfc2cf55d" title="Clear a rectangular area.">gfx_rectClear</a>(lb-&gt;bitmap, lb-&gt;x1 + BORDERW, lb-&gt;y1 + BORDERH, lb-&gt;x2 - BORDERW, lb-&gt;y2 - BORDERH);
<a name="l00095"></a>00095 
<a name="l00096"></a>00096     <span class="comment">// Draw bar</span>
<a name="l00097"></a>00097     <span class="keywordflow">if</span> (lb-&gt;type &amp; <a class="code" href="levelbar_8h.html#a4203540c71b47e590e93fada77e81910" title="Type of levelbar.">LBAR_HORIZONTAL</a>)
<a name="l00098"></a>00098         <a class="code" href="gfx_8h.html#aded17afe9d8f384808e94a5c6fd6d673" title="Draw a filled rectangle.">gfx_rectFill</a>(lb-&gt;bitmap,
<a name="l00099"></a>00099                 lb-&gt;x1 + BORDERW*2, lb-&gt;y1 + BORDERH*2,
<a name="l00100"></a>00100                 lb-&gt;x1 + BORDERW*2 + barlen, lb-&gt;y2 - BORDERH*2);
<a name="l00101"></a>00101     <span class="keywordflow">else</span>
<a name="l00102"></a>00102         <a class="code" href="gfx_8h.html#aded17afe9d8f384808e94a5c6fd6d673" title="Draw a filled rectangle.">gfx_rectFill</a>(lb-&gt;bitmap,
<a name="l00103"></a>00103                 lb-&gt;x1 + BORDERW*2, lb-&gt;y2 - BORDERH*2 - barlen,
<a name="l00104"></a>00104                 lb-&gt;x2 - BORDERW*2, lb-&gt;y2 - BORDERH*2);
<a name="l00105"></a>00105 }
</pre></div></div>
</div>


