

<!-- Generated by Doxygen 1.7.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_9fd71c1ac00056e7d855336b2291c56c.html">bertos</a>      </li>
      <li class="navelem"><a class="el" href="dir_1f72f5400b18ab325419d091c349a810.html">hw</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">hw_led_7seg.h File Reference</div>  </div>
</div>
<div class="contents">

<p>led 7 segment display low-level  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="cfg__led__7seg_8h_source.html">cfg/cfg_led_7seg.h</a>&quot;</code><br/>
</div>
<p><a href="hw__led__7seg_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hw__led__7seg_8h.html#aa7330e563e67c2bc7215a2493a9bb4f2">sseg_off</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Clean the display.  <a href="#aa7330e563e67c2bc7215a2493a9bb4f2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hw__led__7seg_8h.html#a18e4b25861f3e3341199ea03311fee43">sseg_on</a> (uint8_t dgt, uint8_t n_dgt)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">writes the character to the single digit of the display  <a href="#a18e4b25861f3e3341199ea03311fee43"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hw__led__7seg_8h.html#ae6befefa75584124dc527eb606ce569e">sseg_init</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">initalize the HW regsiters  <a href="#ae6befefa75584124dc527eb606ce569e"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>led 7 segment display low-level </p>
<p>This file has the functions that must be implemented to drive the 7 segments display by your hardware</p>
<dl class="author"><dt><b>Author:</b></dt><dd>Fabio Bizzi &lt;<a href="mailto:fbizzi@bizzi.org">fbizzi@bizzi.org</a>&gt;</dd></dl>
<p>Example implementation for AtMEGA 1280 (Arduino MEGA) with a 4 digit display. We use PORTA to connect the 8 pins of the 7 segments display and 4 bit of PORTC to select which digit of the display we have to write on.</p>
<div class="fragment"><pre class="fragment">  7 Seg LED Pin
  ----------------
  LED SEGMENT
  ----------------
  DP G F E D C B A
  7  6 5 4 3 2 1 0
  ----------------
  PORT A Pin
  ----------------

  7 Seg Display Selection
  ----------------
  Display Nr.
  ----------------
  N N N N 3 2 1 0
  7 6 5 4 3 2 1 0
  ----------------
  PORT C Pin
  ----------------
</pre></div><p>The implementation of the sseg_on procedure that set the PROPER PIN of PORT C to enable the requested digit of the display, after write the encoded character to PORT A</p>
<div class="fragment"><pre class="fragment"> INLINE <span class="keywordtype">void</span> <a class="code" href="hw__led__7seg_8h.html#a18e4b25861f3e3341199ea03311fee43" title="writes the character to the single digit of the display">sseg_on</a>(uint8_t dgt, uint8_t n_dgt)
 {
  <span class="keywordflow">switch</span> (n_dgt)
  {
 <span class="comment">//Common Cathode</span>
<span class="preprocessor"> #ifdef CONFIG_LED_7SEG_CCAT</span>
<span class="preprocessor"></span>
        <span class="keywordflow">case</span> 0:
            PORTC &amp;= ~(<a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC1) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC2) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC3));
            PORTC |= <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC0);
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> 1:
            PORTC &amp;= ~(<a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC0) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC2) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC3));
            PORTC |= <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC1);
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> 2:
            PORTC &amp;= ~(<a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC0) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC1) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC3));
            PORTC |= <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC2);
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> 3:
            PORTC &amp;= ~(<a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC0) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC1) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC2));
            PORTC |= <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC3);
            <span class="keywordflow">break</span>;

 <span class="comment">//Common Anode</span>
<span class="preprocessor"> #else</span>
<span class="preprocessor"></span>
        <span class="keywordflow">case</span> 0:
            PORTC |= (<a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC1) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC2) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC3));
            PORTC &amp;= ~(<a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC0));
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> 1:
            PORTC |= (<a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC0) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC2) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC3));
            PORTC &amp;= ~(<a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC1));
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> 2:
            PORTC |= (<a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC0) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC1) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC3));
            PORTC &amp;= ~(<a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC2));
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> 3:
            PORTC |= (<a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC0) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC1) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC2));
            PORTC &amp;= ~(<a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC3));
            <span class="keywordflow">break</span>;

<span class="preprocessor"> #endif</span>
<span class="preprocessor"></span>
    }
    <span class="comment">//Write the charater</span>
    PORTA = dgt;
 }
</pre></div><p>The implementation of the sseg_init procedure that set the DIRECTION of PORT C and PORT A to output</p>
<div class="fragment"><pre class="fragment"> INLINE <span class="keywordtype">void</span> <a class="code" href="hw__led__7seg_8h.html#ae6befefa75584124dc527eb606ce569e" title="initalize the HW regsiters">sseg_init</a>(<span class="keywordtype">void</span>)
 {
 <span class="comment">//Initialize PIN Direction to OUTPUT</span>
    DDRA = 0xFF;
    DDRC |= (<a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(DDC0) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(DDC1) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(DDC2) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(DDC3));
    <span class="comment">//Set the display OFF</span>
    SSEG_OFF();
 }
</pre></div><p>The implementation of the sseg_off procedure that set the reset PORT A to clean the display and turn off all the pin of PORT C that drive the display's digits</p>
<div class="fragment"><pre class="fragment"> INLINE <span class="keywordtype">void</span> <a class="code" href="hw__led__7seg_8h.html#aa7330e563e67c2bc7215a2493a9bb4f2" title="Clean the display.">sseg_off</a>(<span class="keywordtype">void</span>)
 {
 <span class="comment">//Set the display OFF</span>
 <span class="comment">//Common Cathode</span>
<span class="preprocessor"> #ifdef CONFIG_LED_7SEG_CCAT</span>
<span class="preprocessor"></span>    PORTA = 0x00;
    PORTC &amp;= ~(<a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC0) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC1) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC2) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC3));
 <span class="comment">//Common Anode</span>
<span class="preprocessor"> #else</span>
<span class="preprocessor"></span>    PORTA = 0xFF;
    PORTC |= (<a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC0) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC1) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC2) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(PORTC3));
<span class="preprocessor"> #endif</span>
<span class="preprocessor"></span>
 }
</pre></div> 
<p>Definition in file <a class="el" href="hw__led__7seg_8h_source.html">hw_led_7seg.h</a>.</p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="ae6befefa75584124dc527eb606ce569e"></a><!-- doxytag: member="hw_led_7seg.h::sseg_init" ref="ae6befefa75584124dc527eb606ce569e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sseg_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>initalize the HW regsiters </p>
<p>This is the procedure that initalize the HW regsiters. you have to write it according with your hardware and micro. </p>

<p>Definition at line <a class="el" href="hw__led__7seg_8h_source.html#l00224">224</a> of file <a class="el" href="hw__led__7seg_8h_source.html">hw_led_7seg.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa7330e563e67c2bc7215a2493a9bb4f2"></a><!-- doxytag: member="hw_led_7seg.h::sseg_off" ref="aa7330e563e67c2bc7215a2493a9bb4f2" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sseg_off </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Clean the display. </p>
<p>This is the procedure that clean the display in HW mode. you have to write it according with your hardware and micro. </p>

<p>Definition at line <a class="el" href="hw__led__7seg_8h_source.html#l00184">184</a> of file <a class="el" href="hw__led__7seg_8h_source.html">hw_led_7seg.h</a>.</p>

</div>
</div>
<a class="anchor" id="a18e4b25861f3e3341199ea03311fee43"></a><!-- doxytag: member="hw_led_7seg.h::sseg_on" ref="a18e4b25861f3e3341199ea03311fee43" args="(uint8_t dgt, uint8_t n_dgt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sseg_on </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>dgt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>n_dgt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>writes the character to the single digit of the display </p>
<p>This is the procedure that writes the character to the single digit of the display, you have to write it according with your hardware and micro.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">dgt</td><td>the character that has to be displayed </td></tr>
    <tr><td class="paramname">n_dgt</td><td>the digit where to disply the character of the display's digits. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="hw__led__7seg_8h_source.html#l00205">205</a> of file <a class="el" href="hw__led__7seg_8h_source.html">hw_led_7seg.h</a>.</p>

</div>
</div>
</div>


