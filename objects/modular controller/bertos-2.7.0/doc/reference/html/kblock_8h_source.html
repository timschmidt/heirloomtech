

<!-- Generated by Doxygen 1.7.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_9fd71c1ac00056e7d855336b2291c56c.html">bertos</a>      </li>
      <li class="navelem"><a class="el" href="dir_56ce813cebdd358c761802ba0160643e.html">io</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">kblock.h</div>  </div>
</div>
<div class="contents">
<a href="kblock_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00080"></a>00080 <span class="preprocessor">#ifndef IO_KBLOCK_H</span>
<a name="l00081"></a>00081 <span class="preprocessor"></span><span class="preprocessor">#define IO_KBLOCK_H</span>
<a name="l00082"></a>00082 <span class="preprocessor"></span>
<a name="l00083"></a>00083 <span class="preprocessor">#include &lt;<a class="code" href="compiler_8h.html" title="Additional support macros for compiler independance.">cfg/compiler.h</a>&gt;</span>
<a name="l00084"></a>00084 <span class="preprocessor">#include &lt;<a class="code" href="debug_8h.html">cfg/debug.h</a>&gt;</span>
<a name="l00085"></a>00085 <span class="preprocessor">#include &lt;<a class="code" href="macros_8h.html">cfg/macros.h</a>&gt;</span>
<a name="l00086"></a>00086 
<a name="l00088"></a><a class="code" href="group__io__kblock.html#ga662608dd815d6c4b83ce42c3d153a88b">00088</a> <span class="keyword">typedef</span> uint32_t <a class="code" href="group__io__kblock.html#ga662608dd815d6c4b83ce42c3d153a88b" title="Type for addressing blocks in the device.">block_idx_t</a>;
<a name="l00089"></a>00089 
<a name="l00090"></a>00090 <span class="comment">// Fwd Declaration</span>
<a name="l00091"></a>00091 <span class="keyword">struct </span><a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a>;
<a name="l00092"></a>00092 
<a name="l00102"></a>00102 <span class="keyword">typedef</span> size_t (* kblock_read_direct_t)  (<span class="keyword">struct </span><a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *b, <a class="code" href="group__io__kblock.html#ga662608dd815d6c4b83ce42c3d153a88b" title="Type for addressing blocks in the device.">block_idx_t</a> index, <span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> offset, <span class="keywordtype">size_t</span> size);
<a name="l00103"></a>00103 <span class="keyword">typedef</span> size_t (* kblock_write_direct_t) (<span class="keyword">struct </span><a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *b, <a class="code" href="group__io__kblock.html#ga662608dd815d6c4b83ce42c3d153a88b" title="Type for addressing blocks in the device.">block_idx_t</a> index, <span class="keyword">const</span> <span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> offset, <span class="keywordtype">size_t</span> size);
<a name="l00104"></a>00104 
<a name="l00105"></a>00105 <span class="keyword">typedef</span> size_t (* kblock_read_t)        (<span class="keyword">struct </span><a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *b, <span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> offset, <span class="keywordtype">size_t</span> size);
<a name="l00106"></a>00106 <span class="keyword">typedef</span> size_t (* kblock_write_t)       (<span class="keyword">struct </span><a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *b, <span class="keyword">const</span> <span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> offset, <span class="keywordtype">size_t</span> size);
<a name="l00107"></a>00107 <span class="keyword">typedef</span> int    (* kblock_load_t)        (<span class="keyword">struct </span><a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *b, <a class="code" href="group__io__kblock.html#ga662608dd815d6c4b83ce42c3d153a88b" title="Type for addressing blocks in the device.">block_idx_t</a> index);
<a name="l00108"></a>00108 <span class="keyword">typedef</span> int    (* kblock_store_t)       (<span class="keyword">struct </span><a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *b, <a class="code" href="group__io__kblock.html#ga662608dd815d6c4b83ce42c3d153a88b" title="Type for addressing blocks in the device.">block_idx_t</a> index);
<a name="l00109"></a>00109 
<a name="l00110"></a>00110 <span class="keyword">typedef</span> int    (* kblock_error_t)       (<span class="keyword">struct </span><a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *b);
<a name="l00111"></a>00111 <span class="keyword">typedef</span> void   (* kblock_clearerr_t)    (<span class="keyword">struct </span><a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *b);
<a name="l00112"></a>00112 <span class="keyword">typedef</span> int    (* kblock_close_t)       (<span class="keyword">struct </span><a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *b);
<a name="l00113"></a>00113 <span class="comment">/* \} */</span>
<a name="l00114"></a>00114 
<a name="l00115"></a>00115 <span class="comment">/*</span>
<a name="l00116"></a>00116 <span class="comment"> * Table of interface functions for a KBlock device.</span>
<a name="l00117"></a>00117 <span class="comment"> */</span>
<a name="l00118"></a>00118 <span class="keyword">typedef</span> <span class="keyword">struct </span>KBlockVTable
<a name="l00119"></a>00119 {
<a name="l00120"></a>00120     kblock_read_direct_t readDirect;
<a name="l00121"></a>00121     kblock_write_direct_t writeDirect;
<a name="l00122"></a>00122 
<a name="l00123"></a>00123     kblock_read_t  readBuf;
<a name="l00124"></a>00124     kblock_write_t writeBuf;
<a name="l00125"></a>00125     kblock_load_t  load;
<a name="l00126"></a>00126     kblock_store_t store;
<a name="l00127"></a>00127 
<a name="l00128"></a>00128     kblock_error_t    error;    <span class="comment">// \sa kblock_error()</span>
<a name="l00129"></a>00129     kblock_clearerr_t clearerr; <span class="comment">// \sa kblock_clearerr()</span>
<a name="l00130"></a>00130 
<a name="l00131"></a>00131     kblock_close_t  close; <span class="comment">// \sa kblock_close()</span>
<a name="l00132"></a>00132 } KBlockVTable;
<a name="l00133"></a>00133 
<a name="l00134"></a>00134 
<a name="l00135"></a><a class="code" href="group__io__kblock.html#ga526f985ee7bf6d4190fb2a2eb7b2fa39">00135</a> <span class="preprocessor">#define KB_BUFFERED        BV(0) ///&lt; Internal flag: true if the KBlock has a buffer</span>
<a name="l00136"></a><a class="code" href="group__io__kblock.html#gacf0e0e908d1328f3ddf16de8c5a9ec48">00136</a> <span class="preprocessor"></span><span class="preprocessor">#define KB_CACHE_DIRTY     BV(1) ///&lt; Internal flag: true if the cache is dirty</span>
<a name="l00137"></a><a class="code" href="group__io__kblock.html#gaa8aa2063df75dcbf08edfd284ffded73">00137</a> <span class="preprocessor"></span><span class="preprocessor">#define KB_PARTIAL_WRITE   BV(2) ///&lt; Internal flag: true if the device allows partial block write</span>
<a name="l00138"></a>00138 <span class="preprocessor"></span>
<a name="l00139"></a>00139 
<a name="l00140"></a>00140 <span class="comment">/*</span>
<a name="l00141"></a>00141 <span class="comment"> * KBlock private members.</span>
<a name="l00142"></a>00142 <span class="comment"> * These are the private members of the KBlock interface, please do not</span>
<a name="l00143"></a>00143 <span class="comment"> * access these directly, use the KBlock API.</span>
<a name="l00144"></a>00144 <span class="comment"> */</span>
<a name="l00145"></a>00145 <span class="keyword">typedef</span> <span class="keyword">struct </span>KBlockPriv
<a name="l00146"></a>00146 {
<a name="l00147"></a>00147     <a class="code" href="group__debug.html#ga5ae59b9945c3ef623af1719976ef3a1f" title="This macro can be used to conditionally exclude one or more statements conditioned on _DEBUG...">DB</a>(<a class="code" href="group__macros.html#ga513ee83176411bfc889c87bff2f5b6e4" title="Type for id generated by MAKE_ID().">id_t</a> type);         <span class="comment">// Used to keep track, at runtime, of the class type.</span>
<a name="l00148"></a>00148     <span class="keywordtype">int</span> flags;             <span class="comment">// Status and error flags.</span>
<a name="l00149"></a>00149     <span class="keywordtype">void</span> *buf;             <span class="comment">// Pointer to the page buffer for RAM-cached KBlocks.</span>
<a name="l00150"></a>00150     <a class="code" href="group__io__kblock.html#ga662608dd815d6c4b83ce42c3d153a88b" title="Type for addressing blocks in the device.">block_idx_t</a> blk_start; <span class="comment">// Start block number when the device is trimmed. \sa kblock_trim().</span>
<a name="l00151"></a>00151     <a class="code" href="group__io__kblock.html#ga662608dd815d6c4b83ce42c3d153a88b" title="Type for addressing blocks in the device.">block_idx_t</a> curr_blk;  <span class="comment">// Current cached block number in cached KBlocks.</span>
<a name="l00152"></a>00152 
<a name="l00153"></a>00153     <span class="keyword">const</span> <span class="keyword">struct </span>KBlockVTable *vt; <span class="comment">// Virtual table of interface functions.</span>
<a name="l00154"></a>00154 } KBlockPriv;
<a name="l00155"></a>00155 
<a name="l00160"></a><a class="code" href="structKBlock.html">00160</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a>
<a name="l00161"></a>00161 {
<a name="l00162"></a><a class="code" href="structKBlock.html#a94c0fcb26a194dfd8bbbf4d09eb3626b">00162</a>     KBlockPriv <a class="code" href="structKBlock.html#a94c0fcb26a194dfd8bbbf4d09eb3626b" title="Interface private data, do not use directly.">priv</a>;         
<a name="l00163"></a>00163 
<a name="l00164"></a>00164     <span class="comment">/* Public access members */</span>
<a name="l00165"></a><a class="code" href="structKBlock.html#a4be3b0a7548ff44af20b88e63735f133">00165</a>     <span class="keywordtype">size_t</span> <a class="code" href="structKBlock.html#a4be3b0a7548ff44af20b88e63735f133" title="Block size.">blk_size</a>;         
<a name="l00166"></a><a class="code" href="structKBlock.html#ad413baaa0d82a56b1006fd69acb53fcc">00166</a>     <a class="code" href="group__io__kblock.html#ga662608dd815d6c4b83ce42c3d153a88b" title="Type for addressing blocks in the device.">block_idx_t</a> <a class="code" href="structKBlock.html#ad413baaa0d82a56b1006fd69acb53fcc" title="Number of blocks available in the device.">blk_cnt</a>;     
<a name="l00167"></a>00167 } <a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a>;
<a name="l00168"></a>00168 
<a name="l00169"></a>00169 
<a name="l00200"></a>00200 <span class="keywordtype">int</span> <a class="code" href="group__io__kblock.html#ga0a44548c390609987086cac6a2387b99" title="Use a subset of the blocks on the device.">kblock_trim</a>(<span class="keyword">struct</span> <a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *b, <a class="code" href="group__io__kblock.html#ga662608dd815d6c4b83ce42c3d153a88b" title="Type for addressing blocks in the device.">block_idx_t</a> start, <a class="code" href="group__io__kblock.html#ga662608dd815d6c4b83ce42c3d153a88b" title="Type for addressing blocks in the device.">block_idx_t</a> count);
<a name="l00201"></a>00201 
<a name="l00202"></a>00202 
<a name="l00203"></a>00203 <span class="preprocessor">#define KB_ASSERT_METHOD(b, method) \</span>
<a name="l00204"></a>00204 <span class="preprocessor">    do \</span>
<a name="l00205"></a>00205 <span class="preprocessor">    { \</span>
<a name="l00206"></a>00206 <span class="preprocessor">        ASSERT(b); \</span>
<a name="l00207"></a>00207 <span class="preprocessor">        ASSERT((b)-&gt;priv.vt); \</span>
<a name="l00208"></a>00208 <span class="preprocessor">        ASSERT((b)-&gt;priv.vt-&gt;method); \</span>
<a name="l00209"></a>00209 <span class="preprocessor">    } \</span>
<a name="l00210"></a>00210 <span class="preprocessor">    while (0)</span>
<a name="l00211"></a>00211 <span class="preprocessor"></span>
<a name="l00212"></a>00212 
<a name="l00224"></a><a class="code" href="group__io__kblock.html#gafd524f60f13c7195dec14dd0194444f0">00224</a> INLINE <span class="keywordtype">int</span> <a class="code" href="group__io__kblock.html#gafd524f60f13c7195dec14dd0194444f0" title="Get the current errors for the device.">kblock_error</a>(<span class="keyword">struct</span> <a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *b)
<a name="l00225"></a>00225 {
<a name="l00226"></a>00226     KB_ASSERT_METHOD(b, error);
<a name="l00227"></a>00227     <span class="keywordflow">return</span> b-&gt;<a class="code" href="structKBlock.html#a94c0fcb26a194dfd8bbbf4d09eb3626b" title="Interface private data, do not use directly.">priv</a>.vt-&gt;error(b);
<a name="l00228"></a>00228 }
<a name="l00229"></a>00229 
<a name="l00238"></a><a class="code" href="group__io__kblock.html#ga358abdb8b724d8cc470247c1c4cc9fa4">00238</a> INLINE <span class="keywordtype">void</span> <a class="code" href="group__io__kblock.html#ga358abdb8b724d8cc470247c1c4cc9fa4" title="Clear the errors of the device.">kblock_clearerr</a>(<span class="keyword">struct</span> <a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *b)
<a name="l00239"></a>00239 {
<a name="l00240"></a>00240     KB_ASSERT_METHOD(b, clearerr);
<a name="l00241"></a>00241     b-&gt;<a class="code" href="structKBlock.html#a94c0fcb26a194dfd8bbbf4d09eb3626b" title="Interface private data, do not use directly.">priv</a>.vt-&gt;clearerr(b);
<a name="l00242"></a>00242 }
<a name="l00243"></a>00243 
<a name="l00244"></a>00244 
<a name="l00254"></a>00254 <span class="keywordtype">int</span> <a class="code" href="group__io__kblock.html#ga3c09ba3c8d69e8160284243c104ea6ae" title="Flush the cache (if any) to the device.">kblock_flush</a>(<span class="keyword">struct</span> <a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *b);
<a name="l00255"></a>00255 
<a name="l00263"></a><a class="code" href="group__io__kblock.html#ga011015cdc89b0d465113e1644ec96967">00263</a> INLINE <span class="keywordtype">int</span> <a class="code" href="group__io__kblock.html#ga011015cdc89b0d465113e1644ec96967" title="Close the device.">kblock_close</a>(<span class="keyword">struct</span> <a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *b)
<a name="l00264"></a>00264 {
<a name="l00265"></a>00265     KB_ASSERT_METHOD(b, close);
<a name="l00266"></a>00266     <span class="keywordflow">return</span> <a class="code" href="group__io__kblock.html#ga3c09ba3c8d69e8160284243c104ea6ae" title="Flush the cache (if any) to the device.">kblock_flush</a>(b) | b-&gt;<a class="code" href="structKBlock.html#a94c0fcb26a194dfd8bbbf4d09eb3626b" title="Interface private data, do not use directly.">priv</a>.vt-&gt;close(b);
<a name="l00267"></a>00267 }
<a name="l00268"></a>00268 
<a name="l00274"></a><a class="code" href="group__io__kblock.html#gaa3d27079ce4119ed5549cde2deb98fe8">00274</a> INLINE <span class="keywordtype">bool</span> <a class="code" href="group__io__kblock.html#gaa3d27079ce4119ed5549cde2deb98fe8">kblock_buffered</a>(<span class="keyword">struct</span> <a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *b)
<a name="l00275"></a>00275 {
<a name="l00276"></a>00276     <a class="code" href="group__debug.html#gaca68c0d4ac8df0838e209fb5300f7be3" title="Assert a pre-condition on code.">ASSERT</a>(b);
<a name="l00277"></a>00277     <span class="keywordflow">return</span> (b-&gt;<a class="code" href="structKBlock.html#a94c0fcb26a194dfd8bbbf4d09eb3626b" title="Interface private data, do not use directly.">priv</a>.flags &amp; <a class="code" href="group__io__kblock.html#ga526f985ee7bf6d4190fb2a2eb7b2fa39" title="Internal flag: true if the KBlock has a buffer.">KB_BUFFERED</a>);
<a name="l00278"></a>00278 }
<a name="l00279"></a>00279 
<a name="l00280"></a>00280 
<a name="l00287"></a><a class="code" href="group__io__kblock.html#ga433e2e003e4fb47989dd60dea4baa062">00287</a> INLINE <a class="code" href="group__io__kblock.html#ga662608dd815d6c4b83ce42c3d153a88b" title="Type for addressing blocks in the device.">block_idx_t</a> <a class="code" href="group__io__kblock.html#ga433e2e003e4fb47989dd60dea4baa062">kblock_cachedBlock</a>(<span class="keyword">struct</span> <a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *b)
<a name="l00288"></a>00288 {
<a name="l00289"></a>00289     <a class="code" href="group__debug.html#gaca68c0d4ac8df0838e209fb5300f7be3" title="Assert a pre-condition on code.">ASSERT</a>(<a class="code" href="group__io__kblock.html#gaa3d27079ce4119ed5549cde2deb98fe8">kblock_buffered</a>(b));
<a name="l00290"></a>00290     <span class="keywordflow">return</span> b-&gt;<a class="code" href="structKBlock.html#a94c0fcb26a194dfd8bbbf4d09eb3626b" title="Interface private data, do not use directly.">priv</a>.curr_blk;
<a name="l00291"></a>00291 }
<a name="l00292"></a>00292 
<a name="l00293"></a>00293 
<a name="l00303"></a><a class="code" href="group__io__kblock.html#ga98d097adfab2a37e9d25286a9c55f564">00303</a> INLINE <span class="keywordtype">bool</span> <a class="code" href="group__io__kblock.html#ga98d097adfab2a37e9d25286a9c55f564" title="Return the status of the internal cache.">kblock_cacheDirty</a>(<span class="keyword">struct</span> <a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *b)
<a name="l00304"></a>00304 {
<a name="l00305"></a>00305     <a class="code" href="group__debug.html#gaca68c0d4ac8df0838e209fb5300f7be3" title="Assert a pre-condition on code.">ASSERT</a>(<a class="code" href="group__io__kblock.html#gaa3d27079ce4119ed5549cde2deb98fe8">kblock_buffered</a>(b));
<a name="l00306"></a>00306     <span class="keywordflow">return</span> <a class="code" href="group__io__kblock.html#gaa3d27079ce4119ed5549cde2deb98fe8">kblock_buffered</a>(b) &amp;&amp; (b-&gt;<a class="code" href="structKBlock.html#a94c0fcb26a194dfd8bbbf4d09eb3626b" title="Interface private data, do not use directly.">priv</a>.flags &amp; <a class="code" href="group__io__kblock.html#gacf0e0e908d1328f3ddf16de8c5a9ec48" title="Internal flag: true if the cache is dirty.">KB_CACHE_DIRTY</a>);
<a name="l00307"></a>00307 }
<a name="l00308"></a>00308 
<a name="l00316"></a><a class="code" href="group__io__kblock.html#ga71ae645b5d672d3903b6646bd0955993">00316</a> INLINE <span class="keywordtype">bool</span> <a class="code" href="group__io__kblock.html#ga71ae645b5d672d3903b6646bd0955993">kblock_partialWrite</a>(<span class="keyword">struct</span> <a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *b)
<a name="l00317"></a>00317 {
<a name="l00318"></a>00318     <a class="code" href="group__debug.html#gaca68c0d4ac8df0838e209fb5300f7be3" title="Assert a pre-condition on code.">ASSERT</a>(b);
<a name="l00319"></a>00319     <span class="keywordflow">return</span> (b-&gt;<a class="code" href="structKBlock.html#a94c0fcb26a194dfd8bbbf4d09eb3626b" title="Interface private data, do not use directly.">priv</a>.flags &amp; <a class="code" href="group__io__kblock.html#gaa8aa2063df75dcbf08edfd284ffded73" title="Internal flag: true if the device allows partial block write.">KB_PARTIAL_WRITE</a>);
<a name="l00320"></a>00320 }
<a name="l00321"></a>00321 
<a name="l00345"></a>00345 <span class="keywordtype">size_t</span> <a class="code" href="group__io__kblock.html#ga1f50056687e375253e3d11b11bc060a5" title="Read data from the block device.">kblock_read</a>(<span class="keyword">struct</span> <a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *b, <a class="code" href="group__io__kblock.html#ga662608dd815d6c4b83ce42c3d153a88b" title="Type for addressing blocks in the device.">block_idx_t</a> idx, <span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> offset, <span class="keywordtype">size_t</span> size);
<a name="l00346"></a>00346 
<a name="l00347"></a>00347 
<a name="l00373"></a>00373 <span class="keywordtype">size_t</span> <a class="code" href="group__io__kblock.html#ga069340cc7fe0a6aec2bada078ad9c889" title="Write data to the block device.">kblock_write</a>(<span class="keyword">struct</span> <a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *b, <a class="code" href="group__io__kblock.html#ga662608dd815d6c4b83ce42c3d153a88b" title="Type for addressing blocks in the device.">block_idx_t</a> idx, <span class="keyword">const</span> <span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> offset, <span class="keywordtype">size_t</span> size);
<a name="l00374"></a>00374 
<a name="l00389"></a>00389 <span class="keywordtype">int</span> <a class="code" href="group__io__kblock.html#gaa2d454f0b9a082ded20f385c3cfc99a5" title="Copy one block to another.">kblock_copy</a>(<span class="keyword">struct</span> <a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *b, <a class="code" href="group__io__kblock.html#ga662608dd815d6c4b83ce42c3d153a88b" title="Type for addressing blocks in the device.">block_idx_t</a> src, <a class="code" href="group__io__kblock.html#ga662608dd815d6c4b83ce42c3d153a88b" title="Type for addressing blocks in the device.">block_idx_t</a> dest);
<a name="l00390"></a>00390 
<a name="l00391"></a>00391 <span class="keywordtype">int</span> kblock_swLoad(<span class="keyword">struct</span> <a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *b, <a class="code" href="group__io__kblock.html#ga662608dd815d6c4b83ce42c3d153a88b" title="Type for addressing blocks in the device.">block_idx_t</a> index);
<a name="l00392"></a>00392 <span class="keywordtype">int</span> kblock_swStore(<span class="keyword">struct</span> <a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *b, <a class="code" href="group__io__kblock.html#ga662608dd815d6c4b83ce42c3d153a88b" title="Type for addressing blocks in the device.">block_idx_t</a> index);
<a name="l00393"></a>00393 <span class="keywordtype">size_t</span> kblock_swReadBuf(<span class="keyword">struct</span> <a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *b, <span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> offset, <span class="keywordtype">size_t</span> size);
<a name="l00394"></a>00394 <span class="keywordtype">size_t</span> kblock_swWriteBuf(<span class="keyword">struct</span> <a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *b, <span class="keyword">const</span> <span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> offset, <span class="keywordtype">size_t</span> size);
<a name="l00395"></a>00395 <span class="keywordtype">int</span> kblock_swClose(<span class="keyword">struct</span> <a class="code" href="structKBlock.html" title="KBlock: interface for a generic block device.">KBlock</a> *b);
<a name="l00396"></a>00396  <span class="comment">//defgroup io_kblock</span>
<a name="l00398"></a>00398 
<a name="l00399"></a>00399 
<a name="l00400"></a>00400 <span class="preprocessor">#endif </span><span class="comment">/* IO_KBLOCK_H */</span>
</pre></div></div>
</div>


