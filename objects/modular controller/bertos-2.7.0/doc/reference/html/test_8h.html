

<!-- Generated by Doxygen 1.7.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_9fd71c1ac00056e7d855336b2291c56c.html">bertos</a>      </li>
      <li class="navelem"><a class="el" href="dir_14d9385a2a2e35e16810522966ce41de.html">cfg</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a>  </div>
  <div class="headertitle">
<div class="title">test.h File Reference</div>  </div>
</div>
<div class="contents">

<p>Utility for the test suite.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="cfg__arch_8h_source.html">cfg/cfg_arch.h</a>&quot;</code><br/>
</div>
<p><a href="test_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="test_8h.html#ab52ccd709a8e31a880410d0643c67fa1">SILENT_ASSERT</a>(str)&#160;&#160;&#160;kputs(&quot;SILENT_ASSERT:$&quot;str&quot;$\n&quot;)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Silent an assert in a test.  <a href="#ab52ccd709a8e31a880410d0643c67fa1"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Utility for the test suite. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Daniele Basile &lt;<a href="mailto:asterix@develer.com">asterix@develer.com</a>&gt; </dd>
<dd>
Francesco Sacchi &lt;<a href="mailto:batt@develer.com">batt@develer.com</a>&gt;</dd></dl>
<p>When you want to test a module that is emulable on hosted platforms, these macros come in handy. Your module_test should supply three basic functions:</p>
<div class="fragment"><pre class="fragment"> <span class="keywordtype">int</span> module_testSetup(<span class="keywordtype">void</span>)
 int module_testRun(<span class="keywordtype">void</span>)
 <span class="keywordtype">int</span> module_testTearDown(<span class="keywordtype">void</span>)
</pre></div><p>All of these should return 0 if ok or a value != 0 on errors.</p>
<p>Then, at the end of your module_test you can write: </p>
<div class="fragment"><pre class="fragment"><span class="preprocessor"> #if UNIT_TEST</span>
<span class="preprocessor"></span><span class="preprocessor">    #include &lt;whatuneed.h&gt;</span>
<span class="preprocessor">    #include &lt;whatuneed.c&gt;</span>
<span class="preprocessor">    #include &lt;...&gt;</span>

    TEST_MAIN(module);
<span class="preprocessor"> #endif</span>
</pre></div><p>Including directly into your module the file.c you need to run the test allows you to build and run the test compiling only one file.</p>
<p>To achieve this you also need a main() that is supplied by the TEST_MAIN macro. This will expand to a full main that calls, in sequence: Setup, Run and TearDown of your module. </p>

<p>Definition in file <a class="el" href="test_8h_source.html">test.h</a>.</p>
</div><hr/><h2>Define Documentation</h2>
<a class="anchor" id="ab52ccd709a8e31a880410d0643c67fa1"></a><!-- doxytag: member="test.h::SILENT_ASSERT" ref="ab52ccd709a8e31a880410d0643c67fa1" args="(str)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SILENT_ASSERT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">str</td><td>)</td>
          <td>&#160;&#160;&#160;kputs(&quot;SILENT_ASSERT:$&quot;str&quot;$\n&quot;)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Silent an assert in a test. </p>
<p>This is useful when we run a test and we want to test an error condition. We know that an assert will fail but this is not really an error. To ignore that we mark it with this macro, where str is the message string of the assert that we want to drop. To use this macro copy the assert log message and paste as argument of this macro. In assert message log is reported also the line number of the code that have generated the assert. In this way you can trap only the selected assert message. </p>

<p>Definition at line <a class="el" href="test_8h_source.html#l00115">115</a> of file <a class="el" href="test_8h_source.html">test.h</a>.</p>

</div>
</div>
</div>


