

<!-- Generated by Doxygen 1.7.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_9fd71c1ac00056e7d855336b2291c56c.html">bertos</a>      </li>
      <li class="navelem"><a class="el" href="dir_8751e12fe1becf196f093883e557854f.html">struct</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">list.h</div>  </div>
</div>
<div class="contents">
<a href="list_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00079"></a>00079 <span class="preprocessor">#ifndef STRUCT_LIST_H</span>
<a name="l00080"></a>00080 <span class="preprocessor"></span><span class="preprocessor">#define STRUCT_LIST_H</span>
<a name="l00081"></a>00081 <span class="preprocessor"></span>
<a name="l00082"></a>00082 <span class="preprocessor">#include &lt;<a class="code" href="compiler_8h.html" title="Additional support macros for compiler independance.">cfg/compiler.h</a>&gt;</span> <span class="comment">/* INLINE */</span>
<a name="l00083"></a>00083 <span class="preprocessor">#include &lt;<a class="code" href="debug_8h.html">cfg/debug.h</a>&gt;</span> <span class="comment">/* ASSERT_VALID_PTR() */</span>
<a name="l00084"></a>00084 
<a name="l00091"></a><a class="code" href="structNode.html">00091</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>_Node
<a name="l00092"></a>00092 {
<a name="l00093"></a>00093     <span class="keyword">struct </span>_Node *succ;
<a name="l00094"></a>00094     <span class="keyword">struct </span>_Node *pred;
<a name="l00095"></a>00095 } <a class="code" href="structNode.html" title="This structure represents a node for bidirectional lists.">Node</a>;
<a name="l00096"></a>00096 
<a name="l00106"></a><a class="code" href="structList.html">00106</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>_List
<a name="l00107"></a>00107 {
<a name="l00108"></a>00108     <a class="code" href="structNode.html" title="This structure represents a node for bidirectional lists.">Node</a> head;
<a name="l00109"></a>00109     <a class="code" href="structNode.html" title="This structure represents a node for bidirectional lists.">Node</a> tail;
<a name="l00110"></a>00110 } <a class="code" href="structList.html" title="Head of a doubly-linked list of Node structs.">List</a>;
<a name="l00111"></a>00111 
<a name="l00115"></a><a class="code" href="structPriNode.html">00115</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>_PriNode
<a name="l00116"></a>00116 {
<a name="l00117"></a>00117     <a class="code" href="structNode.html" title="This structure represents a node for bidirectional lists.">Node</a> link;
<a name="l00118"></a>00118     <span class="keywordtype">int</span>  pri;
<a name="l00119"></a>00119 } <a class="code" href="structPriNode.html" title="Extended node for priority queues.">PriNode</a>;
<a name="l00120"></a>00120 
<a name="l00121"></a>00121 
<a name="l00152"></a><a class="code" href="group__list.html#ga457576b88a161e8bf3b752072f08e5f0">00152</a> <span class="preprocessor">#define DECLARE_NODE_ANON(T) \</span>
<a name="l00153"></a>00153 <span class="preprocessor">    T *succ; T *pred;</span>
<a name="l00154"></a>00154 <span class="preprocessor"></span>
<a name="l00156"></a><a class="code" href="group__list.html#ga7232a35644f133020dc7866437101d0c">00156</a> <span class="preprocessor">#define DECLARE_NODE_TYPE(T) \</span>
<a name="l00157"></a>00157 <span class="preprocessor">    typedef struct T##Node { T *succ; T *pred; } T##Node</span>
<a name="l00158"></a>00158 <span class="preprocessor"></span>
<a name="l00160"></a><a class="code" href="group__list.html#gad2f7456281b9005a13f5a06d87941dc3">00160</a> <span class="preprocessor">#define DECLARE_LIST_TYPE(T) \</span>
<a name="l00161"></a>00161 <span class="preprocessor">    DECLARE_NODE_TYPE(T); \</span>
<a name="l00162"></a>00162 <span class="preprocessor">    typedef struct T##List { \</span>
<a name="l00163"></a>00163 <span class="preprocessor">         T##Node head; \</span>
<a name="l00164"></a>00164 <span class="preprocessor">         T##Node tail; \</span>
<a name="l00165"></a>00165 <span class="preprocessor">    } T##List</span>
<a name="l00166"></a>00166 <span class="preprocessor"></span>
<a name="l00167"></a>00167 <span class="preprocessor">#define NODE_TYPE(T) T##Node</span>
<a name="l00168"></a>00168 <span class="preprocessor"></span><span class="preprocessor">#define LIST_TYPE(T) T##List</span>
<a name="l00169"></a>00169 <span class="preprocessor"></span>
<a name="l00175"></a><a class="code" href="group__list.html#ga90b9534a14fbd57ef7e1f2135df31e36">00175</a> <span class="preprocessor">#define LIST_HEAD(l) ((l)-&gt;head.succ)</span>
<a name="l00176"></a>00176 <span class="preprocessor"></span>
<a name="l00182"></a><a class="code" href="group__list.html#ga1636a2445b7b59b39873f7acb9f402ce">00182</a> <span class="preprocessor">#define LIST_TAIL(l) ((l)-&gt;tail.pred)</span>
<a name="l00183"></a>00183 <span class="preprocessor"></span>
<a name="l00184"></a>00184 <span class="comment">// TODO: move in compiler.h</span>
<a name="l00185"></a>00185 <span class="preprocessor">#if COMPILER_TYPEOF</span>
<a name="l00186"></a>00186 <span class="preprocessor"></span><span class="preprocessor">    #define TYPEOF_OR_VOIDPTR(type) typeof(type)</span>
<a name="l00187"></a>00187 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00188"></a>00188 <span class="preprocessor"></span><span class="preprocessor">    #define TYPEOF_OR_VOIDPTR(type) void *</span>
<a name="l00189"></a>00189 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00190"></a>00190 <span class="preprocessor"></span>
<a name="l00198"></a><a class="code" href="group__list.html#ga91a9735c8acba8592b8b6872b1fbf2dd">00198</a> <span class="preprocessor">#define FOREACH_NODE(n, l) \</span>
<a name="l00199"></a>00199 <span class="preprocessor">    for( \</span>
<a name="l00200"></a>00200 <span class="preprocessor">        (n) = (TYPEOF_OR_VOIDPTR(n))LIST_HEAD(l); \</span>
<a name="l00201"></a>00201 <span class="preprocessor">        ((Node *)(n))-&gt;succ; \</span>
<a name="l00202"></a>00202 <span class="preprocessor">        (n) = (TYPEOF_OR_VOIDPTR(n))(((Node *)(n))-&gt;succ) \</span>
<a name="l00203"></a>00203 <span class="preprocessor">    )</span>
<a name="l00204"></a>00204 <span class="preprocessor"></span>
<a name="l00212"></a><a class="code" href="group__list.html#ga7045a3b6d378ff0c4269626c5a22d8e0">00212</a> <span class="preprocessor">#define REVERSE_FOREACH_NODE(n, l) \</span>
<a name="l00213"></a>00213 <span class="preprocessor">    for( \</span>
<a name="l00214"></a>00214 <span class="preprocessor">        (n) = (TYPEOF_OR_VOIDPTR(n))LIST_TAIL(l); \</span>
<a name="l00215"></a>00215 <span class="preprocessor">        ((Node *)(n))-&gt;pred; \</span>
<a name="l00216"></a>00216 <span class="preprocessor">        (n) = (TYPEOF_OR_VOIDPTR(n))(((Node *)(n))-&gt;pred) \</span>
<a name="l00217"></a>00217 <span class="preprocessor">    )</span>
<a name="l00218"></a>00218 <span class="preprocessor"></span>
<a name="l00227"></a><a class="code" href="group__list.html#gaf9dad35fa40c96453b1ed2df0adb18eb">00227</a> <span class="preprocessor">#define FOREACH_NODE_SAFE(n, p, l) \</span>
<a name="l00228"></a>00228 <span class="preprocessor">    for( \</span>
<a name="l00229"></a>00229 <span class="preprocessor">        (n) = (TYPEOF_OR_VOIDPTR(n))LIST_HEAD(l), (p) = ((Node *)(n))-&gt;succ; \</span>
<a name="l00230"></a>00230 <span class="preprocessor">        ((Node *)(n))-&gt;succ; \</span>
<a name="l00231"></a>00231 <span class="preprocessor">        (n) = (p), (p) = (TYPEOF_OR_VOIDPTR(n))(((Node *)(n))-&gt;succ) \</span>
<a name="l00232"></a>00232 <span class="preprocessor">    )</span>
<a name="l00233"></a>00233 <span class="preprocessor"></span>
<a name="l00235"></a><a class="code" href="group__list.html#ga005c60e8bdd32530e0ccd2374ba3289b">00235</a> <span class="preprocessor">#define LIST_INIT(l) \</span>
<a name="l00236"></a>00236 <span class="preprocessor">    do { \</span>
<a name="l00237"></a>00237 <span class="preprocessor">        (l)-&gt;head.succ = (TYPEOF_OR_VOIDPTR((l)-&gt;head.succ)) &amp;(l)-&gt;tail; \</span>
<a name="l00238"></a>00238 <span class="preprocessor">        (l)-&gt;head.pred = NULL; \</span>
<a name="l00239"></a>00239 <span class="preprocessor">        (l)-&gt;tail.succ = NULL; \</span>
<a name="l00240"></a>00240 <span class="preprocessor">        (l)-&gt;tail.pred = (TYPEOF_OR_VOIDPTR((l)-&gt;tail.pred)) &amp;(l)-&gt;head; \</span>
<a name="l00241"></a>00241 <span class="preprocessor">    } while (0)</span>
<a name="l00242"></a>00242 <span class="preprocessor"></span>
<a name="l00243"></a>00243 <span class="preprocessor">#ifdef _DEBUG</span>
<a name="l00244"></a>00244 <span class="preprocessor"></span>
<a name="l00245"></a><a class="code" href="group__list.html#gabe702a1410b6db9be3128d538bc458e7">00245</a> <span class="preprocessor">    #define LIST_ASSERT_VALID(l) \</span>
<a name="l00246"></a>00246 <span class="preprocessor">        do { \</span>
<a name="l00247"></a>00247 <span class="preprocessor">            Node *n, *pred; \</span>
<a name="l00248"></a>00248 <span class="preprocessor">            ASSERT((l)-&gt;head.succ != NULL); \</span>
<a name="l00249"></a>00249 <span class="preprocessor">            ASSERT((l)-&gt;head.pred == NULL); \</span>
<a name="l00250"></a>00250 <span class="preprocessor">            ASSERT((l)-&gt;tail.succ == NULL); \</span>
<a name="l00251"></a>00251 <span class="preprocessor">            ASSERT((l)-&gt;tail.pred != NULL); \</span>
<a name="l00252"></a>00252 <span class="preprocessor">            pred = &amp;(l)-&gt;head; \</span>
<a name="l00253"></a>00253 <span class="preprocessor">            FOREACH_NODE(n, l) \</span>
<a name="l00254"></a>00254 <span class="preprocessor">            { \</span>
<a name="l00255"></a>00255 <span class="preprocessor">                ASSERT(n-&gt;pred == pred); \</span>
<a name="l00256"></a>00256 <span class="preprocessor">                pred = n; \</span>
<a name="l00257"></a>00257 <span class="preprocessor">            } \</span>
<a name="l00258"></a>00258 <span class="preprocessor">            ASSERT(n == &amp;(l)-&gt;tail); \</span>
<a name="l00259"></a>00259 <span class="preprocessor">        } while (0)</span>
<a name="l00260"></a>00260 <span class="preprocessor"></span>
<a name="l00262"></a><a class="code" href="group__list.html#ga27bdfeae068a25b8193bb7fb9296e3a8">00262</a> <span class="preprocessor">    #define LIST_ASSERT_NOT_CONTAINS(list,node) \</span>
<a name="l00263"></a>00263 <span class="preprocessor">        do { \</span>
<a name="l00264"></a>00264 <span class="preprocessor">            Node *ln; \</span>
<a name="l00265"></a>00265 <span class="preprocessor">            ASSERT_VALID_PTR(list); \</span>
<a name="l00266"></a>00266 <span class="preprocessor">            ASSERT_VALID_PTR(node); \</span>
<a name="l00267"></a>00267 <span class="preprocessor">            FOREACH_NODE(ln, list) \</span>
<a name="l00268"></a>00268 <span class="preprocessor">                ASSERT(ln != (Node *)(node)); \</span>
<a name="l00269"></a>00269 <span class="preprocessor">        } while (0)</span>
<a name="l00270"></a>00270 <span class="preprocessor"></span>
<a name="l00271"></a>00271 <span class="preprocessor">    #define INVALIDATE_NODE(n) ((n)-&gt;succ = (n)-&gt;pred = NULL)</span>
<a name="l00272"></a>00272 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00273"></a>00273 <span class="preprocessor"></span><span class="preprocessor">    #define LIST_ASSERT_VALID(l) do {} while (0)</span>
<a name="l00274"></a>00274 <span class="preprocessor"></span><span class="preprocessor">    #define LIST_ASSERT_NOT_CONTAINS(list,node) do {} while (0)</span>
<a name="l00275"></a>00275 <span class="preprocessor"></span><span class="preprocessor">    #define INVALIDATE_NODE(n) do {} while (0)</span>
<a name="l00276"></a>00276 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00277"></a>00277 <span class="preprocessor"></span>
<a name="l00279"></a><a class="code" href="group__list.html#ga3930d96e717edf8f2cda41eda774cf16">00279</a> <span class="preprocessor">#define LIST_EMPTY(l)  ( (void *)((l)-&gt;head.succ) == (void *)(&amp;(l)-&gt;tail) )</span>
<a name="l00280"></a>00280 <span class="preprocessor"></span>
<a name="l00282"></a><a class="code" href="group__list.html#ga66a42b084e8291d28a5e39edb2346d5c">00282</a> <span class="preprocessor">#define ADDHEAD(l,n) \</span>
<a name="l00283"></a>00283 <span class="preprocessor">    do { \</span>
<a name="l00284"></a>00284 <span class="preprocessor">        LIST_ASSERT_NOT_CONTAINS((l),(n)); \</span>
<a name="l00285"></a>00285 <span class="preprocessor">        (n)-&gt;succ = (l)-&gt;head.succ; \</span>
<a name="l00286"></a>00286 <span class="preprocessor">        (n)-&gt;pred = (l)-&gt;head.succ-&gt;pred; \</span>
<a name="l00287"></a>00287 <span class="preprocessor">        (n)-&gt;succ-&gt;pred = (n); \</span>
<a name="l00288"></a>00288 <span class="preprocessor">        (n)-&gt;pred-&gt;succ = (n); \</span>
<a name="l00289"></a>00289 <span class="preprocessor">    } while (0)</span>
<a name="l00290"></a>00290 <span class="preprocessor"></span>
<a name="l00292"></a><a class="code" href="group__list.html#ga0ba6587a8f112952627f8bba78fd8611">00292</a> <span class="preprocessor">#define ADDTAIL(l,n) \</span>
<a name="l00293"></a>00293 <span class="preprocessor">    do { \</span>
<a name="l00294"></a>00294 <span class="preprocessor">        LIST_ASSERT_NOT_CONTAINS((l),(n)); \</span>
<a name="l00295"></a>00295 <span class="preprocessor">        (n)-&gt;succ = &amp;(l)-&gt;tail; \</span>
<a name="l00296"></a>00296 <span class="preprocessor">        (n)-&gt;pred = (l)-&gt;tail.pred; \</span>
<a name="l00297"></a>00297 <span class="preprocessor">        (n)-&gt;pred-&gt;succ = (n); \</span>
<a name="l00298"></a>00298 <span class="preprocessor">        (l)-&gt;tail.pred = (n); \</span>
<a name="l00299"></a>00299 <span class="preprocessor">    } while (0)</span>
<a name="l00300"></a>00300 <span class="preprocessor"></span>
<a name="l00307"></a><a class="code" href="group__list.html#ga20a8012133533f871557feca959e7516">00307</a> <span class="preprocessor">#define INSERT_BEFORE(n,ln) \</span>
<a name="l00308"></a>00308 <span class="preprocessor">    do { \</span>
<a name="l00309"></a>00309 <span class="preprocessor">        ASSERT_VALID_PTR(n); \</span>
<a name="l00310"></a>00310 <span class="preprocessor">        ASSERT_VALID_PTR(ln); \</span>
<a name="l00311"></a>00311 <span class="preprocessor">        (n)-&gt;succ = (ln); \</span>
<a name="l00312"></a>00312 <span class="preprocessor">        (n)-&gt;pred = (ln)-&gt;pred; \</span>
<a name="l00313"></a>00313 <span class="preprocessor">        (ln)-&gt;pred-&gt;succ = (n); \</span>
<a name="l00314"></a>00314 <span class="preprocessor">        (ln)-&gt;pred = (n); \</span>
<a name="l00315"></a>00315 <span class="preprocessor">    } while (0)</span>
<a name="l00316"></a>00316 <span class="preprocessor"></span>
<a name="l00323"></a><a class="code" href="group__list.html#ga849a0f1c77918e5845588373178ee4ca">00323</a> <span class="preprocessor">#define REMOVE(n) \</span>
<a name="l00324"></a>00324 <span class="preprocessor">    do { \</span>
<a name="l00325"></a>00325 <span class="preprocessor">        ASSERT_VALID_PTR(n); \</span>
<a name="l00326"></a>00326 <span class="preprocessor">        (n)-&gt;pred-&gt;succ = (n)-&gt;succ; \</span>
<a name="l00327"></a>00327 <span class="preprocessor">        (n)-&gt;succ-&gt;pred = (n)-&gt;pred; \</span>
<a name="l00328"></a>00328 <span class="preprocessor">        INVALIDATE_NODE(n); \</span>
<a name="l00329"></a>00329 <span class="preprocessor">    } while (0)</span>
<a name="l00330"></a>00330 <span class="preprocessor"></span>
<a name="l00337"></a><a class="code" href="group__list.html#ga092cd6c5d0ed5bbea1f3d885747b62e8">00337</a> <span class="preprocessor">#define LIST_ENQUEUE_HEAD(list, node) \</span>
<a name="l00338"></a>00338 <span class="preprocessor">    do { \</span>
<a name="l00339"></a>00339 <span class="preprocessor">        PriNode *ln; \</span>
<a name="l00340"></a>00340 <span class="preprocessor">        LIST_ASSERT_NOT_CONTAINS((list),(node)); \</span>
<a name="l00341"></a>00341 <span class="preprocessor">        FOREACH_NODE(ln, (list)) \</span>
<a name="l00342"></a>00342 <span class="preprocessor">            if (ln-&gt;pri &lt;= (node)-&gt;pri) \</span>
<a name="l00343"></a>00343 <span class="preprocessor">                break; \</span>
<a name="l00344"></a>00344 <span class="preprocessor">        INSERT_BEFORE(&amp;(node)-&gt;link, &amp;ln-&gt;link); \</span>
<a name="l00345"></a>00345 <span class="preprocessor">    } while (0)</span>
<a name="l00346"></a>00346 <span class="preprocessor"></span>
<a name="l00353"></a><a class="code" href="group__list.html#gafce5b0341c2b60e46398240b0eebd467">00353</a> <span class="preprocessor">#define LIST_ENQUEUE(list, node) \</span>
<a name="l00354"></a>00354 <span class="preprocessor">    do { \</span>
<a name="l00355"></a>00355 <span class="preprocessor">        PriNode *ln; \</span>
<a name="l00356"></a>00356 <span class="preprocessor">        LIST_ASSERT_NOT_CONTAINS((list),(node)); \</span>
<a name="l00357"></a>00357 <span class="preprocessor">        FOREACH_NODE(ln, (list)) \</span>
<a name="l00358"></a>00358 <span class="preprocessor">            if (ln-&gt;pri &lt; (node)-&gt;pri) \</span>
<a name="l00359"></a>00359 <span class="preprocessor">                break; \</span>
<a name="l00360"></a>00360 <span class="preprocessor">        INSERT_BEFORE(&amp;(node)-&gt;link, &amp;ln-&gt;link); \</span>
<a name="l00361"></a>00361 <span class="preprocessor">    } while (0)</span>
<a name="l00362"></a>00362 <span class="preprocessor"></span>
<a name="l00363"></a>00363 
<a name="l00369"></a><a class="code" href="group__list.html#ga711eeee335e5022e1d50b7a5085cb611">00369</a> INLINE <a class="code" href="structNode.html" title="This structure represents a node for bidirectional lists.">Node</a> *<a class="code" href="group__list.html#ga711eeee335e5022e1d50b7a5085cb611" title="Unlink a node from the head of the list l.">list_remHead</a>(<a class="code" href="structList.html" title="Head of a doubly-linked list of Node structs.">List</a> *l)
<a name="l00370"></a>00370 {
<a name="l00371"></a>00371     <a class="code" href="structNode.html" title="This structure represents a node for bidirectional lists.">Node</a> *n;
<a name="l00372"></a>00372 
<a name="l00373"></a>00373     <a class="code" href="group__debug.html#gaa362f3d4474997c5a98fcb2193dd3809" title="Check that the given pointer is either NULL or pointing to valid memory.">ASSERT_VALID_PTR</a>(l);
<a name="l00374"></a>00374 
<a name="l00375"></a>00375     <span class="keywordflow">if</span> (<a class="code" href="group__list.html#ga3930d96e717edf8f2cda41eda774cf16" title="Tell whether a list is empty.">LIST_EMPTY</a>(l))
<a name="l00376"></a>00376         <span class="keywordflow">return</span> (<a class="code" href="structNode.html" title="This structure represents a node for bidirectional lists.">Node</a> *)0;
<a name="l00377"></a>00377 
<a name="l00378"></a>00378     n = l-&gt;head.succ; <span class="comment">/* Get first node. */</span>
<a name="l00379"></a>00379     l-&gt;head.succ = n-&gt;succ; <span class="comment">/* Link list head to second node. */</span>
<a name="l00380"></a>00380     n-&gt;succ-&gt;pred = &amp;l-&gt;head; <span class="comment">/* Link second node to list head. */</span>
<a name="l00381"></a>00381 
<a name="l00382"></a>00382     INVALIDATE_NODE(n);
<a name="l00383"></a>00383     <span class="keywordflow">return</span> n;
<a name="l00384"></a>00384 }
<a name="l00385"></a>00385 
<a name="l00391"></a><a class="code" href="group__list.html#ga14be6c71a00bf070696abe4ce5018436">00391</a> INLINE <a class="code" href="structNode.html" title="This structure represents a node for bidirectional lists.">Node</a> *<a class="code" href="group__list.html#ga14be6c71a00bf070696abe4ce5018436" title="Unlink a node from the tail of the list l.">list_remTail</a>(<a class="code" href="structList.html" title="Head of a doubly-linked list of Node structs.">List</a> *l)
<a name="l00392"></a>00392 {
<a name="l00393"></a>00393     <a class="code" href="structNode.html" title="This structure represents a node for bidirectional lists.">Node</a> *n;
<a name="l00394"></a>00394 
<a name="l00395"></a>00395     <a class="code" href="group__debug.html#gaa362f3d4474997c5a98fcb2193dd3809" title="Check that the given pointer is either NULL or pointing to valid memory.">ASSERT_VALID_PTR</a>(l);
<a name="l00396"></a>00396 
<a name="l00397"></a>00397     <span class="keywordflow">if</span> (<a class="code" href="group__list.html#ga3930d96e717edf8f2cda41eda774cf16" title="Tell whether a list is empty.">LIST_EMPTY</a>(l))
<a name="l00398"></a>00398         <span class="keywordflow">return</span> NULL;
<a name="l00399"></a>00399 
<a name="l00400"></a>00400     n = l-&gt;tail.pred; <span class="comment">/* Get last node. */</span>
<a name="l00401"></a>00401     l-&gt;tail.pred = n-&gt;pred; <span class="comment">/* Link list tail to second last node. */</span>
<a name="l00402"></a>00402     n-&gt;pred-&gt;succ = &amp;l-&gt;tail; <span class="comment">/* Link second last node to list tail. */</span>
<a name="l00403"></a>00403 
<a name="l00404"></a>00404     INVALIDATE_NODE(n);
<a name="l00405"></a>00405     <span class="keywordflow">return</span> n;
<a name="l00406"></a>00406 }
<a name="l00407"></a>00407  <span class="comment">//defgroup list</span>
<a name="l00409"></a>00409 
<a name="l00410"></a>00410 <span class="preprocessor">#endif </span><span class="comment">/* STRUCT_LIST_H */</span>
</pre></div></div>
</div>


