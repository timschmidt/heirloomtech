

<!-- Generated by Doxygen 1.7.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_9fd71c1ac00056e7d855336b2291c56c.html">bertos</a>      </li>
      <li class="navelem"><a class="el" href="dir_a5de7543e32a5f073daa04f8834eb5fd.html">cpu</a>      </li>
      <li class="navelem"><a class="el" href="dir_3ade2df878d06c00b7da75ebdc1e74f5.html">arm</a>      </li>
      <li class="navelem"><a class="el" href="dir_88b011769bd68bcbdcfc8a5f3d937253.html">drv</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">adc_at91.h File Reference</div>  </div>
</div>
<div class="contents">

<p>ADC hardware-specific definition.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="hw__cpufreq_8h_source.html">hw/hw_cpufreq.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="cfg__adc_8h_source.html">cfg/cfg_adc.h</a>&quot;</code><br/>
<code>#include &lt;<a class="el" href="compiler_8h_source.html">cfg/compiler.h</a>&gt;</code><br/>
</div>
<p><a href="adc__at91_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a19cb660c60b592d755958a1d0456f90f"></a><!-- doxytag: member="adc_at91.h::ADC_MUX_MAXCH" ref="a19cb660c60b592d755958a1d0456f90f" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="adc__at91_8h.html#a19cb660c60b592d755958a1d0456f90f">ADC_MUX_MAXCH</a>&#160;&#160;&#160;8</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">ADC config define. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac48ab49a57cb7706a95bbf8bc35b4ae7"></a><!-- doxytag: member="adc_at91.h::ADC_COMPUTED_PRESCALER" ref="ac48ab49a57cb7706a95bbf8bc35b4ae7" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="adc__at91_8h.html#ac48ab49a57cb7706a95bbf8bc35b4ae7">ADC_COMPUTED_PRESCALER</a>&#160;&#160;&#160;(DIV_ROUNDUP(CPU_FREQ, 2 * CONFIG_ADC_CLOCK) - 1)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Macro for computing correct value to write into ADC register. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="adc__at91_8h.html#a93a300125d201ae211067910d589c06a">ADC_INIT_PINS</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Init pins macro for adc.  <a href="#a93a300125d201ae211067910d589c06a"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="adc__at91_8h.html#a2654afcc53d07a0fe8677c5c64c94d60">adc_hw_select_ch</a> (uint8_t ch)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Select mux channel <em>ch</em>.  <a href="#a2654afcc53d07a0fe8677c5c64c94d60"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="adc__at91_8h.html#af53cb85a56dda4aa7f95fc90e4d82069">adc_hw_read</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Start an ADC convertion.  <a href="#af53cb85a56dda4aa7f95fc90e4d82069"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af9c4563e46566bd0b8352ff64f792318"></a><!-- doxytag: member="adc_at91.h::adc_hw_init" ref="af9c4563e46566bd0b8352ff64f792318" args="(void)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="adc__at91_8h.html#af9c4563e46566bd0b8352ff64f792318">adc_hw_init</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Init ADC hardware. <br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>ADC hardware-specific definition. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Daniele Basile &lt;<a href="mailto:asterix@develer.com">asterix@develer.com</a>&gt; </dd></dl>

<p>Definition in file <a class="el" href="adc__at91_8h_source.html">adc_at91.h</a>.</p>
</div><hr/><h2>Define Documentation</h2>
<a class="anchor" id="a93a300125d201ae211067910d589c06a"></a><!-- doxytag: member="adc_at91.h::ADC_INIT_PINS" ref="a93a300125d201ae211067910d589c06a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADC_INIT_PINS</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> { \
    } <span class="keywordflow">while</span> (0)
</pre></div>
<p>Init pins macro for adc. </p>
<p>Define PIO controller for enable ADC function. Init the ADC pins. Implement it if necessary. </p>

<p>Definition at line <a class="el" href="adc__at91_8h_source.html#l00087">87</a> of file <a class="el" href="adc__at91_8h_source.html">adc_at91.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="af53cb85a56dda4aa7f95fc90e4d82069"></a><!-- doxytag: member="adc_at91.h::adc_hw_read" ref="af53cb85a56dda4aa7f95fc90e4d82069" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t adc_hw_read </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Start an ADC convertion. </p>
<p>If a kernel is present, preempt until convertion is complete, otherwise a busy wait on ADC_DRDY bit is done.</p>
<p>If a kernel is present, preempt until convertion is complete, otherwise a busy wait on ADCS bit is done. </p>

<p>Definition at line <a class="el" href="adc__at91_8c_source.html#l00130">130</a> of file <a class="el" href="adc__at91_8c_source.html">adc_at91.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2654afcc53d07a0fe8677c5c64c94d60"></a><!-- doxytag: member="adc_at91.h::adc_hw_select_ch" ref="a2654afcc53d07a0fe8677c5c64c94d60" args="(uint8_t ch)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adc_hw_select_ch </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Select mux channel <em>ch</em>. </p>
<p>Generally the stm32 cpu family allow us to program the order of adc channel that we want to read. In this driver implementation we put as fist channel to read the select ones. </p>

<p>Definition at line <a class="el" href="adc__at91_8c_source.html#l00116">116</a> of file <a class="el" href="adc__at91_8c_source.html">adc_at91.c</a>.</p>

</div>
</div>
</div>


