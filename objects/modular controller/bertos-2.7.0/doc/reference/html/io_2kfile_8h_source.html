

<!-- Generated by Doxygen 1.7.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_9fd71c1ac00056e7d855336b2291c56c.html">bertos</a>      </li>
      <li class="navelem"><a class="el" href="dir_56ce813cebdd358c761802ba0160643e.html">io</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">io/kfile.h</div>  </div>
</div>
<div class="contents">
<a href="io_2kfile_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00104"></a>00104 <span class="preprocessor">#ifndef KERN_KFILE_H</span>
<a name="l00105"></a>00105 <span class="preprocessor"></span><span class="preprocessor">#define KERN_KFILE_H</span>
<a name="l00106"></a>00106 <span class="preprocessor"></span>
<a name="l00107"></a>00107 <span class="preprocessor">#include &lt;<a class="code" href="compiler_8h.html" title="Additional support macros for compiler independance.">cfg/compiler.h</a>&gt;</span>
<a name="l00108"></a>00108 <span class="preprocessor">#include &lt;<a class="code" href="debug_8h.html">cfg/debug.h</a>&gt;</span>
<a name="l00109"></a>00109 <span class="preprocessor">#include &lt;<a class="code" href="macros_8h.html">cfg/macros.h</a>&gt;</span>
<a name="l00110"></a>00110 
<a name="l00111"></a>00111 <span class="comment">/* fwd decl */</span>
<a name="l00112"></a><a class="code" href="group__io__kfile.html#ga5137f80da20dbbbb731a84c9671612cd">00112</a> <span class="keyword">struct </span><a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a>;
<a name="l00113"></a>00113 
<a name="l00114"></a>00114 <span class="keyword">typedef</span> int32_t <a class="code" href="group__io__kfile.html#ga5137f80da20dbbbb731a84c9671612cd" title="KFile offset type, used by kfile_seek().">kfile_off_t</a>;     
<a name="l00115"></a>00115 
<a name="l00121"></a><a class="code" href="group__io__kfile.html#ga8f7714669a9397929a467e1d0d458e00">00121</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="group__io__kfile.html#ga8f7714669a9397929a467e1d0d458e00" title="Costants for repositioning read/write file offset.">KSeekMode</a>
<a name="l00122"></a>00122 {
<a name="l00123"></a><a class="code" href="group__io__kfile.html#gga8f7714669a9397929a467e1d0d458e00aad38c62dd35ece8c8aa9c609f4f59b2e">00123</a>     <a class="code" href="group__io__kfile.html#gga8f7714669a9397929a467e1d0d458e00aad38c62dd35ece8c8aa9c609f4f59b2e" title="Seek from file beginning.">KSM_SEEK_SET</a>, 
<a name="l00124"></a><a class="code" href="group__io__kfile.html#gga8f7714669a9397929a467e1d0d458e00a3740314166f470d8abef3b9cbe8c3ce7">00124</a>     <a class="code" href="group__io__kfile.html#gga8f7714669a9397929a467e1d0d458e00a3740314166f470d8abef3b9cbe8c3ce7" title="Seek from file current position.">KSM_SEEK_CUR</a>, 
<a name="l00125"></a><a class="code" href="group__io__kfile.html#gga8f7714669a9397929a467e1d0d458e00aa091a159fb371f5e63f0fa8087904e1a">00125</a>     <a class="code" href="group__io__kfile.html#gga8f7714669a9397929a467e1d0d458e00aa091a159fb371f5e63f0fa8087904e1a" title="Seek from file end.">KSM_SEEK_END</a>, 
<a name="l00126"></a>00126 } <a class="code" href="group__io__kfile.html#ga8f7714669a9397929a467e1d0d458e00" title="Costants for repositioning read/write file offset.">KSeekMode</a>;
<a name="l00127"></a>00127 
<a name="l00128"></a>00128 <span class="comment">/*</span>
<a name="l00129"></a>00129 <span class="comment"> * Prototypes for KFile access functions.</span>
<a name="l00130"></a>00130 <span class="comment"> * I/O file functions must be ANSI compliant.</span>
<a name="l00131"></a>00131 <span class="comment"> * \note A KFile user can choose which function subset to implement,</span>
<a name="l00132"></a>00132 <span class="comment"> *       but has to set to NULL unimplemented features.</span>
<a name="l00133"></a>00133 <span class="comment"> */</span>
<a name="l00134"></a>00134 
<a name="l00135"></a>00135 <span class="comment">/*</span>
<a name="l00136"></a>00136 <span class="comment"> * Read from file.</span>
<a name="l00137"></a>00137 <span class="comment"> * \return the number of bytes read.</span>
<a name="l00138"></a>00138 <span class="comment"> */</span>
<a name="l00139"></a>00139 <span class="keyword">typedef</span> size_t (*ReadFunc_t) (<span class="keyword">struct </span><a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd, <span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> size);
<a name="l00140"></a>00140 
<a name="l00141"></a>00141 <span class="comment">/*</span>
<a name="l00142"></a>00142 <span class="comment"> * Write to file.</span>
<a name="l00143"></a>00143 <span class="comment"> * \return the number of bytes written.</span>
<a name="l00144"></a>00144 <span class="comment"> */</span>
<a name="l00145"></a>00145 <span class="keyword">typedef</span> size_t (*WriteFunc_t) (<span class="keyword">struct </span><a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd, <span class="keyword">const</span> <span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> size);
<a name="l00146"></a>00146 
<a name="l00147"></a>00147 <span class="comment">/*</span>
<a name="l00148"></a>00148 <span class="comment"> * Seek into file (if seekable).</span>
<a name="l00149"></a>00149 <span class="comment"> * \return the new file offset or EOF on errors.</span>
<a name="l00150"></a>00150 <span class="comment"> */</span>
<a name="l00151"></a>00151 <span class="keyword">typedef</span> <a class="code" href="group__io__kfile.html#ga5137f80da20dbbbb731a84c9671612cd" title="KFile offset type, used by kfile_seek().">kfile_off_t</a> (*SeekFunc_t) (<span class="keyword">struct </span><a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd, <a class="code" href="group__io__kfile.html#ga5137f80da20dbbbb731a84c9671612cd" title="KFile offset type, used by kfile_seek().">kfile_off_t</a> offset, <a class="code" href="group__io__kfile.html#ga8f7714669a9397929a467e1d0d458e00" title="Costants for repositioning read/write file offset.">KSeekMode</a> whence);
<a name="l00152"></a>00152 
<a name="l00153"></a>00153 <span class="comment">/*</span>
<a name="l00154"></a>00154 <span class="comment"> * Close and reopen file \a fd.</span>
<a name="l00155"></a>00155 <span class="comment"> * The reopening is done with the former file parameters and access modes.</span>
<a name="l00156"></a>00156 <span class="comment"> */</span>
<a name="l00157"></a>00157 <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> * (*ReOpenFunc_t) (<span class="keyword">struct </span><a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd);
<a name="l00158"></a>00158 
<a name="l00159"></a>00159 <span class="comment">/*</span>
<a name="l00160"></a>00160 <span class="comment"> * Close file.</span>
<a name="l00161"></a>00161 <span class="comment"> * \return 0 on success, EOF on errors.</span>
<a name="l00162"></a>00162 <span class="comment"> */</span>
<a name="l00163"></a>00163 <span class="keyword">typedef</span> int (*CloseFunc_t) (<span class="keyword">struct </span><a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd);
<a name="l00164"></a>00164 
<a name="l00165"></a>00165 <span class="comment">/*</span>
<a name="l00166"></a>00166 <span class="comment"> * Flush file I/O.</span>
<a name="l00167"></a>00167 <span class="comment"> * \return 0 on success, EOF on errors.</span>
<a name="l00168"></a>00168 <span class="comment"> */</span>
<a name="l00169"></a>00169 <span class="keyword">typedef</span> int (*FlushFunc_t) (<span class="keyword">struct </span><a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd);
<a name="l00170"></a>00170 
<a name="l00171"></a>00171 <span class="comment">/*</span>
<a name="l00172"></a>00172 <span class="comment"> * Get file error mask.</span>
<a name="l00173"></a>00173 <span class="comment"> * \return 0 on success or file error code, device specific.</span>
<a name="l00174"></a>00174 <span class="comment"> */</span>
<a name="l00175"></a>00175 <span class="keyword">typedef</span> int (*ErrorFunc_t) (<span class="keyword">struct </span><a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd);
<a name="l00176"></a>00176 
<a name="l00177"></a>00177 <span class="comment">/*</span>
<a name="l00178"></a>00178 <span class="comment"> * Clear errors.</span>
<a name="l00179"></a>00179 <span class="comment"> */</span>
<a name="l00180"></a>00180 <span class="keyword">typedef</span> void (*ClearErrFunc_t) (<span class="keyword">struct </span><a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd);
<a name="l00181"></a>00181 
<a name="l00189"></a><a class="code" href="structKFile.html">00189</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a>
<a name="l00190"></a>00190 {
<a name="l00191"></a>00191     ReadFunc_t     read;
<a name="l00192"></a>00192     WriteFunc_t    write;
<a name="l00193"></a>00193     ReOpenFunc_t   reopen;
<a name="l00194"></a>00194     CloseFunc_t    close;
<a name="l00195"></a>00195     SeekFunc_t     seek;
<a name="l00196"></a>00196     FlushFunc_t    flush;
<a name="l00197"></a>00197     ErrorFunc_t    error;
<a name="l00198"></a>00198     ClearErrFunc_t clearerr;
<a name="l00199"></a>00199     DB(<a class="code" href="group__macros.html#ga513ee83176411bfc889c87bff2f5b6e4" title="Type for id generated by MAKE_ID().">id_t</a> _type); <span class="comment">// Used to keep track, at runtime, of the class type.</span>
<a name="l00200"></a>00200 
<a name="l00201"></a>00201     <span class="comment">/* NOTE: these must _NOT_ be size_t on 16bit CPUs! */</span>
<a name="l00202"></a>00202     <a class="code" href="group__io__kfile.html#ga5137f80da20dbbbb731a84c9671612cd" title="KFile offset type, used by kfile_seek().">kfile_off_t</a>    seek_pos;
<a name="l00203"></a>00203     <a class="code" href="group__io__kfile.html#ga5137f80da20dbbbb731a84c9671612cd" title="KFile offset type, used by kfile_seek().">kfile_off_t</a>    size;
<a name="l00204"></a>00204 } <a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a>;
<a name="l00205"></a>00205 
<a name="l00206"></a>00206 <span class="comment">/*</span>
<a name="l00207"></a>00207 <span class="comment"> * Generic implementation of kfile_seek.</span>
<a name="l00208"></a>00208 <span class="comment"> */</span>
<a name="l00209"></a>00209 <a class="code" href="group__io__kfile.html#ga5137f80da20dbbbb731a84c9671612cd" title="KFile offset type, used by kfile_seek().">kfile_off_t</a> <a class="code" href="group__io__kfile.html#gacac5698d355a3750f4b07415090ed7a4" title="Move fd file seek position of offset bytes from whence.">kfile_genericSeek</a>(<span class="keyword">struct</span> <a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd, <a class="code" href="group__io__kfile.html#ga5137f80da20dbbbb731a84c9671612cd" title="KFile offset type, used by kfile_seek().">kfile_off_t</a> offset, <a class="code" href="group__io__kfile.html#ga8f7714669a9397929a467e1d0d458e00" title="Costants for repositioning read/write file offset.">KSeekMode</a> whence);
<a name="l00210"></a>00210 
<a name="l00211"></a>00211 <span class="comment">/*</span>
<a name="l00212"></a>00212 <span class="comment"> * Generic implementation of kfile_reopen.</span>
<a name="l00213"></a>00213 <span class="comment"> */</span>
<a name="l00214"></a>00214 <span class="keyword">struct </span><a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> * <a class="code" href="group__io__kfile.html#ga1f1f5efe44ff91c5bea49f88f356059a" title="Reopen file fd.">kfile_genericReopen</a>(<span class="keyword">struct</span> <a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd);
<a name="l00215"></a>00215 
<a name="l00216"></a>00216 <span class="keywordtype">int</span> <a class="code" href="group__io__kfile.html#ga32306b8d90302fa70007aff8c1189bc5" title="Close file fd.">kfile_genericClose</a>(<span class="keyword">struct</span> <a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd);
<a name="l00217"></a>00217 
<a name="l00240"></a><a class="code" href="group__io__kfile.html#ga56f9291708a17fd2aed611844c4f9286">00240</a> INLINE <span class="keywordtype">size_t</span> <a class="code" href="group__io__kfile.html#ga56f9291708a17fd2aed611844c4f9286" title="Read size bytes from file fd into buf.">kfile_read</a>(<span class="keyword">struct</span> <a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd, <span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> size)
<a name="l00241"></a>00241 {
<a name="l00242"></a>00242     <a class="code" href="group__debug.html#gaca68c0d4ac8df0838e209fb5300f7be3" title="Assert a pre-condition on code.">ASSERT</a>(fd-&gt;read);
<a name="l00243"></a>00243     <span class="keywordflow">return</span> fd-&gt;read(fd, buf, size);
<a name="l00244"></a>00244 }
<a name="l00245"></a>00245 <span class="keywordtype">int</span> <a class="code" href="group__io__kfile.html#gaf33cb00f56adefabb98d534d526525eb" title="Read a line long at most as size and put it in buf.">kfile_gets</a>(<span class="keyword">struct</span> <a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd, <span class="keywordtype">char</span> *buf, <span class="keywordtype">int</span> size);
<a name="l00246"></a>00246 <span class="keywordtype">int</span> <a class="code" href="group__io__kfile.html#ga146ed5c09d27f419f4c44344d8845330" title="Read a line long at most as size and put it in buf, with optional echo.">kfile_gets_echo</a>(<span class="keyword">struct</span> <a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd, <span class="keywordtype">char</span> *buf, <span class="keywordtype">int</span> size, <span class="keywordtype">bool</span> echo);
<a name="l00247"></a>00247 
<a name="l00256"></a>00256 <a class="code" href="group__io__kfile.html#ga5137f80da20dbbbb731a84c9671612cd" title="KFile offset type, used by kfile_seek().">kfile_off_t</a> <a class="code" href="group__io__kfile.html#ga4709ef6ca6bf298bc52c87840dc22691" title="Copy size bytes from file src to dst.">kfile_copy</a>(<a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *src, <a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *dst, <a class="code" href="group__io__kfile.html#ga5137f80da20dbbbb731a84c9671612cd" title="KFile offset type, used by kfile_seek().">kfile_off_t</a> size);
<a name="l00257"></a>00257 
<a name="l00268"></a><a class="code" href="group__io__kfile.html#ga49de172ff5e373bcd3cba80b5158a79f">00268</a> INLINE <span class="keywordtype">size_t</span> <a class="code" href="group__io__kfile.html#ga49de172ff5e373bcd3cba80b5158a79f" title="Write size bytes from buffer buf into KFile fd.">kfile_write</a>(<span class="keyword">struct</span> <a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd, <span class="keyword">const</span> <span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> size)
<a name="l00269"></a>00269 {
<a name="l00270"></a>00270     <a class="code" href="group__debug.html#gaca68c0d4ac8df0838e209fb5300f7be3" title="Assert a pre-condition on code.">ASSERT</a>(fd-&gt;write);
<a name="l00271"></a>00271     <span class="keywordflow">return</span> fd-&gt;write(fd, buf, size);
<a name="l00272"></a>00272 }
<a name="l00273"></a>00273 
<a name="l00274"></a>00274 <span class="keywordtype">int</span> <a class="code" href="group__io__kfile.html#gaa04c60fc2dec055903884ab7d4a09111" title="Formatted write.">kfile_printf</a>(<span class="keyword">struct</span> <a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd, <span class="keyword">const</span> <span class="keywordtype">char</span> *format, ...);
<a name="l00275"></a>00275 <span class="keywordtype">int</span> <a class="code" href="group__io__kfile.html#gaaba6667da830aba35851b4c70d8783dd" title="Write a string to kfile fd.">kfile_print</a>(<span class="keyword">struct</span> <a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd, <span class="keyword">const</span> <span class="keywordtype">char</span> *s);
<a name="l00276"></a>00276 
<a name="l00287"></a><a class="code" href="group__io__kfile.html#ga9cd820012ea1521e8f5a0eacfafae35d">00287</a> INLINE <a class="code" href="group__io__kfile.html#ga5137f80da20dbbbb731a84c9671612cd" title="KFile offset type, used by kfile_seek().">kfile_off_t</a> <a class="code" href="group__io__kfile.html#ga9cd820012ea1521e8f5a0eacfafae35d" title="Seek into file (if seekable).">kfile_seek</a>(<span class="keyword">struct</span> <a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd, <a class="code" href="group__io__kfile.html#ga5137f80da20dbbbb731a84c9671612cd" title="KFile offset type, used by kfile_seek().">kfile_off_t</a> offset, <a class="code" href="group__io__kfile.html#ga8f7714669a9397929a467e1d0d458e00" title="Costants for repositioning read/write file offset.">KSeekMode</a> whence)
<a name="l00288"></a>00288 {
<a name="l00289"></a>00289     <a class="code" href="group__debug.html#gaca68c0d4ac8df0838e209fb5300f7be3" title="Assert a pre-condition on code.">ASSERT</a>(fd-&gt;seek);
<a name="l00290"></a>00290     <span class="keywordflow">return</span> fd-&gt;seek(fd, offset, whence);
<a name="l00291"></a>00291 }
<a name="l00292"></a>00292 
<a name="l00297"></a><a class="code" href="group__io__kfile.html#ga008259f87414718177676b6d93c1908d">00297</a> INLINE <a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> * <a class="code" href="group__io__kfile.html#ga008259f87414718177676b6d93c1908d" title="Close and reopen file fd.">kfile_reopen</a>(<span class="keyword">struct</span> <a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd)
<a name="l00298"></a>00298 {
<a name="l00299"></a>00299     <a class="code" href="group__debug.html#gaca68c0d4ac8df0838e209fb5300f7be3" title="Assert a pre-condition on code.">ASSERT</a>(fd-&gt;reopen);
<a name="l00300"></a>00300     <span class="keywordflow">return</span> fd-&gt;reopen(fd);
<a name="l00301"></a>00301 }
<a name="l00302"></a>00302 
<a name="l00307"></a><a class="code" href="group__io__kfile.html#ga09a98e161ef99b15efdd4c2d2ca03428">00307</a> INLINE <span class="keywordtype">int</span> <a class="code" href="group__io__kfile.html#ga09a98e161ef99b15efdd4c2d2ca03428" title="Close file.">kfile_close</a>(<span class="keyword">struct</span> <a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd)
<a name="l00308"></a>00308 {
<a name="l00309"></a>00309     <a class="code" href="group__debug.html#gaca68c0d4ac8df0838e209fb5300f7be3" title="Assert a pre-condition on code.">ASSERT</a>(fd-&gt;close);
<a name="l00310"></a>00310     <span class="keywordflow">return</span> fd-&gt;close(fd);
<a name="l00311"></a>00311 }
<a name="l00312"></a>00312 
<a name="l00317"></a><a class="code" href="group__io__kfile.html#ga6165c7b653acc06b5c9a6334540ac8fc">00317</a> INLINE <span class="keywordtype">int</span> <a class="code" href="group__io__kfile.html#ga6165c7b653acc06b5c9a6334540ac8fc" title="Flush file I/O.">kfile_flush</a>(<span class="keyword">struct</span> <a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd)
<a name="l00318"></a>00318 {
<a name="l00319"></a>00319     <a class="code" href="group__debug.html#gaca68c0d4ac8df0838e209fb5300f7be3" title="Assert a pre-condition on code.">ASSERT</a>(fd-&gt;flush);
<a name="l00320"></a>00320     <span class="keywordflow">return</span> fd-&gt;flush(fd);
<a name="l00321"></a>00321 }
<a name="l00322"></a>00322 
<a name="l00327"></a><a class="code" href="group__io__kfile.html#ga9638c7d7f76976a58ceb670c28e13c39">00327</a> INLINE <span class="keywordtype">int</span> <a class="code" href="group__io__kfile.html#ga9638c7d7f76976a58ceb670c28e13c39" title="Get file error mask.">kfile_error</a>(<span class="keyword">struct</span> <a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd)
<a name="l00328"></a>00328 {
<a name="l00329"></a>00329     <a class="code" href="group__debug.html#gaca68c0d4ac8df0838e209fb5300f7be3" title="Assert a pre-condition on code.">ASSERT</a>(fd-&gt;error);
<a name="l00330"></a>00330     <span class="keywordflow">return</span> fd-&gt;error(fd);
<a name="l00331"></a>00331 }
<a name="l00332"></a>00332 
<a name="l00336"></a><a class="code" href="group__io__kfile.html#ga40a4b4a6c5b44f6377e51e7484650324">00336</a> INLINE <span class="keywordtype">void</span> <a class="code" href="group__io__kfile.html#ga40a4b4a6c5b44f6377e51e7484650324" title="Clear errors.">kfile_clearerr</a>(<span class="keyword">struct</span> <a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd)
<a name="l00337"></a>00337 {
<a name="l00338"></a>00338     <a class="code" href="group__debug.html#gaca68c0d4ac8df0838e209fb5300f7be3" title="Assert a pre-condition on code.">ASSERT</a>(fd-&gt;clearerr);
<a name="l00339"></a>00339     fd-&gt;clearerr(fd);
<a name="l00340"></a>00340 }
<a name="l00341"></a>00341 
<a name="l00342"></a>00342 <span class="keywordtype">int</span> <a class="code" href="group__io__kfile.html#ga480c14426dc77cdfd786c3b5b9a9adf2" title="Generic putc() implementation using fd-&gt;write.">kfile_putc</a>(<span class="keywordtype">int</span> c, <span class="keyword">struct</span> <a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd); 
<a name="l00343"></a>00343 <span class="keywordtype">int</span> <a class="code" href="group__io__kfile.html#ga09cca6f02dc337ddff2b36b66a3fdd1c" title="Generic getc() implementation using fd-&gt;read.">kfile_getc</a>(<span class="keyword">struct</span> <a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd);  
<a name="l00344"></a>00344 <span class="keywordtype">void</span> <a class="code" href="group__io__kfile.html#ga13a065f1b039f4ce62d1fbb0da8c9c2d" title="Discard input to resynchronize with remote end.">kfile_resync</a>(<a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd, <a class="code" href="compiler_8h.html#ac6f57181b1edf6b9b510c8a1a66201c1" title="Type for time expressed in milliseconds.">mtime_t</a> delay);
<a name="l00345"></a>00345 <span class="keywordtype">void</span> <a class="code" href="group__io__kfile.html#gada2185b090d77fbb33ab01da3f22a8a9" title="Base class KFile constructor.">kfile_init</a>(<span class="keyword">struct</span> <a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd);
<a name="l00346"></a>00346 <span class="comment">/* @} */</span>
<a name="l00347"></a>00347  <span class="comment">//Defgroup io_kfile</span>
<a name="l00349"></a>00349 
<a name="l00350"></a>00350 <span class="comment">/*</span>
<a name="l00351"></a>00351 <span class="comment"> * Kfile test function.</span>
<a name="l00352"></a>00352 <span class="comment"> */</span>
<a name="l00353"></a>00353 <span class="keywordtype">int</span> kfile_testSetup(<span class="keywordtype">void</span>);
<a name="l00354"></a>00354 <span class="keywordtype">int</span> kfile_testRun(<span class="keywordtype">void</span>);
<a name="l00355"></a>00355 <span class="keywordtype">int</span> kfile_testRunGeneric(<a class="code" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> *fd, uint8_t *test_buf, uint8_t *save_buf, <span class="keywordtype">size_t</span> size);
<a name="l00356"></a>00356 <span class="keywordtype">int</span> kfile_testTearDown(<span class="keywordtype">void</span>);
<a name="l00357"></a>00357 
<a name="l00358"></a>00358 
<a name="l00359"></a>00359 <span class="preprocessor">#endif </span><span class="comment">/* KERN_KFILE_H */</span>
</pre></div></div>
</div>


