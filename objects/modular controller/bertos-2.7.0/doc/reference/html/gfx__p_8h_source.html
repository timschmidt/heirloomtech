

<!-- Generated by Doxygen 1.7.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_9fd71c1ac00056e7d855336b2291c56c.html">bertos</a>      </li>
      <li class="navelem"><a class="el" href="dir_9a060263bfb9303858e12a804212ea33.html">gfx</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">gfx_p.h</div>  </div>
</div>
<div class="contents">
<a href="gfx__p_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00040"></a>00040 <span class="comment">/*#*</span>
<a name="l00041"></a>00041 <span class="comment"> *#* $Log$</span>
<a name="l00042"></a>00042 <span class="comment"> *#* Revision 1.7  2006/07/19 12:56:26  bernie</span>
<a name="l00043"></a>00043 <span class="comment"> *#* Convert to new Doxygen style.</span>
<a name="l00044"></a>00044 <span class="comment"> *#*</span>
<a name="l00045"></a>00045 <span class="comment"> *#* Revision 1.6  2006/05/27 17:17:34  bernie</span>
<a name="l00046"></a>00046 <span class="comment"> *#* Optimize away divisions in RAST_ADDR/MASK macros.</span>
<a name="l00047"></a>00047 <span class="comment"> *#*</span>
<a name="l00048"></a>00048 <span class="comment"> *#* Revision 1.5  2006/05/25 23:35:40  bernie</span>
<a name="l00049"></a>00049 <span class="comment"> *#* Cleanup.</span>
<a name="l00050"></a>00050 <span class="comment"> *#*</span>
<a name="l00051"></a>00051 <span class="comment"> *#* Revision 1.4  2006/03/22 09:50:37  bernie</span>
<a name="l00052"></a>00052 <span class="comment"> *#* Use the same format for fonts and rasters.</span>
<a name="l00053"></a>00053 <span class="comment"> *#*</span>
<a name="l00054"></a>00054 <span class="comment"> *#* Revision 1.3  2006/02/15 09:10:15  bernie</span>
<a name="l00055"></a>00055 <span class="comment"> *#* Implement prop fonts; Fix algo styles.</span>
<a name="l00056"></a>00056 <span class="comment"> *#*</span>
<a name="l00057"></a>00057 <span class="comment"> *#* Revision 1.2  2006/02/10 12:28:33  bernie</span>
<a name="l00058"></a>00058 <span class="comment"> *#* Add font support in bitmaps; Make bitmap formats public.</span>
<a name="l00059"></a>00059 <span class="comment"> *#*</span>
<a name="l00060"></a>00060 <span class="comment"> *#* Revision 1.1  2006/01/26 00:32:49  bernie</span>
<a name="l00061"></a>00061 <span class="comment"> *#* Graphics private header.</span>
<a name="l00062"></a>00062 <span class="comment"> *#*</span>
<a name="l00063"></a>00063 <span class="comment"> *#*/</span>
<a name="l00064"></a>00064 
<a name="l00065"></a>00065 <span class="preprocessor">#ifndef GFX_GFX_P_H</span>
<a name="l00066"></a>00066 <span class="preprocessor"></span><span class="preprocessor">#define GFX_GFX_P_H</span>
<a name="l00067"></a>00067 <span class="preprocessor"></span>
<a name="l00068"></a>00068 <span class="preprocessor">#include &lt;<a class="code" href="gfx_8h.html">gfx/gfx.h</a>&gt;</span>
<a name="l00069"></a>00069 
<a name="l00070"></a>00070 <span class="preprocessor">#if CONFIG_BITMAP_FMT == BITMAP_FMT_PLANAR_H_MSB</span>
<a name="l00071"></a>00071 <span class="preprocessor"></span>
<a name="l00072"></a>00072     <span class="comment">/* We use ucoord_t to let the compiler optimize away the division/modulo. */</span>
<a name="l00073"></a>00073 <span class="preprocessor">    #define RAST_ADDR(raster, x, y, stride) \</span>
<a name="l00074"></a>00074 <span class="preprocessor">            ((raster) + (ucoord_t)(y) * (ucoord_t)(stride) + (ucoord_t)(x) / 8)</span>
<a name="l00075"></a>00075 <span class="preprocessor"></span><span class="preprocessor">    #define RAST_MASK(raster, x, y) \</span>
<a name="l00076"></a>00076 <span class="preprocessor">            (1 &lt;&lt; (7 - (ucoord_t)(x) % 8))</span>
<a name="l00077"></a>00077 <span class="preprocessor"></span>
<a name="l00078"></a>00078 <span class="preprocessor">#elif CONFIG_BITMAP_FMT == BITMAP_FMT_PLANAR_V_LSB</span>
<a name="l00079"></a>00079 <span class="preprocessor"></span>
<a name="l00080"></a>00080     <span class="comment">/* We use ucoord_t to let the compiler optimize away the division/modulo. */</span>
<a name="l00081"></a>00081 <span class="preprocessor">    #define RAST_ADDR(raster, x, y, stride) \</span>
<a name="l00082"></a>00082 <span class="preprocessor">            ((raster) + ((ucoord_t)(y) / 8) * (ucoord_t)(stride) + (ucoord_t)(x))</span>
<a name="l00083"></a>00083 <span class="preprocessor"></span><span class="preprocessor">    #define RAST_MASK(raster, x, y) \</span>
<a name="l00084"></a>00084 <span class="preprocessor">            (1 &lt;&lt; ((ucoord_t)(y) % 8))</span>
<a name="l00085"></a>00085 <span class="preprocessor"></span>
<a name="l00086"></a>00086 <span class="preprocessor">#else</span>
<a name="l00087"></a>00087 <span class="preprocessor"></span><span class="preprocessor">    #error Unknown value of CONFIG_BITMAP_FMT</span>
<a name="l00088"></a>00088 <span class="preprocessor"></span><span class="preprocessor">#endif </span><span class="comment">/* CONFIG_BITMAP_FMT */</span>
<a name="l00089"></a>00089 
<a name="l00090"></a>00090 <span class="preprocessor">#define BM_ADDR(bm, x, y)  RAST_ADDR((bm)-&gt;raster, (x), (y), (bm)-&gt;stride)</span>
<a name="l00091"></a>00091 <span class="preprocessor"></span><span class="preprocessor">#define BM_MASK(bm, x, y)  RAST_MASK((bm)-&gt;raster, (x), (y))</span>
<a name="l00092"></a>00092 <span class="preprocessor"></span>
<a name="l00099"></a><a class="code" href="gfx__p_8h.html#a7a80a76c1676d433b75283e69f738c23">00099</a> <span class="preprocessor">#define BM_PLOT(bm, x, y) \</span>
<a name="l00100"></a>00100 <span class="preprocessor">    ( *BM_ADDR(bm, x, y) |= BM_MASK(bm, x, y) )</span>
<a name="l00101"></a>00101 <span class="preprocessor"></span>
<a name="l00108"></a><a class="code" href="gfx__p_8h.html#a667b0dff472473e2f3ce6fc3ce5e2e9e">00108</a> <span class="preprocessor">#define BM_CLEAR(bm, x, y) \</span>
<a name="l00109"></a>00109 <span class="preprocessor">    ( *BM_ADDR(bm, x, y) &amp;= ~BM_MASK(bm, x, y) )</span>
<a name="l00110"></a>00110 <span class="preprocessor"></span>
<a name="l00118"></a><a class="code" href="gfx__p_8h.html#aef6a550f4b558aa563dc13d51bf36bc2">00118</a> <span class="preprocessor">#define BM_DRAWPIXEL(bm, x, y, fg_pen) \</span>
<a name="l00119"></a>00119 <span class="preprocessor">    do { \</span>
<a name="l00120"></a>00120 <span class="preprocessor">        uint8_t *p = BM_ADDR(bm, x, y); \</span>
<a name="l00121"></a>00121 <span class="preprocessor">        uint8_t mask = BM_MASK(bm, x, y); \</span>
<a name="l00122"></a>00122 <span class="preprocessor">        *p = (*p &amp; ~mask) | ((fg_pen) ? mask : 0); \</span>
<a name="l00123"></a>00123 <span class="preprocessor">    } while (0)</span>
<a name="l00124"></a>00124 <span class="preprocessor"></span>
<a name="l00133"></a><a class="code" href="gfx__p_8h.html#a83f277f031a594a37c1a8f2c01dc9671">00133</a> <span class="preprocessor">#define BM_READPIXEL(bm, x, y) \</span>
<a name="l00134"></a>00134 <span class="preprocessor">    ( *BM_ADDR(bm, x, y) &amp; BM_MASK(bm, x, y) ? 1 : 0 )</span>
<a name="l00135"></a>00135 <span class="preprocessor"></span>
<a name="l00136"></a>00136 <span class="preprocessor">#define RAST_READPIXEL(raster, x, y, stride) \</span>
<a name="l00137"></a>00137 <span class="preprocessor">        ( *RAST_ADDR(raster, x, y, stride) &amp; RAST_MASK(raster, x, y) ? 1 : 0 )</span>
<a name="l00138"></a>00138 <span class="preprocessor"></span>
<a name="l00139"></a>00139 <span class="preprocessor">#endif </span><span class="comment">/* GFX_GFX_P_H */</span>
</pre></div></div>
</div>


