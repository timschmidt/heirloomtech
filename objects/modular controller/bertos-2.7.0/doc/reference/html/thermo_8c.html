

<!-- Generated by Doxygen 1.7.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_9fd71c1ac00056e7d855336b2291c56c.html">bertos</a>      </li>
      <li class="navelem"><a class="el" href="dir_f7c89dbd63e8f34e572fe939945c15d7.html">drv</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">thermo.c File Reference</div>  </div>
</div>
<div class="contents">

<p>Thermo-control driver.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="thermo__map_8h_source.html">hw/thermo_map.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="hw__thermo_8h_source.html">hw/hw_thermo.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cfg__thermo_8h_source.html">cfg/cfg_thermo.h</a>&quot;</code><br/>
<code>#include &lt;<a class="el" href="module_8h_source.html">cfg/module.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="macros_8h_source.html">cfg/macros.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="debug_8h_source.html">cfg/debug.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="log_8h_source.html">cfg/log.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="thermo_8h_source.html">drv/thermo.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="timer_8h_source.html">drv/timer.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="ntc_8h_source.html">drv/ntc.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="proc_8h_source.html">kern/proc.h</a>&gt;</code><br/>
</div>
<p><a href="thermo_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">thermostatus_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thermo_8c.html#a053a516b886d7546b9ca74457fb61c91">thermo_status</a> (ThermoDev dev)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the status of the specific <em>dev</em> thermo-device.  <a href="#a053a516b886d7546b9ca74457fb61c91"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2b097e570d6ebea1cd1842c0a922f897"></a><!-- doxytag: member="thermo.c::thermo_do" ref="a2b097e570d6ebea1cd1842c0a922f897" args="(ThermoDev index)" -->
static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thermo_8c.html#a2b097e570d6ebea1cd1842c0a922f897">thermo_do</a> (ThermoDev index)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Do a single thermo control for device <em>dev</em>. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abb20f5670e4446fcc7a5f9ce1f4b2661"></a><!-- doxytag: member="thermo.c::thermo_softint" ref="abb20f5670e4446fcc7a5f9ce1f4b2661" args="(void)" -->
static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thermo_8c.html#abb20f5670e4446fcc7a5f9ce1f4b2661">thermo_softint</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Thermo soft interrupt. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thermo_8c.html#adbb70debe8e24d19622376749e6b776d">thermo_timer</a> (ThermoDev dev, <a class="el" href="compiler_8h.html#ac6f57181b1edf6b9b510c8a1a66201c1">mtime_t</a> on_time)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts a thermo-regulation for channel <em>dev</em>, and turn off timer when <em>on_time</em> was elapsed.  <a href="#adbb70debe8e24d19622376749e6b776d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thermo_8c.html#a1ba24f93620eac0ae9f45ddc87089af5">thermo_setTarget</a> (ThermoDev dev, deg_t temperature)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the target temperature <em>temperature</em> for a specific <em>dev</em> thermo-device.  <a href="#a1ba24f93620eac0ae9f45ddc87089af5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thermo_8c.html#a333e5dba5de186343f992b91f4cca6d5">thermo_start</a> (ThermoDev dev)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts a thermo-regulation for channel <em>dev</em>.  <a href="#a333e5dba5de186343f992b91f4cca6d5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thermo_8c.html#af02eba9c6d98347fd05c6942d5459ef9">thermo_stop</a> (ThermoDev dev)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops a thermo-regulation for channel <em>dev</em>.  <a href="#af02eba9c6d98347fd05c6942d5459ef9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9533357dbfdabe459b8486110a764a95"></a><!-- doxytag: member="thermo.c::thermo_clearErrors" ref="a9533357dbfdabe459b8486110a764a95" args="(ThermoDev dev)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thermo_8c.html#a9533357dbfdabe459b8486110a764a95">thermo_clearErrors</a> (ThermoDev dev)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear errors for channel <em>dev</em>. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">deg_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thermo_8c.html#a2a92492ecc2a1dbd5bb5147f403cf58f">thermo_readTemperature</a> (ThermoDev dev)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the temperature of the thermo-device <em>dev</em> using mobile mean.  <a href="#a2a92492ecc2a1dbd5bb5147f403cf58f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaf8267cf1ac50739eb03a76362dc3e72"></a><!-- doxytag: member="thermo.c::thermo_init" ref="aaf8267cf1ac50739eb03a76362dc3e72" args="(void)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thermo_8c.html#aaf8267cf1ac50739eb03a76362dc3e72">thermo_init</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Init thermo-control and associated hw. <br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structTimer.html">Timer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thermo_8c.html#a48377bf44321f0229af212d59f9fb028">thermo_timer</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structTimer.html" title="The timer driver supports multiple synchronous timers that can trigger an event when they expire...">Timer</a> for thermo-regulation.  <a href="#a48377bf44321f0229af212d59f9fb028"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ThermoControlDev&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thermo_8c.html#a75a9b30fadfe83867c57e6fc438af149">devs</a> [THERMO_CNT]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Array of thermo-devices.  <a href="#a75a9b30fadfe83867c57e6fc438af149"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Thermo-control driver. </p>
<p>The Thermo controll can works both with kernel or without it. In the case we use kernel, the thermo controll is done by one process that poll every CONFIG_THERMO_INTERVAL_MS the temperature sensor and make all operation to follow the target temperature. While we not use the kernel the module works with one timer interrupt in the same way of the kenel case.</p>
<dl class="author"><dt><b>Author:</b></dt><dd>Giovanni Bajo &lt;<a href="mailto:rasky@develer.com">rasky@develer.com</a>&gt; </dd>
<dd>
Francesco Sacchi &lt;<a href="mailto:batt@develer.com">batt@develer.com</a>&gt; </dd>
<dd>
Daniele Basile &lt;<a href="mailto:asterix@develer.com">asterix@develer.com</a>&gt; </dd></dl>

<p>Definition in file <a class="el" href="thermo_8c_source.html">thermo.c</a>.</p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="a2a92492ecc2a1dbd5bb5147f403cf58f"></a><!-- doxytag: member="thermo.c::thermo_readTemperature" ref="a2a92492ecc2a1dbd5bb5147f403cf58f" args="(ThermoDev dev)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">deg_t thermo_readTemperature </td>
          <td>(</td>
          <td class="paramtype">ThermoDev&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read the temperature of the thermo-device <em>dev</em> using mobile mean. </p>
<p>Return the current temperature of a device currently under thermo control. </p>

<p>Definition at line <a class="el" href="thermo_8c_source.html#l00292">292</a> of file <a class="el" href="thermo_8c_source.html">thermo.c</a>.</p>

</div>
</div>
<a class="anchor" id="a1ba24f93620eac0ae9f45ddc87089af5"></a><!-- doxytag: member="thermo.c::thermo_setTarget" ref="a1ba24f93620eac0ae9f45ddc87089af5" args="(ThermoDev dev, deg_t temperature)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void thermo_setTarget </td>
          <td>(</td>
          <td class="paramtype">ThermoDev&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">deg_t&#160;</td>
          <td class="paramname"><em>temperature</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the target temperature <em>temperature</em> for a specific <em>dev</em> thermo-device. </p>
<p>Set the target temperature at which a given device should be kept. </p>

<p>Definition at line <a class="el" href="thermo_8c_source.html#l00235">235</a> of file <a class="el" href="thermo_8c_source.html">thermo.c</a>.</p>

</div>
</div>
<a class="anchor" id="a333e5dba5de186343f992b91f4cca6d5"></a><!-- doxytag: member="thermo.c::thermo_start" ref="a333e5dba5de186343f992b91f4cca6d5" args="(ThermoDev dev)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void thermo_start </td>
          <td>(</td>
          <td class="paramtype">ThermoDev&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Starts a thermo-regulation for channel <em>dev</em>. </p>
<p>Start thermo control for a certain device <em>dev</em>. </p>

<p>Definition at line <a class="el" href="thermo_8c_source.html#l00247">247</a> of file <a class="el" href="thermo_8c_source.html">thermo.c</a>.</p>

</div>
</div>
<a class="anchor" id="a053a516b886d7546b9ca74457fb61c91"></a><!-- doxytag: member="thermo.c::thermo_status" ref="a053a516b886d7546b9ca74457fb61c91" args="(ThermoDev dev)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">thermostatus_t thermo_status </td>
          <td>(</td>
          <td class="paramtype">ThermoDev&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the status of the specific <em>dev</em> thermo-device. </p>

<p>Definition at line <a class="el" href="thermo_8c_source.html#l00103">103</a> of file <a class="el" href="thermo_8c_source.html">thermo.c</a>.</p>

</div>
</div>
<a class="anchor" id="af02eba9c6d98347fd05c6942d5459ef9"></a><!-- doxytag: member="thermo.c::thermo_stop" ref="af02eba9c6d98347fd05c6942d5459ef9" args="(ThermoDev dev)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void thermo_stop </td>
          <td>(</td>
          <td class="paramtype">ThermoDev&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stops a thermo-regulation for channel <em>dev</em>. </p>
<p>Stop thermo control for a certain device <em>dev</em>. </p>

<p>Definition at line <a class="el" href="thermo_8c_source.html#l00270">270</a> of file <a class="el" href="thermo_8c_source.html">thermo.c</a>.</p>

</div>
</div>
<a class="anchor" id="adbb70debe8e24d19622376749e6b776d"></a><!-- doxytag: member="thermo.c::thermo_timer" ref="adbb70debe8e24d19622376749e6b776d" args="(ThermoDev dev, mtime_t on_time)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void thermo_timer </td>
          <td>(</td>
          <td class="paramtype">ThermoDev&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="compiler_8h.html#ac6f57181b1edf6b9b510c8a1a66201c1">mtime_t</a>&#160;</td>
          <td class="paramname"><em>on_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Starts a thermo-regulation for channel <em>dev</em>, and turn off timer when <em>on_time</em> was elapsed. </p>
<p>Start thermo control for a certain device <em>dev</em> and stop it after <em>on_time</em> msec. </p>

<p>Definition at line <a class="el" href="thermo_8c_source.html#l00223">223</a> of file <a class="el" href="thermo_8c_source.html">thermo.c</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a75a9b30fadfe83867c57e6fc438af149"></a><!-- doxytag: member="thermo.c::devs" ref="a75a9b30fadfe83867c57e6fc438af149" args="[THERMO_CNT]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ThermoControlDev <a class="el" href="thermo_8c.html#a75a9b30fadfe83867c57e6fc438af149">devs</a>[THERMO_CNT]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Array of thermo-devices. </p>

<p>Definition at line <a class="el" href="thermo_8c_source.html#l00098">98</a> of file <a class="el" href="thermo_8c_source.html">thermo.c</a>.</p>

</div>
</div>
<a class="anchor" id="a48377bf44321f0229af212d59f9fb028"></a><!-- doxytag: member="thermo.c::thermo_timer" ref="a48377bf44321f0229af212d59f9fb028" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structTimer.html">Timer</a> thermo_timer<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="structTimer.html" title="The timer driver supports multiple synchronous timers that can trigger an event when they expire...">Timer</a> for thermo-regulation. </p>

<p>Definition at line <a class="el" href="thermo_8c_source.html#l00084">84</a> of file <a class="el" href="thermo_8c_source.html">thermo.c</a>.</p>

</div>
</div>
</div>


