

<!-- Generated by Doxygen 1.7.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_9fd71c1ac00056e7d855336b2291c56c.html">bertos</a>      </li>
      <li class="navelem"><a class="el" href="dir_8751e12fe1becf196f093883e557854f.html">struct</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">pool.h</div>  </div>
</div>
<div class="contents">
<a href="pool_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00079"></a>00079 <span class="preprocessor">#ifndef STRUCT_POOL_H</span>
<a name="l00080"></a>00080 <span class="preprocessor"></span><span class="preprocessor">#define STRUCT_POOL_H</span>
<a name="l00081"></a>00081 <span class="preprocessor"></span>
<a name="l00082"></a>00082 <span class="preprocessor">#include &lt;<a class="code" href="macros_8h.html">cfg/macros.h</a>&gt;</span>
<a name="l00083"></a>00083 <span class="preprocessor">#include &lt;<a class="code" href="list_8h.html">struct/list.h</a>&gt;</span>
<a name="l00084"></a>00084 
<a name="l00088"></a><a class="code" href="group__pool.html#ga7ce1fd7fb261d381d6702885eaea067d">00088</a> <span class="preprocessor">#define EXTERN_POOL(name) \</span>
<a name="l00089"></a>00089 <span class="preprocessor">    extern List name</span>
<a name="l00090"></a>00090 <span class="preprocessor"></span>
<a name="l00091"></a>00091 <span class="preprocessor">#define DECLARE_POOL_WITH_STORAGE(name, type, num, storage) \</span>
<a name="l00092"></a>00092 <span class="preprocessor">    static type name##_items[num]; \</span>
<a name="l00093"></a>00093 <span class="preprocessor">    storage name; \</span>
<a name="l00094"></a>00094 <span class="preprocessor">    INLINE void name##_init(void (*init_func)(type*)) \</span>
<a name="l00095"></a>00095 <span class="preprocessor">    { \</span>
<a name="l00096"></a>00096 <span class="preprocessor">        size_t i; \</span>
<a name="l00097"></a>00097 <span class="preprocessor">        LIST_INIT(&amp;name); \</span>
<a name="l00098"></a>00098 <span class="preprocessor">        for (i=0;i&lt;countof(name##_items);++i) \</span>
<a name="l00099"></a>00099 <span class="preprocessor">        { \</span>
<a name="l00100"></a>00100 <span class="preprocessor">            if (init_func) init_func(&amp;name##_items[i]); \</span>
<a name="l00101"></a>00101 <span class="preprocessor">            ADDTAIL(&amp;name, (Node*)&amp;name##_items[i]); \</span>
<a name="l00102"></a>00102 <span class="preprocessor">        } \</span>
<a name="l00103"></a>00103 <span class="preprocessor">    } \</span>
<a name="l00104"></a>00104 <span class="preprocessor">    INLINE void name##_init(void (*init_func)(type*)) \</span>
<a name="l00105"></a>00105 <span class="preprocessor">    </span>
<a name="l00106"></a>00106 <span class="preprocessor"></span>
<a name="l00117"></a><a class="code" href="group__pool.html#ga5f5b00a437b5138b8b096fee81d7f01c">00117</a> <span class="preprocessor">#define DECLARE_POOL(name, type, num) \</span>
<a name="l00118"></a>00118 <span class="preprocessor">    DECLARE_POOL_WITH_STORAGE(name, type, num, List)</span>
<a name="l00119"></a>00119 <span class="preprocessor"></span>
<a name="l00125"></a><a class="code" href="group__pool.html#gaebfe3041ba7c5068fe7423e3284f035d">00125</a> <span class="preprocessor">#define DECLARE_POOL_STATIC(name, type, num) \</span>
<a name="l00126"></a>00126 <span class="preprocessor">    DECLARE_POOL_WITH_STORAGE(name, type, num, static List)</span>
<a name="l00127"></a>00127 <span class="preprocessor"></span>
<a name="l00140"></a><a class="code" href="group__pool.html#gab327ce7d9ec066e9a92443fafc22435c">00140</a> <span class="preprocessor">#define pool_init(name, init_func)     (*(name##_init))(init_func)</span>
<a name="l00141"></a>00141 <span class="preprocessor"></span>
<a name="l00154"></a><a class="code" href="group__pool.html#ga09431deb3ffa490cb62fbd0a967363a7">00154</a> <span class="preprocessor">#define pool_alloc(name)               list_remHead(name)</span>
<a name="l00155"></a>00155 <span class="preprocessor"></span>
<a name="l00165"></a><a class="code" href="group__pool.html#ga17af1483f46acfa5396926be274f884a">00165</a> <span class="preprocessor">#define pool_free(name, elem)          ADDHEAD(name, (Node*)elem)</span>
<a name="l00166"></a>00166 <span class="preprocessor"></span>
<a name="l00173"></a><a class="code" href="group__pool.html#gaf301a96a0e63bfbb8ea3f9e71d8f1c3a">00173</a> <span class="preprocessor">#define pool_empty(name)               LIST_EMPTY(name)</span>
<a name="l00174"></a>00174 <span class="preprocessor"></span> <span class="comment">/* defgroup pool */</span>
<a name="l00176"></a>00176 
<a name="l00177"></a>00177 <span class="preprocessor">#endif </span><span class="comment">/* STRUCT_POOL_H */</span>
</pre></div></div>
</div>


