

<!-- Generated by Doxygen 1.7.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_9fd71c1ac00056e7d855336b2291c56c.html">bertos</a>      </li>
      <li class="navelem"><a class="el" href="dir_68f09be7290993d78ca9d2f4b29655ef.html">dt</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">editbool.c</div>  </div>
</div>
<div class="contents">
<a href="editbool_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="editbool_8h.html" title="Edit bool widget (interface).">editbool.h</a>&quot;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &lt;<a class="code" href="dtag_8h.html" title="Tags interface.">dt/dtag.h</a>&gt;</span>
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <span class="preprocessor">#include &lt;<a class="code" href="lcd__text_8h.html" title="Generic text LCD driver (interface).">drv/lcd_text.h</a>&gt;</span>
<a name="l00044"></a>00044 
<a name="l00048"></a><a class="code" href="editbool_8h.html#ab56dac5b0f6f26cb2660ae9507774d14">00048</a> <span class="keywordtype">void</span> <a class="code" href="editbool_8c.html#a832dcc34cf1cd25f77c42670d405e39c" title="Init widget.">editbool_init</a>(DEditBool *e, <a class="code" href="dwidget_8h.html#aa3dc162decd5f531e81c4555b638e265" title="Widget position.">dpos_t</a> pos, <a class="code" href="dwidget_8h.html#aa3dc162decd5f531e81c4555b638e265" title="Widget position.">dpos_t</a> size, <a class="code" href="dwidget_8h.html#a7fd3d28c2af16e87280e38b828469bb9" title="Widget drawing context.">dcontext_t</a> *context, <span class="keywordtype">bool</span> *value, <span class="keyword">const</span> <span class="keywordtype">char</span> *true_string, <span class="keyword">const</span> <span class="keywordtype">char</span> *false_string)
<a name="l00049"></a>00049 {
<a name="l00050"></a>00050     <span class="comment">// Initialize superclass</span>
<a name="l00051"></a>00051     <a class="code" href="dwidget_8c.html#a8433a54cde665cd182ed2897056a4f06" title="Init the widget of pos and size on the drawing context.">widget_init</a>(&amp;e-&gt;widget, pos, size, context);
<a name="l00052"></a>00052 
<a name="l00053"></a>00053     <span class="comment">// Override superclass methods</span>
<a name="l00054"></a>00054     e-&gt;widget.notifier.update = (update_func_ptr)<a class="code" href="editbool_8c.html#aaedda9ec1a3802d684c02e6e4739b62e" title="Handle the messages (edit the bool).">editbool_update</a>;
<a name="l00055"></a>00055 
<a name="l00056"></a>00056     <span class="comment">// Init instance</span>
<a name="l00057"></a>00057     e-&gt;value = value;
<a name="l00058"></a>00058     e-&gt;true_string = true_string;
<a name="l00059"></a>00059     e-&gt;false_string = false_string;
<a name="l00060"></a>00060     e-&gt;draw = <a class="code" href="editbool_8c.html#a82fcbfbbc500fbf6fb2c960153ab82d6" title="Draw the string on the context.">editbool_draw</a>;
<a name="l00061"></a>00061 }
<a name="l00062"></a>00062 
<a name="l00066"></a><a class="code" href="editbool_8h.html#ac1870c3346b97ef465926259c4b8da4b">00066</a> <span class="keywordtype">void</span> <a class="code" href="editbool_8c.html#aaedda9ec1a3802d684c02e6e4739b62e" title="Handle the messages (edit the bool).">editbool_update</a>(DEditBool *e, <a class="code" href="dtag_8h.html#a989a5440f3bb968849daeb67ac75c76f" title="Type for tag.">dtag_t</a> tag, <a class="code" href="dtag_8h.html#af717bf8c70ee5565efb1e10ca7c9d45a" title="Type for values associated with tags.">dval_t</a> _val)
<a name="l00067"></a>00067 {
<a name="l00068"></a>00068     <span class="keywordtype">bool</span> changed = <span class="keyword">false</span>;
<a name="l00069"></a>00069 
<a name="l00070"></a>00070     <span class="keywordflow">switch</span> (tag)
<a name="l00071"></a>00071     {
<a name="l00072"></a>00072     <span class="keywordflow">case</span> TAG_SETVALUE:
<a name="l00073"></a>00073         *e-&gt;value = (bool)_val;
<a name="l00074"></a>00074         changed = <span class="keyword">true</span>;
<a name="l00075"></a>00075         <span class="keywordflow">break</span>;
<a name="l00076"></a>00076 
<a name="l00077"></a>00077     <span class="keywordflow">case</span> TAG_TOGGLE:
<a name="l00078"></a>00078         *e-&gt;value = !*e-&gt;value;
<a name="l00079"></a>00079         changed = <span class="keyword">true</span>;
<a name="l00080"></a>00080         <span class="keywordflow">break</span>;
<a name="l00081"></a>00081     <span class="keywordflow">default</span>:
<a name="l00082"></a>00082         <span class="keywordflow">break</span>;
<a name="l00083"></a>00083     }
<a name="l00084"></a>00084 
<a name="l00085"></a>00085     <span class="keywordflow">if</span> (changed)
<a name="l00086"></a>00086     {
<a name="l00087"></a>00087         e-&gt;draw(e);
<a name="l00088"></a>00088         <a class="code" href="dnotifier_8h.html#aaab336a2f65ebd0363b8ef0efa663a2b" title="Macro to notify all the targets of target object.">dnotify_targets</a>(&amp;e-&gt;widget.notifier, TAG_SETVALUE, (<a class="code" href="dtag_8h.html#af717bf8c70ee5565efb1e10ca7c9d45a" title="Type for values associated with tags.">dval_t</a>)*e-&gt;value);
<a name="l00089"></a>00089     }
<a name="l00090"></a>00090 }
<a name="l00091"></a>00091 
<a name="l00095"></a><a class="code" href="editbool_8h.html#a82fcbfbbc500fbf6fb2c960153ab82d6">00095</a> <span class="keywordtype">void</span> <a class="code" href="editbool_8c.html#a82fcbfbbc500fbf6fb2c960153ab82d6" title="Draw the string on the context.">editbool_draw</a>(DEditBool *e)
<a name="l00096"></a>00096 {
<a name="l00097"></a>00097     lcd_printf((<a class="code" href="structLayer.html" title="Overwrapping layer context.">Layer</a> *)e-&gt;widget.context, (<a class="code" href="lcd__hd44_8h.html#a702c97e9cd6cf2c8bad2044f87a24ba6" title="Type for combined LCD cursor position (x,y).">lcdpos_t</a>)e-&gt;widget.pos, LCD_NORMAL, <span class="stringliteral">&quot;%*s&quot;</span>, (<span class="keywordtype">int</span>)e-&gt;widget.size , *e-&gt;value? e-&gt;true_string: e-&gt;false_string);
<a name="l00098"></a>00098 }
</pre></div></div>
</div>


