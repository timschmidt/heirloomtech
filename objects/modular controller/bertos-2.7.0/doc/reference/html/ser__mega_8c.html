

<!-- Generated by Doxygen 1.7.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_9fd71c1ac00056e7d855336b2291c56c.html">bertos</a>      </li>
      <li class="navelem"><a class="el" href="dir_a5de7543e32a5f073daa04f8834eb5fd.html">cpu</a>      </li>
      <li class="navelem"><a class="el" href="dir_8cefc62df6d91e3832e6e743f5d42cba.html">avr</a>      </li>
      <li class="navelem"><a class="el" href="dir_f344cd5f82bdc8d3fd8dd25683e839db.html">drv</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ser_mega.c File Reference</div>  </div>
</div>
<div class="contents">

<p>AVR MEGA UART and SPI I/O driver (Implementation)  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="hw__ser_8h_source.html">hw/hw_ser.h</a>&quot;</code><br/>
<code>#include &lt;<a class="el" href="hw__cpufreq_8h_source.html">hw/hw_cpufreq.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="cfg__ser_8h_source.html">cfg/cfg_ser.h</a>&quot;</code><br/>
<code>#include &lt;<a class="el" href="macros_8h_source.html">cfg/macros.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="debug_8h_source.html">cfg/debug.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="cfg__arch_8h_source.html">cfg/cfg_arch.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="ser_8h_source.html">drv/ser.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="ser__p_8h_source.html">drv/ser_p.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="timer_8h_source.html">drv/timer.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="fifobuf_8h_source.html">struct/fifobuf.h</a>&gt;</code><br/>
<code>#include &lt;avr/io.h&gt;</code><br/>
<code>#include &lt;avr/signal.h&gt;</code><br/>
</div>
<p><a href="ser__mega_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structAvrSerial.html">AvrSerial</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal hardware state structure.  <a href="structAvrSerial.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Hardware handshake (RTS/CTS).</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a10c7dea811659af1720a8e7db9ac36b8"></a><!-- doxytag: member="ser_mega.c::RTS_ON" ref="a10c7dea811659af1720a8e7db9ac36b8" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#a10c7dea811659af1720a8e7db9ac36b8">RTS_ON</a>&#160;&#160;&#160;do {} while (0)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Dummy value, must be overridden. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adab881d9cd2cde8d44b4bd08596203a4"></a><!-- doxytag: member="ser_mega.c::RTS_OFF" ref="adab881d9cd2cde8d44b4bd08596203a4" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#adab881d9cd2cde8d44b4bd08596203a4">RTS_OFF</a>&#160;&#160;&#160;do {} while (0)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Dummy value, must be overridden. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a582eac8696ebc4c4e006cfed4263e792"></a><!-- doxytag: member="ser_mega.c::IS_CTS_ON" ref="a582eac8696ebc4c4e006cfed4263e792" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#a582eac8696ebc4c4e006cfed4263e792">IS_CTS_ON</a>&#160;&#160;&#160;true</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Dummy value, must be overridden. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac2fdf38c09bfcbdca98f04c1e5c54fac"></a><!-- doxytag: member="ser_mega.c::EIMSKF_CTS" ref="ac2fdf38c09bfcbdca98f04c1e5c54fac" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#ac2fdf38c09bfcbdca98f04c1e5c54fac">EIMSKF_CTS</a>&#160;&#160;&#160;0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Dummy value, must be overridden. <br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">Overridable serial bus hooks</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>These can be redefined in hw.h to implement special bus policies such as half-duplex, 485, etc.</p>
<div class="fragment"><pre class="fragment">  TXBEGIN      TXCHAR      TXEND  TXOFF
    |   __________|__________ |     |
    |   |   |   |   |   |   | |     |
    v   v   v   v   v   v   v v     v
 ______  __  __  __  __  __  __  ________________
       \/  \/  \/  \/  \/  \/  \/
 ______/\__/\__/\__/\__/\__/\__/
</pre></div> </div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#ac22504abfb0e56bf885758ba34152845">SER_UART0_BUS_TXINIT</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Default TXINIT macro - invoked in uart0_init()  <a href="#ac22504abfb0e56bf885758ba34152845"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#a4b1ed25f6c90796fcabcd7e32869cc65">SER_UART0_BUS_TXBEGIN</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Invoked before starting a transmission.  <a href="#a4b1ed25f6c90796fcabcd7e32869cc65"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae4bd21e7f0fc0af52b626dd35d12fd76"></a><!-- doxytag: member="ser_mega.c::SER_UART0_BUS_TXCHAR" ref="ae4bd21e7f0fc0af52b626dd35d12fd76" args="(c)" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#ae4bd21e7f0fc0af52b626dd35d12fd76">SER_UART0_BUS_TXCHAR</a>(c)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Invoked to send one character. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#abae79eaa6d2d89bbf4fd655c1964dad0">SER_UART0_BUS_TXEND</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Invoked as soon as the txfifo becomes empty.  <a href="#abae79eaa6d2d89bbf4fd655c1964dad0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#a84dfd97b82fd2cda418b83baf0fdf6ea">SER_UART0_BUS_TXOFF</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Invoked after the last character has been transmitted.  <a href="#a84dfd97b82fd2cda418b83baf0fdf6ea"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#ad50670eedb499a4a2c7a53e6b1fb3a3a">SER_UART1_BUS_TXINIT</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#a233df3cd464a7e3277750fe314fc563c">SER_UART1_BUS_TXBEGIN</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#ad3529269b476ca56b0c0c5be237613cd">SER_UART1_BUS_TXCHAR</a>(c)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#acbca3f16c05d34ba154de6516c22b2ad">SER_UART1_BUS_TXEND</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#ab75f0c72657dbd3a229cc9cfc8cb80a6">SER_UART1_BUS_TXOFF</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#a3ffed5af4fbe5861ccc662864f488ae1">SER_UART2_BUS_TXINIT</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#a59d7aa3c46405d93e31ca74a8539d1f9">SER_UART2_BUS_TXBEGIN</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#a2a365b4a485b404ade15b5adc85dbe20">SER_UART2_BUS_TXCHAR</a>(c)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#a737a7b5c5dcdf3c009bd020d0ac87bb6">SER_UART2_BUS_TXEND</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#a2979a31ca15fc908d4f8333c1328bfed">SER_UART2_BUS_TXOFF</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#a91c71afb176aea05248eacb521c6ccb6">SER_UART3_BUS_TXINIT</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#ae034048e5ad4d4de7fddd15f65e9b8ef">SER_UART3_BUS_TXBEGIN</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#a7535d75c94e34ed276d0c6f4e31ca36f">SER_UART3_BUS_TXCHAR</a>(c)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#af3aa80e872448afc6562da443139539a">SER_UART3_BUS_TXEND</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#a33e1429b1b8b7f8d4faa9bfdb0943834">SER_UART3_BUS_TXOFF</a></td></tr>
<tr><td colspan="2"><div class="groupHeader">Overridable SPI hooks</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>These can be redefined in hw.h to implement special bus policies such as slave select pin handling, etc. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7f1363ee849e260fee119011a7c9f67f"></a><!-- doxytag: member="ser_mega.c::SER_SPI_BUS_TXINIT" ref="a7f1363ee849e260fee119011a7c9f67f" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#a7f1363ee849e260fee119011a7c9f67f">SER_SPI_BUS_TXINIT</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Default TXINIT macro - invoked in spi_init() The default is no action. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#a73c03c907c3d02d4b3f71ff9c61e640c">SER_SPI_BUS_TXCLOSE</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Invoked after the last character has been transmitted.  <a href="#a73c03c907c3d02d4b3f71ff9c61e640c"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4cffb3e9dcdc03d088a93a8d016d5650"></a><!-- doxytag: member="ser_mega.c::DECLARE_ISR" ref="a4cffb3e9dcdc03d088a93a8d016d5650" args="(USART0_UDRE_vect)" -->
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#a4cffb3e9dcdc03d088a93a8d016d5650">DECLARE_ISR</a> (USART0_UDRE_vect)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structSerial.html" title="Serial handle structure.">Serial</a> 0 TX interrupt handler. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#a8ee945002d4691252247ea467397dd6b">DECLARE_ISR</a> (USART0_TX_vect)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structSerial.html" title="Serial handle structure.">Serial</a> port 0 TX complete interrupt handler.  <a href="#a8ee945002d4691252247ea467397dd6b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#af422db82b88fb670c7762b42aea7e1df">DECLARE_ISR</a> (USART0_RX_vect)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structSerial.html" title="Serial handle structure.">Serial</a> 0 RX complete interrupt handler.  <a href="#af422db82b88fb670c7762b42aea7e1df"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a534f3a5c155edeaf3129dab9a58bda9d"></a><!-- doxytag: member="ser_mega.c::DECLARE_ISR" ref="a534f3a5c155edeaf3129dab9a58bda9d" args="(SPI_STC_vect)" -->
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ser__mega_8c.html#a534f3a5c155edeaf3129dab9a58bda9d">DECLARE_ISR</a> (SPI_STC_vect)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI interrupt handler. <br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>AVR MEGA UART and SPI I/O driver (Implementation) </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Bernie Innocenti &lt;<a href="mailto:bernie@codewiz.org">bernie@codewiz.org</a>&gt; </dd>
<dd>
Stefano Fedrigo &lt;<a href="mailto:aleph@develer.com">aleph@develer.com</a>&gt; </dd>
<dd>
Luca Ottaviano &lt;<a href="mailto:lottaviano@develer.com">lottaviano@develer.com</a>&gt; </dd></dl>

<p>Definition in file <a class="el" href="ser__mega_8c_source.html">ser_mega.c</a>.</p>
</div><hr/><h2>Define Documentation</h2>
<a class="anchor" id="a73c03c907c3d02d4b3f71ff9c61e640c"></a><!-- doxytag: member="ser_mega.c::SER_SPI_BUS_TXCLOSE" ref="a73c03c907c3d02d4b3f71ff9c61e640c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SER_SPI_BUS_TXCLOSE</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Invoked after the last character has been transmitted. </p>
<p>The default is no action. </p>

<p>Definition at line <a class="el" href="ser__mega_8c_source.html#l00329">329</a> of file <a class="el" href="ser__mega_8c_source.html">ser_mega.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4b1ed25f6c90796fcabcd7e32869cc65"></a><!-- doxytag: member="ser_mega.c::SER_UART0_BUS_TXBEGIN" ref="a4b1ed25f6c90796fcabcd7e32869cc65" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SER_UART0_BUS_TXBEGIN</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> { \
        UCSR0B = <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_RXCIE0) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_UDRIE0) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_RXEN0) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_TXEN0); \
    } <span class="keywordflow">while</span> (0)
</pre></div>
<p>Invoked before starting a transmission. </p>
<ul>
<li>Enable both the receiver and the transmitter</li>
<li>Enable both the RX complete and UDR empty interrupts </li>
</ul>

<p>Definition at line <a class="el" href="ser__mega_8c_source.html#l00161">161</a> of file <a class="el" href="ser__mega_8c_source.html">ser_mega.c</a>.</p>

</div>
</div>
<a class="anchor" id="abae79eaa6d2d89bbf4fd655c1964dad0"></a><!-- doxytag: member="ser_mega.c::SER_UART0_BUS_TXEND" ref="abae79eaa6d2d89bbf4fd655c1964dad0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SER_UART0_BUS_TXEND</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> { \
        UCSR0B = <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_RXCIE0) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_RXEN0) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_TXEN0); \
    } <span class="keywordflow">while</span> (0)
</pre></div>
<p>Invoked as soon as the txfifo becomes empty. </p>
<ul>
<li>Keep both the receiver and the transmitter enabled</li>
<li>Keep the RX complete interrupt enabled</li>
<li>Disable the UDR empty interrupt </li>
</ul>

<p>Definition at line <a class="el" href="ser__mega_8c_source.html#l00183">183</a> of file <a class="el" href="ser__mega_8c_source.html">ser_mega.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac22504abfb0e56bf885758ba34152845"></a><!-- doxytag: member="ser_mega.c::SER_UART0_BUS_TXINIT" ref="ac22504abfb0e56bf885758ba34152845" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SER_UART0_BUS_TXINIT</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> { \
        UCSR0A = 0; <span class="comment">/* The Arduino Uno bootloader turns on U2X0 */</span> \
        UCSR0B = <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_RXCIE0) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_RXEN0) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_TXEN0); \
    } <span class="keywordflow">while</span> (0)
</pre></div>
<p>Default TXINIT macro - invoked in uart0_init() </p>
<ul>
<li>Enable both the receiver and the transmitter</li>
<li>Enable only the RX complete interrupt </li>
</ul>

<p>Definition at line <a class="el" href="ser__mega_8c_source.html#l00148">148</a> of file <a class="el" href="ser__mega_8c_source.html">ser_mega.c</a>.</p>

</div>
</div>
<a class="anchor" id="a84dfd97b82fd2cda418b83baf0fdf6ea"></a><!-- doxytag: member="ser_mega.c::SER_UART0_BUS_TXOFF" ref="a84dfd97b82fd2cda418b83baf0fdf6ea" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SER_UART0_BUS_TXOFF</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Invoked after the last character has been transmitted. </p>
<p>The default is no action. </p>

<p>Definition at line <a class="el" href="ser__mega_8c_source.html#l00197">197</a> of file <a class="el" href="ser__mega_8c_source.html">ser_mega.c</a>.</p>

</div>
</div>
<a class="anchor" id="a233df3cd464a7e3277750fe314fc563c"></a><!-- doxytag: member="ser_mega.c::SER_UART1_BUS_TXBEGIN" ref="a233df3cd464a7e3277750fe314fc563c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SER_UART1_BUS_TXBEGIN</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> { \
        UCSR1B = <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_RXCIE1) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_UDRIE1) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_RXEN1) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_TXEN1); \
    } <span class="keywordflow">while</span> (0)
</pre></div><dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="ser__mega_8c.html#a4b1ed25f6c90796fcabcd7e32869cc65" title="Invoked before starting a transmission.">SER_UART0_BUS_TXBEGIN</a> </dd></dl>

<p>Definition at line <a class="el" href="ser__mega_8c_source.html#l00209">209</a> of file <a class="el" href="ser__mega_8c_source.html">ser_mega.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad3529269b476ca56b0c0c5be237613cd"></a><!-- doxytag: member="ser_mega.c::SER_UART1_BUS_TXCHAR" ref="ad3529269b476ca56b0c0c5be237613cd" args="(c)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SER_UART1_BUS_TXCHAR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> { \
        UDR1 = (c); \
    } <span class="keywordflow">while</span> (0)
</pre></div><dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="ser__mega_8c.html#ae4bd21e7f0fc0af52b626dd35d12fd76" title="Invoked to send one character.">SER_UART0_BUS_TXCHAR</a> </dd></dl>

<p>Definition at line <a class="el" href="ser__mega_8c_source.html#l00215">215</a> of file <a class="el" href="ser__mega_8c_source.html">ser_mega.c</a>.</p>

</div>
</div>
<a class="anchor" id="acbca3f16c05d34ba154de6516c22b2ad"></a><!-- doxytag: member="ser_mega.c::SER_UART1_BUS_TXEND" ref="acbca3f16c05d34ba154de6516c22b2ad" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SER_UART1_BUS_TXEND</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> { \
        UCSR1B = <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_RXCIE1) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_RXEN1) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_TXEN1); \
    } <span class="keywordflow">while</span> (0)
</pre></div><dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="ser__mega_8c.html#abae79eaa6d2d89bbf4fd655c1964dad0" title="Invoked as soon as the txfifo becomes empty.">SER_UART0_BUS_TXEND</a> </dd></dl>

<p>Definition at line <a class="el" href="ser__mega_8c_source.html#l00221">221</a> of file <a class="el" href="ser__mega_8c_source.html">ser_mega.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad50670eedb499a4a2c7a53e6b1fb3a3a"></a><!-- doxytag: member="ser_mega.c::SER_UART1_BUS_TXINIT" ref="ad50670eedb499a4a2c7a53e6b1fb3a3a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SER_UART1_BUS_TXINIT</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> { \
        UCSR1B = <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_RXCIE1) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_RXEN1) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_TXEN1); \
    } <span class="keywordflow">while</span> (0)
</pre></div><dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="ser__mega_8c.html#ac22504abfb0e56bf885758ba34152845" title="Default TXINIT macro - invoked in uart0_init()">SER_UART0_BUS_TXINIT</a> </dd></dl>

<p>Definition at line <a class="el" href="ser__mega_8c_source.html#l00203">203</a> of file <a class="el" href="ser__mega_8c_source.html">ser_mega.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab75f0c72657dbd3a229cc9cfc8cb80a6"></a><!-- doxytag: member="ser_mega.c::SER_UART1_BUS_TXOFF" ref="ab75f0c72657dbd3a229cc9cfc8cb80a6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SER_UART1_BUS_TXOFF</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="ser__mega_8c.html#a84dfd97b82fd2cda418b83baf0fdf6ea" title="Invoked after the last character has been transmitted.">SER_UART0_BUS_TXOFF</a> </dd></dl>

<p>Definition at line <a class="el" href="ser__mega_8c_source.html#l00232">232</a> of file <a class="el" href="ser__mega_8c_source.html">ser_mega.c</a>.</p>

</div>
</div>
<a class="anchor" id="a59d7aa3c46405d93e31ca74a8539d1f9"></a><!-- doxytag: member="ser_mega.c::SER_UART2_BUS_TXBEGIN" ref="a59d7aa3c46405d93e31ca74a8539d1f9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SER_UART2_BUS_TXBEGIN</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> { \
        UCSR2B = <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_RXCIE2) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_UDRIE2) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_RXEN2) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_TXEN2); \
    } <span class="keywordflow">while</span> (0)
</pre></div><dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="ser__mega_8c.html#a4b1ed25f6c90796fcabcd7e32869cc65" title="Invoked before starting a transmission.">SER_UART0_BUS_TXBEGIN</a> </dd></dl>

<p>Definition at line <a class="el" href="ser__mega_8c_source.html#l00244">244</a> of file <a class="el" href="ser__mega_8c_source.html">ser_mega.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2a365b4a485b404ade15b5adc85dbe20"></a><!-- doxytag: member="ser_mega.c::SER_UART2_BUS_TXCHAR" ref="a2a365b4a485b404ade15b5adc85dbe20" args="(c)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SER_UART2_BUS_TXCHAR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> { \
        UDR2 = (c); \
    } <span class="keywordflow">while</span> (0)
</pre></div><dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="ser__mega_8c.html#ae4bd21e7f0fc0af52b626dd35d12fd76" title="Invoked to send one character.">SER_UART0_BUS_TXCHAR</a> </dd></dl>

<p>Definition at line <a class="el" href="ser__mega_8c_source.html#l00250">250</a> of file <a class="el" href="ser__mega_8c_source.html">ser_mega.c</a>.</p>

</div>
</div>
<a class="anchor" id="a737a7b5c5dcdf3c009bd020d0ac87bb6"></a><!-- doxytag: member="ser_mega.c::SER_UART2_BUS_TXEND" ref="a737a7b5c5dcdf3c009bd020d0ac87bb6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SER_UART2_BUS_TXEND</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> { \
        UCSR2B = <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_RXCIE2) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_RXEN2) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_TXEN2); \
    } <span class="keywordflow">while</span> (0)
</pre></div><dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="ser__mega_8c.html#abae79eaa6d2d89bbf4fd655c1964dad0" title="Invoked as soon as the txfifo becomes empty.">SER_UART0_BUS_TXEND</a> </dd></dl>

<p>Definition at line <a class="el" href="ser__mega_8c_source.html#l00256">256</a> of file <a class="el" href="ser__mega_8c_source.html">ser_mega.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3ffed5af4fbe5861ccc662864f488ae1"></a><!-- doxytag: member="ser_mega.c::SER_UART2_BUS_TXINIT" ref="a3ffed5af4fbe5861ccc662864f488ae1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SER_UART2_BUS_TXINIT</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> { \
        UCSR2B = <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_RXCIE2) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_RXEN2) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_TXEN2); \
    } <span class="keywordflow">while</span> (0)
</pre></div><dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="ser__mega_8c.html#ac22504abfb0e56bf885758ba34152845" title="Default TXINIT macro - invoked in uart0_init()">SER_UART0_BUS_TXINIT</a> </dd></dl>

<p>Definition at line <a class="el" href="ser__mega_8c_source.html#l00238">238</a> of file <a class="el" href="ser__mega_8c_source.html">ser_mega.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2979a31ca15fc908d4f8333c1328bfed"></a><!-- doxytag: member="ser_mega.c::SER_UART2_BUS_TXOFF" ref="a2979a31ca15fc908d4f8333c1328bfed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SER_UART2_BUS_TXOFF</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="ser__mega_8c.html#a84dfd97b82fd2cda418b83baf0fdf6ea" title="Invoked after the last character has been transmitted.">SER_UART0_BUS_TXOFF</a> </dd></dl>

<p>Definition at line <a class="el" href="ser__mega_8c_source.html#l00267">267</a> of file <a class="el" href="ser__mega_8c_source.html">ser_mega.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae034048e5ad4d4de7fddd15f65e9b8ef"></a><!-- doxytag: member="ser_mega.c::SER_UART3_BUS_TXBEGIN" ref="ae034048e5ad4d4de7fddd15f65e9b8ef" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SER_UART3_BUS_TXBEGIN</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> { \
        UCSR3B = <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_RXCIE3) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_UDRIE3) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_RXEN3) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_TXEN3); \
    } <span class="keywordflow">while</span> (0)
</pre></div><dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="ser__mega_8c.html#a4b1ed25f6c90796fcabcd7e32869cc65" title="Invoked before starting a transmission.">SER_UART0_BUS_TXBEGIN</a> </dd></dl>

<p>Definition at line <a class="el" href="ser__mega_8c_source.html#l00279">279</a> of file <a class="el" href="ser__mega_8c_source.html">ser_mega.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7535d75c94e34ed276d0c6f4e31ca36f"></a><!-- doxytag: member="ser_mega.c::SER_UART3_BUS_TXCHAR" ref="a7535d75c94e34ed276d0c6f4e31ca36f" args="(c)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SER_UART3_BUS_TXCHAR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> { \
        UDR3 = (c); \
    } <span class="keywordflow">while</span> (0)
</pre></div><dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="ser__mega_8c.html#ae4bd21e7f0fc0af52b626dd35d12fd76" title="Invoked to send one character.">SER_UART0_BUS_TXCHAR</a> </dd></dl>

<p>Definition at line <a class="el" href="ser__mega_8c_source.html#l00285">285</a> of file <a class="el" href="ser__mega_8c_source.html">ser_mega.c</a>.</p>

</div>
</div>
<a class="anchor" id="af3aa80e872448afc6562da443139539a"></a><!-- doxytag: member="ser_mega.c::SER_UART3_BUS_TXEND" ref="af3aa80e872448afc6562da443139539a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SER_UART3_BUS_TXEND</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> { \
        UCSR3B = <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_RXCIE3) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_RXEN3) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_TXEN3); \
    } <span class="keywordflow">while</span> (0)
</pre></div><dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="ser__mega_8c.html#abae79eaa6d2d89bbf4fd655c1964dad0" title="Invoked as soon as the txfifo becomes empty.">SER_UART0_BUS_TXEND</a> </dd></dl>

<p>Definition at line <a class="el" href="ser__mega_8c_source.html#l00291">291</a> of file <a class="el" href="ser__mega_8c_source.html">ser_mega.c</a>.</p>

</div>
</div>
<a class="anchor" id="a91c71afb176aea05248eacb521c6ccb6"></a><!-- doxytag: member="ser_mega.c::SER_UART3_BUS_TXINIT" ref="a91c71afb176aea05248eacb521c6ccb6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SER_UART3_BUS_TXINIT</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> { \
        UCSR3B = <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_RXCIE3) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_RXEN3) | <a class="code" href="group__macros.html#ga663d8c125655d41622b1e6bc96e5d63d" title="Convert a bit value to a binary flag.">BV</a>(BIT_TXEN3); \
    } <span class="keywordflow">while</span> (0)
</pre></div><dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="ser__mega_8c.html#ac22504abfb0e56bf885758ba34152845" title="Default TXINIT macro - invoked in uart0_init()">SER_UART0_BUS_TXINIT</a> </dd></dl>

<p>Definition at line <a class="el" href="ser__mega_8c_source.html#l00273">273</a> of file <a class="el" href="ser__mega_8c_source.html">ser_mega.c</a>.</p>

</div>
</div>
<a class="anchor" id="a33e1429b1b8b7f8d4faa9bfdb0943834"></a><!-- doxytag: member="ser_mega.c::SER_UART3_BUS_TXOFF" ref="a33e1429b1b8b7f8d4faa9bfdb0943834" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SER_UART3_BUS_TXOFF</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="ser__mega_8c.html#a84dfd97b82fd2cda418b83baf0fdf6ea" title="Invoked after the last character has been transmitted.">SER_UART0_BUS_TXOFF</a> </dd></dl>

<p>Definition at line <a class="el" href="ser__mega_8c_source.html#l00302">302</a> of file <a class="el" href="ser__mega_8c_source.html">ser_mega.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="af422db82b88fb670c7762b42aea7e1df"></a><!-- doxytag: member="ser_mega.c::DECLARE_ISR" ref="af422db82b88fb670c7762b42aea7e1df" args="(USART0_RX_vect)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DECLARE_ISR </td>
          <td>(</td>
          <td class="paramtype">USART0_RX_vect&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="structSerial.html" title="Serial handle structure.">Serial</a> 0 RX complete interrupt handler. </p>
<p>This handler is interruptible. Interrupt are reenabled as soon as recv complete interrupt is disabled. Using INTERRUPT() is troublesome when the serial is heavily loaded, because an interrupt could be retriggered when executing the handler prologue before RXCIE is disabled.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>The code that re-enables interrupts is commented out because in some nasty cases the interrupt is retriggered. This is probably due to the RXC flag being set before RXCIE is cleared. Unfortunately the RXC flag is read-only and can't be cleared by code. </dd></dl>

<p>Definition at line <a class="el" href="ser__mega_8c_source.html#l01193">1193</a> of file <a class="el" href="ser__mega_8c_source.html">ser_mega.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8ee945002d4691252247ea467397dd6b"></a><!-- doxytag: member="ser_mega.c::DECLARE_ISR" ref="a8ee945002d4691252247ea467397dd6b" args="(USART0_TX_vect)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DECLARE_ISR </td>
          <td>(</td>
          <td class="paramtype">USART0_TX_vect&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="structSerial.html" title="Serial handle structure.">Serial</a> port 0 TX complete interrupt handler. </p>
<p>This IRQ is usually disabled. The UDR-empty interrupt enables it when there's no more data to transmit. We need to wait until the last character has been transmitted before switching the 485 transceiver to receive mode.</p>
<p>The txfifo might have been refilled by putchar() while we were waiting for the transmission complete interrupt. In this case, we must restart the UDR empty interrupt, otherwise we'd stop the serial port with some data still pending in the buffer. </p>

<p>Definition at line <a class="el" href="ser__mega_8c_source.html#l00993">993</a> of file <a class="el" href="ser__mega_8c_source.html">ser_mega.c</a>.</p>

</div>
</div>
</div>


