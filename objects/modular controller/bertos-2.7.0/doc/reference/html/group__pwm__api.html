

<!-- Generated by Doxygen 1.7.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">PWM API</div>  </div>
<div class="ingroups"><a class="el" href="group__pwm__driver.html">PWM driver</a></div></div>
<div class="contents">

<p>With this driver you can control a device with multiple PWM channels.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPwm.html">Pwm</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">PWM context structure.  <a href="structPwm.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pwm__api.html#ga0f45f821c9a3ea240d0fbeb92da78359">PwmPolarity</a> { <a class="el" href="group__pwm__api.html#gga0f45f821c9a3ea240d0fbeb92da78359a16e19b596e34d73ac33dbc4b6f9ac71a">PWM_POL_HIGH_PULSE</a>, 
<a class="el" href="group__pwm__api.html#gga0f45f821c9a3ea240d0fbeb92da78359a0b86929344265081d235ecff2d3a7560">PWM_POL_POSITIVE</a> =  PWM_POL_HIGH_PULSE, 
<a class="el" href="group__pwm__api.html#gga0f45f821c9a3ea240d0fbeb92da78359adad33784889afbc9b3b0c28dd6f1a8f9">PWM_POL_LOW_PULSE</a>, 
<a class="el" href="group__pwm__api.html#gga0f45f821c9a3ea240d0fbeb92da78359ac072e70da3f34b9b3938f40a20fc0cd0">PWM_POL_NEGATIVE</a> =  PWM_POL_LOW_PULSE
 }</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Enum describing PWM polarities.  <a href="group__pwm__api.html#ga0f45f821c9a3ea240d0fbeb92da78359">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pwm__api.html#ga9ab6f520c329f7b6c2407894ccfe1637">pwm_setDuty</a> (<a class="el" href="structPwm.html">Pwm</a> *ctx, <a class="el" href="group__pwm__driver.html#ga888b80124e0de426d7c5d77cc3d1e41d">pwm_duty_t</a> duty)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the duty cycle of the PWM channel linked to <code>ctx</code>.  <a href="#ga9ab6f520c329f7b6c2407894ccfe1637"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pwm__api.html#gadcab05a6b13ca79cb6f35e081bde9b67">pwm_setFrequency</a> (<a class="el" href="structPwm.html">Pwm</a> *ctx, <a class="el" href="group__pwm__driver.html#ga441d99cfd172b050d79e3fa5e150a937">pwm_freq_t</a> freq)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set PWM frequency of channel linked to <code>ctx</code>.  <a href="#gadcab05a6b13ca79cb6f35e081bde9b67"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pwm__api.html#ga26ad2863a6dadaef3f4c1467f0d5e9af">pwm_setPolarity</a> (<a class="el" href="structPwm.html">Pwm</a> *ctx, <a class="el" href="group__pwm__api.html#ga0f45f821c9a3ea240d0fbeb92da78359">PwmPolarity</a> pol)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set PWM polarity of pwm channel linked to <code>ctx</code>.  <a href="#ga26ad2863a6dadaef3f4c1467f0d5e9af"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pwm__api.html#gacfaab95ddf7850b35b79b0467530e345">pwm_enable</a> (<a class="el" href="structPwm.html">Pwm</a> *ctx, bool state)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable/Disable the pwm channel linked to <code>ctx</code>.  <a href="#gacfaab95ddf7850b35b79b0467530e345"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pwm__api.html#ga8938bb59e420b0d1df8208166349e892">pwm_init</a> (<a class="el" href="structPwm.html">Pwm</a> *ctx, unsigned channel)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize PWM driver.  <a href="#ga8938bb59e420b0d1df8208166349e892"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<p>With this driver you can control a device with multiple PWM channels. </p>
<p>You can enable/disable each channel indipendently and also set frequency and duty cycle.</p>
<p>API usage example: </p>
<div class="fragment"><pre class="fragment"> <a class="code" href="structPwm.html" title="PWM context structure.">Pwm</a> pwm; <span class="comment">// declare a context structure</span>
 <a class="code" href="group__pwm__api.html#ga8938bb59e420b0d1df8208166349e892" title="Initialize PWM driver.">pwm_init</a>(&amp;pwm, 0); <span class="comment">// init pwm channel 0</span>
 <a class="code" href="group__pwm__api.html#gadcab05a6b13ca79cb6f35e081bde9b67" title="Set PWM frequency of channel linked to ctx.">pwm_setFrequency</a>(&amp;pwm, 1000); <span class="comment">// Set frequency of channel 0 to 1000Hz</span>
 <a class="code" href="group__pwm__api.html#ga9ab6f520c329f7b6c2407894ccfe1637" title="Set the duty cycle of the PWM channel linked to ctx.">pwm_setDuty</a>(&amp;pwm, 0x7FFF); <span class="comment">// Set duty to 50% (0xFFFF/2)</span>
 <a class="code" href="group__pwm__api.html#gacfaab95ddf7850b35b79b0467530e345" title="Enable/Disable the pwm channel linked to ctx.">pwm_enable</a>(&amp;pwm, <span class="keyword">true</span>); <span class="comment">// Activate the output</span>
</pre></div> <hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="ga0f45f821c9a3ea240d0fbeb92da78359"></a><!-- doxytag: member="pwm.h::PwmPolarity" ref="ga0f45f821c9a3ea240d0fbeb92da78359" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__pwm__api.html#ga0f45f821c9a3ea240d0fbeb92da78359">PwmPolarity</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enum describing PWM polarities. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="gga0f45f821c9a3ea240d0fbeb92da78359a16e19b596e34d73ac33dbc4b6f9ac71a"></a><!-- doxytag: member="PWM_POL_HIGH_PULSE" ref="gga0f45f821c9a3ea240d0fbeb92da78359a16e19b596e34d73ac33dbc4b6f9ac71a" args="" -->PWM_POL_HIGH_PULSE</em>&nbsp;</td><td>
<p>High pulse: increasing duty increases the part of the signal at high level. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga0f45f821c9a3ea240d0fbeb92da78359a0b86929344265081d235ecff2d3a7560"></a><!-- doxytag: member="PWM_POL_POSITIVE" ref="gga0f45f821c9a3ea240d0fbeb92da78359a0b86929344265081d235ecff2d3a7560" args="" -->PWM_POL_POSITIVE</em>&nbsp;</td><td>
<p>Positive pulse: same as High pulse. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga0f45f821c9a3ea240d0fbeb92da78359adad33784889afbc9b3b0c28dd6f1a8f9"></a><!-- doxytag: member="PWM_POL_LOW_PULSE" ref="gga0f45f821c9a3ea240d0fbeb92da78359adad33784889afbc9b3b0c28dd6f1a8f9" args="" -->PWM_POL_LOW_PULSE</em>&nbsp;</td><td>
<p>Low pulse: increasing duty increases the part of the signal at low level. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga0f45f821c9a3ea240d0fbeb92da78359ac072e70da3f34b9b3938f40a20fc0cd0"></a><!-- doxytag: member="PWM_POL_NEGATIVE" ref="gga0f45f821c9a3ea240d0fbeb92da78359ac072e70da3f34b9b3938f40a20fc0cd0" args="" -->PWM_POL_NEGATIVE</em>&nbsp;</td><td>
<p>Negative pulse: same as Low pulse. </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="pwm_8h_source.html#l00094">94</a> of file <a class="el" href="pwm_8h_source.html">pwm.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gacfaab95ddf7850b35b79b0467530e345"></a><!-- doxytag: member="pwm.h::pwm_enable" ref="gacfaab95ddf7850b35b79b0467530e345" args="(Pwm *ctx, bool state)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pwm_enable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPwm.html">Pwm</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enable/Disable the pwm channel linked to <code>ctx</code>. </p>
<p>The modification will be applied to the channel immediatly. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>PWM channel context. </td></tr>
    <tr><td class="paramname">enable</td><td>if true the channel will be enabled, if false will be disabled.</td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>When a PWM channel is disabled, the output level will be the same as if the duty would be set to 0%. So, if current polarity is positive, a disabled channel will be low, if polarity is negative will be high. </dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__pwm__api.html#ga26ad2863a6dadaef3f4c1467f0d5e9af" title="Set PWM polarity of pwm channel linked to ctx.">pwm_setPolarity</a> </dd></dl>

<p>Definition at line <a class="el" href="pwm_8c_source.html#l00220">220</a> of file <a class="el" href="pwm_8c_source.html">pwm.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga8938bb59e420b0d1df8208166349e892"></a><!-- doxytag: member="pwm.h::pwm_init" ref="ga8938bb59e420b0d1df8208166349e892" args="(Pwm *ctx, unsigned channel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pwm_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPwm.html">Pwm</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>channel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize PWM driver. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>pointer to a PWM context structure, used for holding PWM driver related information. </td></tr>
    <tr><td class="paramname">channel</td><td>the channel you want to initialize. </td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>The channel will be initialized disabled and with High polarity. </dd></dl>

<p>Definition at line <a class="el" href="pwm_8c_source.html#l00237">237</a> of file <a class="el" href="pwm_8c_source.html">pwm.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga9ab6f520c329f7b6c2407894ccfe1637"></a><!-- doxytag: member="pwm.h::pwm_setDuty" ref="ga9ab6f520c329f7b6c2407894ccfe1637" args="(Pwm *ctx, pwm_duty_t duty)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pwm_setDuty </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPwm.html">Pwm</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__pwm__driver.html#ga888b80124e0de426d7c5d77cc3d1e41d">pwm_duty_t</a>&#160;</td>
          <td class="paramname"><em>duty</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the duty cycle of the PWM channel linked to <code>ctx</code>. </p>
<p>The modification will be applied to the channel immediatly. The current frequency of the channel will be maintained. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>PWM channel context. </td></tr>
    <tr><td class="paramname">duty</td><td>the new duty cycle value. </td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__pwm__driver.html#ga888b80124e0de426d7c5d77cc3d1e41d" title="Type for PWM duty cycle.">pwm_duty_t</a> </dd></dl>

<p>Definition at line <a class="el" href="pwm_8c_source.html#l00168">168</a> of file <a class="el" href="pwm_8c_source.html">pwm.c</a>.</p>

</div>
</div>
<a class="anchor" id="gadcab05a6b13ca79cb6f35e081bde9b67"></a><!-- doxytag: member="pwm.h::pwm_setFrequency" ref="gadcab05a6b13ca79cb6f35e081bde9b67" args="(Pwm *ctx, pwm_freq_t freq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pwm_setFrequency </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPwm.html">Pwm</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__pwm__driver.html#ga441d99cfd172b050d79e3fa5e150a937">pwm_freq_t</a>&#160;</td>
          <td class="paramname"><em>freq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set PWM frequency of channel linked to <code>ctx</code>. </p>
<p>The modification will be applied to the channel immediatly. The duty cycle of the channel will be maintained. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>PWM channel context. </td></tr>
    <tr><td class="paramname">freq</td><td>the new frequency of the signal, in Hz. </td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>Depending on the hardware implementation, this function may generate a glitch in the output signal upon frequency changing. </dd></dl>

<p>Definition at line <a class="el" href="pwm_8c_source.html#l00185">185</a> of file <a class="el" href="pwm_8c_source.html">pwm.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga26ad2863a6dadaef3f4c1467f0d5e9af"></a><!-- doxytag: member="pwm.h::pwm_setPolarity" ref="ga26ad2863a6dadaef3f4c1467f0d5e9af" args="(Pwm *ctx, PwmPolarity pol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pwm_setPolarity </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPwm.html">Pwm</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__pwm__api.html#ga0f45f821c9a3ea240d0fbeb92da78359">PwmPolarity</a>&#160;</td>
          <td class="paramname"><em>pol</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set PWM polarity of pwm channel linked to <code>ctx</code>. </p>
<p>The modification will be applied to the channel immediatly. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>PWM channel context. </td></tr>
    <tr><td class="paramname">pol</td><td>the new polarity of the signal.</td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>if a channel is disabled, changing its polarity will change the current steady output level. </dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__pwm__api.html#gacfaab95ddf7850b35b79b0467530e345" title="Enable/Disable the pwm channel linked to ctx.">pwm_enable</a> </dd>
<dd>
<a class="el" href="group__pwm__api.html#ga0f45f821c9a3ea240d0fbeb92da78359" title="Enum describing PWM polarities.">PwmPolarity</a> </dd></dl>

<p>Definition at line <a class="el" href="pwm_8c_source.html#l00202">202</a> of file <a class="el" href="pwm_8c_source.html">pwm.c</a>.</p>

</div>
</div>
</div>


