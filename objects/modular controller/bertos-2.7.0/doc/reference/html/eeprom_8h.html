

<!-- Generated by Doxygen 1.7.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_9fd71c1ac00056e7d855336b2291c56c.html">bertos</a>      </li>
      <li class="navelem"><a class="el" href="dir_f7c89dbd63e8f34e572fe939945c15d7.html">drv</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">eeprom.h File Reference</div>  </div>
</div>
<div class="contents">

<p>Driver for the 24xx16 and 24xx256 I2C EEPROMS.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="cfg__eeprom_8h_source.html">cfg/cfg_eeprom.h</a>&quot;</code><br/>
<code>#include &lt;<a class="el" href="compiler_8h_source.html">cfg/compiler.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="debug_8h_source.html">cfg/debug.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="i2c_8h_source.html">drv/i2c.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="kblock_8h_source.html">io/kblock.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="io_2kfile_8h_source.html">io/kfile.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="kfile__block_8h_source.html">io/kfile_block.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="attr_8h_source.html">cpu/attr.h</a>&gt;</code><br/>
</div>
<p><a href="eeprom_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structEeprom.html">Eeprom</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Describe an EEPROM context, used by the driver to access the single device.  <a href="structEeprom.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structEepromInfo.html">EepromInfo</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Descrive all EEPROM informations needed by the driver.  <a href="structEepromInfo.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3307eda964f83bffc0c732e072fde931"></a><!-- doxytag: member="eeprom.h::KBT_EEPROM" ref="a3307eda964f83bffc0c732e072fde931" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="eeprom_8h.html#a3307eda964f83bffc0c732e072fde931">KBT_EEPROM</a>&#160;&#160;&#160;MAKE_ID('E', 'E', 'P', 'R')</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">ID for eeproms. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="eeprom_8h.html#aa576b3701b9b8ccad83f54083f8e2381">e2addr</a>(type, field)&#160;&#160;&#160;((<a class="el" href="eeprom_8h.html#adaadfc7eea7dceb474dc3780204996c3">e2addr_t</a>)&amp;(((type *)0)-&gt;field))</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Macro for E2Layout offset calculation.  <a href="#aa576b3701b9b8ccad83f54083f8e2381"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="eeprom_8h.html#a8dae5ff48fb3f99f5886720ea737ba72">e2dev_addr_t</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">On the same I2C bus can live more than one EEPROM device.  <a href="#a8dae5ff48fb3f99f5886720ea737ba72"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adaadfc7eea7dceb474dc3780204996c3"></a><!-- doxytag: member="eeprom.h::e2addr_t" ref="adaadfc7eea7dceb474dc3780204996c3" args="" -->
typedef uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="eeprom_8h.html#adaadfc7eea7dceb474dc3780204996c3">e2addr_t</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Type for EEPROM addresses. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa1984099fee789303e5cebd1ed46f7f8"></a><!-- doxytag: member="eeprom.h::e2blk_size_t" ref="aa1984099fee789303e5cebd1ed46f7f8" args="" -->
typedef uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="eeprom_8h.html#aa1984099fee789303e5cebd1ed46f7f8">e2blk_size_t</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Type for EEPROM block size. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0a6165633c5775351c42efd01e440c45"></a><!-- doxytag: member="eeprom.h::e2_size_t" ref="a0a6165633c5775351c42efd01e440c45" args="" -->
typedef uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="eeprom_8h.html#a0a6165633c5775351c42efd01e440c45">e2_size_t</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Type for accessing EEPROM whole size. <br/></td></tr>
<tr><td colspan="2"><h2><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="eeprom_8h.html#a4976d90233e10328ed79612429d97ecd">EepromType</a> </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Values for <a class="el" href="structEeprom.html" title="Describe an EEPROM context, used by the driver to access the single device.">Eeprom</a> types. <br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a395eea3664e25b030e4c98ae64c5b7e1"></a><!-- doxytag: member="eeprom.h::EEPROM_CAST_KBLOCK" ref="a395eea3664e25b030e4c98ae64c5b7e1" args="(KBlock *blk)" -->
<a class="el" href="structEeprom.html">Eeprom</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="eeprom_8h.html#a395eea3664e25b030e4c98ae64c5b7e1">EEPROM_CAST_KBLOCK</a> (<a class="el" href="structKBlock.html">KBlock</a> *blk)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert + ASSERT from generic <a class="el" href="structKFile.html" title="Context data for callback functions which operate on pseudo files.">KFile</a> to <a class="el" href="structEeprom.html" title="Describe an EEPROM context, used by the driver to access the single device.">Eeprom</a>. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="eeprom_8h.html#ac863c2bed2fe25660f71f5c318f40674">eeprom_erase</a> (<a class="el" href="structEeprom.html">Eeprom</a> *eep, <a class="el" href="eeprom_8h.html#adaadfc7eea7dceb474dc3780204996c3">e2addr_t</a> addr, <a class="el" href="eeprom_8h.html#a0a6165633c5775351c42efd01e440c45">e2_size_t</a> count)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Erase EEPROM.  <a href="#ac863c2bed2fe25660f71f5c318f40674"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="eeprom_8h.html#a2c91442a83fe831e4fd3e8a0214418e0">eeprom_init_5</a> (<a class="el" href="structEeprom.html">Eeprom</a> *eep, I2c *i2c, <a class="el" href="eeprom_8h.html#a4976d90233e10328ed79612429d97ecd">EepromType</a> type, <a class="el" href="eeprom_8h.html#a8dae5ff48fb3f99f5886720ea737ba72">e2dev_addr_t</a> addr, bool verify)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize EEPROM module.  <a href="#a2c91442a83fe831e4fd3e8a0214418e0"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Driver for the 24xx16 and 24xx256 I2C EEPROMS. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Stefano Fedrigo &lt;<a href="mailto:aleph@develer.com">aleph@develer.com</a>&gt; </dd>
<dd>
Bernie Innocenti &lt;<a href="mailto:bernie@codewiz.org">bernie@codewiz.org</a>&gt; </dd></dl>

<p>Definition in file <a class="el" href="eeprom_8h_source.html">eeprom.h</a>.</p>
</div><hr/><h2>Define Documentation</h2>
<a class="anchor" id="aa576b3701b9b8ccad83f54083f8e2381"></a><!-- doxytag: member="eeprom.h::e2addr" ref="aa576b3701b9b8ccad83f54083f8e2381" args="(type, field)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define e2addr</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">type, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">field&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;((<a class="el" href="eeprom_8h.html#adaadfc7eea7dceb474dc3780204996c3">e2addr_t</a>)&amp;(((type *)0)-&gt;field))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Macro for E2Layout offset calculation. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>We can't just use <a class="el" href="compiler_8h.html#ad89ebe5fe5ad08c683f0871118ea8e2f" title="Return the byte offset of the member m in struct s.">offsetof()</a> here because we could use non-constant expressions to access array elements.</dd>
<dd>
'type' is the structure type holding eeprom layout and must be defined in user files. </dd></dl>

<p>Definition at line <a class="el" href="eeprom_8h_source.html#l00137">137</a> of file <a class="el" href="eeprom_8h_source.html">eeprom.h</a>.</p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="a8dae5ff48fb3f99f5886720ea737ba72"></a><!-- doxytag: member="eeprom.h::e2dev_addr_t" ref="a8dae5ff48fb3f99f5886720ea737ba72" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint8_t <a class="el" href="eeprom_8h.html#a8dae5ff48fb3f99f5886720ea737ba72">e2dev_addr_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>On the same I2C bus can live more than one EEPROM device. </p>
<p>Each device can be addressed by one or more pins. </p>

<p>Definition at line <a class="el" href="eeprom_8h_source.html#l00086">86</a> of file <a class="el" href="eeprom_8h_source.html">eeprom.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ac863c2bed2fe25660f71f5c318f40674"></a><!-- doxytag: member="eeprom.h::eeprom_erase" ref="ac863c2bed2fe25660f71f5c318f40674" args="(Eeprom *eep, e2addr_t addr, e2_size_t count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool eeprom_erase </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structEeprom.html">Eeprom</a> *&#160;</td>
          <td class="paramname"><em>eep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="eeprom_8h.html#adaadfc7eea7dceb474dc3780204996c3">e2addr_t</a>&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="eeprom_8h.html#a0a6165633c5775351c42efd01e440c45">e2_size_t</a>&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Erase EEPROM. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">eep</td><td>is the Kblock context. </td></tr>
    <tr><td class="paramname">addr</td><td>eeprom address where start to erase </td></tr>
    <tr><td class="paramname">size</td><td>number of byte to erase </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="eeprom_8c_source.html#l00117">117</a> of file <a class="el" href="eeprom_8c_source.html">eeprom.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2c91442a83fe831e4fd3e8a0214418e0"></a><!-- doxytag: member="eeprom.h::eeprom_init_5" ref="a2c91442a83fe831e4fd3e8a0214418e0" args="(Eeprom *eep, I2c *i2c, EepromType type, e2dev_addr_t addr, bool verify)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void eeprom_init_5 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structEeprom.html">Eeprom</a> *&#160;</td>
          <td class="paramname"><em>eep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">I2c *&#160;</td>
          <td class="paramname"><em>i2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="eeprom_8h.html#a4976d90233e10328ed79612429d97ecd">EepromType</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="eeprom_8h.html#a8dae5ff48fb3f99f5886720ea737ba72">e2dev_addr_t</a>&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>verify</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize EEPROM module. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">eep</td><td>is the Kblock context. </td></tr>
    <tr><td class="paramname">type</td><td>is the eeprom device we want to initialize (</td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="eeprom_8h.html#a4976d90233e10328ed79612429d97ecd" title="Values for Eeprom types.">EepromType</a>) </dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">i2c</td><td>context for i2c channel </td></tr>
    <tr><td class="paramname">addr</td><td>is the i2c devide address (usually pins A0, A1, A2). </td></tr>
    <tr><td class="paramname">verify</td><td>enable the write check. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="eeprom_8c_source.html#l00334">334</a> of file <a class="el" href="eeprom_8c_source.html">eeprom.c</a>.</p>

</div>
</div>
</div>


