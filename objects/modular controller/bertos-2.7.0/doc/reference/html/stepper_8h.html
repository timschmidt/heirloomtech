

<!-- Generated by Doxygen 1.7.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_9fd71c1ac00056e7d855336b2291c56c.html">bertos</a>      </li>
      <li class="navelem"><a class="el" href="dir_f7c89dbd63e8f34e572fe939945c15d7.html">drv</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">stepper.h File Reference</div>  </div>
</div>
<div class="contents">

<p>Driver to control stepper motor.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="compiler_8h_source.html">cfg/compiler.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="ramp_8h_source.html">algo/ramp.h</a>&gt;</code><br/>
</div>
<p><a href="stepper_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structStepperConfig.html">StepperConfig</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structStepper.html" title="Motor context structure.">Stepper</a> configuration.  <a href="structStepperConfig.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structStepper.html">Stepper</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Motor context structure.  <a href="structStepper.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac92e58c3cf5194a2cfb318dff1881ae3"></a><!-- doxytag: member="stepper.h::STEPS_INFINITE_POSITIVE" ref="ac92e58c3cf5194a2cfb318dff1881ae3" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper_8h.html#ac92e58c3cf5194a2cfb318dff1881ae3">STEPS_INFINITE_POSITIVE</a>&#160;&#160;&#160;((int16_t)0xFFFF)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Special value for steps to move the motor continuously. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaa127b0d4a7bf0d11461d28aac4a905e"></a><!-- doxytag: member="stepper.h::STEPS_INFINITE_NEGATIVE" ref="aaa127b0d4a7bf0d11461d28aac4a905e" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper_8h.html#aaa127b0d4a7bf0d11461d28aac4a905e">STEPS_INFINITE_NEGATIVE</a>&#160;&#160;&#160;((int16_t)0x8FFF)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum value for stepper steps. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa0414caef00a64a51d4c6c0711d9e70a"></a><!-- doxytag: member="stepper.h::MAX_STEPS" ref="aa0414caef00a64a51d4c6c0711d9e70a" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper_8h.html#aa0414caef00a64a51d4c6c0711d9e70a">MAX_STEPS</a>&#160;&#160;&#160;0x7FFF</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Default value -&gt; no level sensor associated to the motor. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a26d9fe5fe21f0bf887159d9c9ae7207c"></a><!-- doxytag: member="stepper.h::MOTOR_NO_LEVEL_SENSOR" ref="a26d9fe5fe21f0bf887159d9c9ae7207c" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper_8h.html#a26d9fe5fe21f0bf887159d9c9ae7207c">MOTOR_NO_LEVEL_SENSOR</a>&#160;&#160;&#160;0xFFFF</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Default value -&gt; no home sensor associated to the motor. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a031203a7ed5c271ddb436f04894d2dfa"></a><!-- doxytag: member="stepper.h::MOTOR_NO_HOME_SENSOR" ref="a031203a7ed5c271ddb436f04894d2dfa" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper_8h.html#a031203a7ed5c271ddb436f04894d2dfa">MOTOR_NO_HOME_SENSOR</a>&#160;&#160;&#160;0xFFFF</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Default value for deafsteps in normal movement (no level sensor) <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a77a33572cc80715544126fcf90dde8de"></a><!-- doxytag: member="stepper.h::DEAFSTEPS_DEFAULT" ref="a77a33572cc80715544126fcf90dde8de" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper_8h.html#a77a33572cc80715544126fcf90dde8de">DEAFSTEPS_DEFAULT</a>&#160;&#160;&#160;MAX_STEPS</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Out-of-band values for speed. <br/></td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0e51d9836cd8217de736774e676b41f3"></a><!-- doxytag: member="stepper.h::SPEED_STOPPED" ref="a0e51d9836cd8217de736774e676b41f3" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper_8h.html#a0e51d9836cd8217de736774e676b41f3">SPEED_STOPPED</a>&#160;&#160;&#160;0xFFFF</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">motor is stopped <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4bb6d07248551d1f7cb6790ce71bfba2"></a><!-- doxytag: member="stepper.h::SPEED_HOMING" ref="a4bb6d07248551d1f7cb6790ce71bfba2" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper_8h.html#a4bb6d07248551d1f7cb6790ce71bfba2">SPEED_HOMING</a>&#160;&#160;&#160;0xFFFE</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">motor is homing <br/></td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a521e38503ef9daf4962b517447ab560f"></a><!-- doxytag: member="stepper.h::fsm_state" ref="a521e38503ef9daf4962b517447ab560f" args=")(struct Stepper *)" -->
typedef enum <a class="el" href="stepper_8h.html#a137a3ab4a61a0a75b1dd36dd6fc37332">StepperState</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper_8h.html#a521e38503ef9daf4962b517447ab560f">fsm_state</a> )(struct <a class="el" href="structStepper.html">Stepper</a> *)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to a isr stepper function. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a64acd423c9f0e2216991f2f4c3485af3"></a><!-- doxytag: member="stepper.h::stepper_isr_t" ref="a64acd423c9f0e2216991f2f4c3485af3" args=")(struct Stepper *)" -->
typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper_8h.html#a64acd423c9f0e2216991f2f4c3485af3">stepper_isr_t</a> )(struct <a class="el" href="structStepper.html">Stepper</a> *)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Time for steppers motor. <br/></td></tr>
<tr><td colspan="2"><h2><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper_8h.html#ab0dd3595d7049b92115a766f0ea6f7e0">MotorDirection</a> { <a class="el" href="stepper_8h.html#ab0dd3595d7049b92115a766f0ea6f7e0aa4895ca32bbe7ac5e12689125075b855">DIR_POSITIVE</a> =  1, 
<a class="el" href="stepper_8h.html#ab0dd3595d7049b92115a766f0ea6f7e0a2e15270378edc4b0861165674c651970">DIR_NONE</a> =  0, 
<a class="el" href="stepper_8h.html#ab0dd3595d7049b92115a766f0ea6f7e0a5ead8e8c76023f78988bf28de9080fbd">DIR_NEGATIVE</a> =  -1
 }</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Motor direction.  <a href="stepper_8h.html#ab0dd3595d7049b92115a766f0ea6f7e0">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper_8h.html#a137a3ab4a61a0a75b1dd36dd6fc37332">StepperState</a> { <br/>
&#160;&#160;<a class="el" href="stepper_8h.html#a137a3ab4a61a0a75b1dd36dd6fc37332a059d31b93e754fb3efa2e17ea012b97e">MSTS_UNINIT</a>, 
<a class="el" href="stepper_8h.html#a137a3ab4a61a0a75b1dd36dd6fc37332a8d39fccc3a1b4cc3714a1410ff1d847d">MSTS_RUN</a>, 
<a class="el" href="stepper_8h.html#a137a3ab4a61a0a75b1dd36dd6fc37332a8de615628d07b62cd9accaafa8b2533e">MSTS_IDLE</a>, 
<a class="el" href="stepper_8h.html#a137a3ab4a61a0a75b1dd36dd6fc37332a66f2d8370f13e233f1e45ea8f6c349f2">MSTS_PREIDLE</a>, 
<br/>
&#160;&#160;<a class="el" href="stepper_8h.html#a137a3ab4a61a0a75b1dd36dd6fc37332a097364be729f528d4b0178c873b308f4">MSTS_PRERUN</a>, 
<a class="el" href="stepper_8h.html#a137a3ab4a61a0a75b1dd36dd6fc37332a796e52d2995d3e0c82a129e5555066a9">MSTS_PREINIT</a>, 
<a class="el" href="stepper_8h.html#a137a3ab4a61a0a75b1dd36dd6fc37332a743580a2ae864851463959b4be6c53c1">MSTS_INIT</a>, 
<a class="el" href="stepper_8h.html#a137a3ab4a61a0a75b1dd36dd6fc37332a1d0d4658af0b9e8083a7ea3d11f49062">MSTS_ENTERING</a>, 
<br/>
&#160;&#160;<a class="el" href="stepper_8h.html#a137a3ab4a61a0a75b1dd36dd6fc37332a7c14c28e5c2848e6a4f5d104a71230d5">MSTS_LEAVING</a>, 
<a class="el" href="stepper_8h.html#a137a3ab4a61a0a75b1dd36dd6fc37332a97de3dc8ded452c0eb5925b8407ecc84">MSTS_OUTHOME</a>, 
<a class="el" href="stepper_8h.html#a137a3ab4a61a0a75b1dd36dd6fc37332a2e40b204362751ad4c30d9cc4441f376">MSTS_ERROR</a>
<br/>
 }</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structStepper.html" title="Motor context structure.">Stepper</a> state-machine conditions.  <a href="stepper_8h.html#a137a3ab4a61a0a75b1dd36dd6fc37332">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4808efef61f73d6624f055ede091a83d"></a><!-- doxytag: member="stepper.h::stepper_init" ref="a4808efef61f73d6624f055ede091a83d" args="(void)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper_8h.html#a4808efef61f73d6624f055ede091a83d">stepper_init</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the stepper module. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a97efeb6fad4a804563f48dde059cd44e"></a><!-- doxytag: member="stepper.h::stepper_setup" ref="a97efeb6fad4a804563f48dde059cd44e" args="(int index, struct StepperConfig *cfg)" -->
struct <a class="el" href="structStepper.html">Stepper</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper_8h.html#a97efeb6fad4a804563f48dde059cd44e">stepper_setup</a> (int index, struct <a class="el" href="structStepperConfig.html">StepperConfig</a> *cfg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply a setup config to motor structure context. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a694771901ace220d3ca74d4f65783f34"></a><!-- doxytag: member="stepper.h::stepper_disable" ref="a694771901ace220d3ca74d4f65783f34" args="(void)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper_8h.html#a694771901ace220d3ca74d4f65783f34">stepper_disable</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the enable for all the motors to 0 before switching on the power. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3902de9840b6e0c564ed5c9565fcc192"></a><!-- doxytag: member="stepper.h::stepper_reset" ref="a3902de9840b6e0c564ed5c9565fcc192" args="(struct Stepper *motor)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper_8h.html#a3902de9840b6e0c564ed5c9565fcc192">stepper_reset</a> (struct <a class="el" href="structStepper.html">Stepper</a> *motor)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the motor. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper_8h.html#adbff18f3ba5e35450bdea11d131a91b6">stepper_home</a> (struct <a class="el" href="structStepper.html">Stepper</a> *motor)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the home of a <em>motor</em> assuming no current knowledge about its position.  <a href="#adbff18f3ba5e35450bdea11d131a91b6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper_8h.html#ad4cc1bcbe84291dd8e284eb5f91f925d">stepper_move</a> (struct <a class="el" href="structStepper.html">Stepper</a> *motor, int16_t step, uint16_t speed, int16_t deafstep)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Move motor to absolute position at specified speed.  <a href="#ad4cc1bcbe84291dd8e284eb5f91f925d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad32845ee5d800044961fb2e336e82c6d"></a><!-- doxytag: member="stepper.h::stepper_stop" ref="ad32845ee5d800044961fb2e336e82c6d" args="(struct Stepper *motor)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper_8h.html#ad32845ee5d800044961fb2e336e82c6d">stepper_stop</a> (struct <a class="el" href="structStepper.html">Stepper</a> *motor)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop motor gracefully. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper_8h.html#a8b625437c298692092db1799ed16df04">stepper_break</a> (struct <a class="el" href="structStepper.html">Stepper</a> *motor, enum <a class="el" href="stepper_8h.html#a137a3ab4a61a0a75b1dd36dd6fc37332">StepperState</a> state)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop motor immediately, changing the status.  <a href="#a8b625437c298692092db1799ed16df04"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2af8ce5e8117f568ae20a9220aebbc91"></a><!-- doxytag: member="stepper.h::stepper_idle" ref="a2af8ce5e8117f568ae20a9220aebbc91" args="(struct Stepper *motor)" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper_8h.html#a2af8ce5e8117f568ae20a9220aebbc91">stepper_idle</a> (struct <a class="el" href="structStepper.html">Stepper</a> *motor)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the stepper is in error mode. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3c7da0b69a6976335567316c6bab3cba"></a><!-- doxytag: member="stepper.h::stepper_error" ref="a3c7da0b69a6976335567316c6bab3cba" args="(struct Stepper *motor)" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper_8h.html#a3c7da0b69a6976335567316c6bab3cba">stepper_error</a> (struct <a class="el" href="structStepper.html">Stepper</a> *motor)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">check the home sensor in zero position <br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Driver to control stepper motor. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Francesco Michelini &lt;<a href="mailto:francesco.michelini@seacfi.com">francesco.michelini@seacfi.com</a>&gt; </dd>
<dd>
Giovanni Bajo &lt;<a href="mailto:rasky@develer.com">rasky@develer.com</a>&gt; </dd>
<dd>
Bernie Innocenti &lt;<a href="mailto:bernie@codewiz.org">bernie@codewiz.org</a>&gt; </dd>
<dd>
Simone Zinanni &lt;<a href="mailto:s.zinanni@develer.com">s.zinanni@develer.com</a>&gt; </dd>
<dd>
Daniele Basile &lt;<a href="mailto:asterix@develer.com">asterix@develer.com</a>&gt; </dd></dl>

<p>Definition in file <a class="el" href="stepper_8h_source.html">stepper.h</a>.</p>
</div><hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="ab0dd3595d7049b92115a766f0ea6f7e0"></a><!-- doxytag: member="stepper.h::MotorDirection" ref="ab0dd3595d7049b92115a766f0ea6f7e0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="stepper_8h.html#ab0dd3595d7049b92115a766f0ea6f7e0">MotorDirection</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Motor direction. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ab0dd3595d7049b92115a766f0ea6f7e0aa4895ca32bbe7ac5e12689125075b855"></a><!-- doxytag: member="DIR_POSITIVE" ref="ab0dd3595d7049b92115a766f0ea6f7e0aa4895ca32bbe7ac5e12689125075b855" args="" -->DIR_POSITIVE</em>&nbsp;</td><td>
<p>moving away from zero (which is the home) </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ab0dd3595d7049b92115a766f0ea6f7e0a2e15270378edc4b0861165674c651970"></a><!-- doxytag: member="DIR_NONE" ref="ab0dd3595d7049b92115a766f0ea6f7e0a2e15270378edc4b0861165674c651970" args="" -->DIR_NONE</em>&nbsp;</td><td>
<p>no movement </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ab0dd3595d7049b92115a766f0ea6f7e0a5ead8e8c76023f78988bf28de9080fbd"></a><!-- doxytag: member="DIR_NEGATIVE" ref="ab0dd3595d7049b92115a766f0ea6f7e0a5ead8e8c76023f78988bf28de9080fbd" args="" -->DIR_NEGATIVE</em>&nbsp;</td><td>
<p>moving towards towards zero (which is the home) </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="stepper_8h_source.html#l00080">80</a> of file <a class="el" href="stepper_8h_source.html">stepper.h</a>.</p>

</div>
</div>
<a class="anchor" id="a137a3ab4a61a0a75b1dd36dd6fc37332"></a><!-- doxytag: member="stepper.h::StepperState" ref="a137a3ab4a61a0a75b1dd36dd6fc37332" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="stepper_8h.html#a137a3ab4a61a0a75b1dd36dd6fc37332">StepperState</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="structStepper.html" title="Motor context structure.">Stepper</a> state-machine conditions. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a137a3ab4a61a0a75b1dd36dd6fc37332a059d31b93e754fb3efa2e17ea012b97e"></a><!-- doxytag: member="MSTS_UNINIT" ref="a137a3ab4a61a0a75b1dd36dd6fc37332a059d31b93e754fb3efa2e17ea012b97e" args="" -->MSTS_UNINIT</em>&nbsp;</td><td>
<p><a class="el" href="stepper_8c.html#a4808efef61f73d6624f055ede091a83d" title="Initialize the stepper module.">stepper_init()</a> not yet called </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a137a3ab4a61a0a75b1dd36dd6fc37332a8d39fccc3a1b4cc3714a1410ff1d847d"></a><!-- doxytag: member="MSTS_RUN" ref="a137a3ab4a61a0a75b1dd36dd6fc37332a8d39fccc3a1b4cc3714a1410ff1d847d" args="" -->MSTS_RUN</em>&nbsp;</td><td>
<p>running </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a137a3ab4a61a0a75b1dd36dd6fc37332a8de615628d07b62cd9accaafa8b2533e"></a><!-- doxytag: member="MSTS_IDLE" ref="a137a3ab4a61a0a75b1dd36dd6fc37332a8de615628d07b62cd9accaafa8b2533e" args="" -->MSTS_IDLE</em>&nbsp;</td><td>
<p>waiting for a command </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a137a3ab4a61a0a75b1dd36dd6fc37332a66f2d8370f13e233f1e45ea8f6c349f2"></a><!-- doxytag: member="MSTS_PREIDLE" ref="a137a3ab4a61a0a75b1dd36dd6fc37332a66f2d8370f13e233f1e45ea8f6c349f2" args="" -->MSTS_PREIDLE</em>&nbsp;</td><td>
<p>waiting before going low-current </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a137a3ab4a61a0a75b1dd36dd6fc37332a097364be729f528d4b0178c873b308f4"></a><!-- doxytag: member="MSTS_PRERUN" ref="a137a3ab4a61a0a75b1dd36dd6fc37332a097364be729f528d4b0178c873b308f4" args="" -->MSTS_PRERUN</em>&nbsp;</td><td>
<p>waiting after high-current </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a137a3ab4a61a0a75b1dd36dd6fc37332a796e52d2995d3e0c82a129e5555066a9"></a><!-- doxytag: member="MSTS_PREINIT" ref="a137a3ab4a61a0a75b1dd36dd6fc37332a796e52d2995d3e0c82a129e5555066a9" args="" -->MSTS_PREINIT</em>&nbsp;</td><td>
<p>preparing to initialize ;-) </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a137a3ab4a61a0a75b1dd36dd6fc37332a743580a2ae864851463959b4be6c53c1"></a><!-- doxytag: member="MSTS_INIT" ref="a137a3ab4a61a0a75b1dd36dd6fc37332a743580a2ae864851463959b4be6c53c1" args="" -->MSTS_INIT</em>&nbsp;</td><td>
<p>initializing home procedure </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a137a3ab4a61a0a75b1dd36dd6fc37332a1d0d4658af0b9e8083a7ea3d11f49062"></a><!-- doxytag: member="MSTS_ENTERING" ref="a137a3ab4a61a0a75b1dd36dd6fc37332a1d0d4658af0b9e8083a7ea3d11f49062" args="" -->MSTS_ENTERING</em>&nbsp;</td><td>
<p>entering home sensor </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a137a3ab4a61a0a75b1dd36dd6fc37332a7c14c28e5c2848e6a4f5d104a71230d5"></a><!-- doxytag: member="MSTS_LEAVING" ref="a137a3ab4a61a0a75b1dd36dd6fc37332a7c14c28e5c2848e6a4f5d104a71230d5" args="" -->MSTS_LEAVING</em>&nbsp;</td><td>
<p>moving away from home (inside the sensor) </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a137a3ab4a61a0a75b1dd36dd6fc37332a97de3dc8ded452c0eb5925b8407ecc84"></a><!-- doxytag: member="MSTS_OUTHOME" ref="a137a3ab4a61a0a75b1dd36dd6fc37332a97de3dc8ded452c0eb5925b8407ecc84" args="" -->MSTS_OUTHOME</em>&nbsp;</td><td>
<p>moving away from home (outside the sensor) </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a137a3ab4a61a0a75b1dd36dd6fc37332a2e40b204362751ad4c30d9cc4441f376"></a><!-- doxytag: member="MSTS_ERROR" ref="a137a3ab4a61a0a75b1dd36dd6fc37332a2e40b204362751ad4c30d9cc4441f376" args="" -->MSTS_ERROR</em>&nbsp;</td><td>
<p>error status </p>
<p>Dummy entry to guarantee the right underlying size for the enum </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="stepper_8h_source.html#l00093">93</a> of file <a class="el" href="stepper_8h_source.html">stepper.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a8b625437c298692092db1799ed16df04"></a><!-- doxytag: member="stepper.h::stepper_break" ref="a8b625437c298692092db1799ed16df04" args="(struct Stepper *motor, enum StepperState state)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stepper_break </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structStepper.html">Stepper</a> *&#160;</td>
          <td class="paramname"><em>motor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="stepper_8h.html#a137a3ab4a61a0a75b1dd36dd6fc37332">StepperState</a>&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stop motor immediately, changing the status. </p>
<p>Returns true if the stepper is in idle at the final position or in error: </p>

<p>Definition at line <a class="el" href="stepper_8c_source.html#l00946">946</a> of file <a class="el" href="stepper_8c_source.html">stepper.c</a>.</p>

</div>
</div>
<a class="anchor" id="adbff18f3ba5e35450bdea11d131a91b6"></a><!-- doxytag: member="stepper.h::stepper_home" ref="adbff18f3ba5e35450bdea11d131a91b6" args="(struct Stepper *motor)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stepper_home </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structStepper.html">Stepper</a> *&#160;</td>
          <td class="paramname"><em>motor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Find the home of a <em>motor</em> assuming no current knowledge about its position. </p>
<p>This must be done when the motor is desynchronized with the firmware and we do not know anymore where it is.</p>
<p>In normal operation mode, to go back to the home, it is sufficient to use move to step #0 with stepper_move, since the home is always at step #0. </p>

<p>Definition at line <a class="el" href="stepper_8c_source.html#l00765">765</a> of file <a class="el" href="stepper_8c_source.html">stepper.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad4cc1bcbe84291dd8e284eb5f91f925d"></a><!-- doxytag: member="stepper.h::stepper_move" ref="ad4cc1bcbe84291dd8e284eb5f91f925d" args="(struct Stepper *motor, int16_t step, uint16_t speed, int16_t deafstep)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t stepper_move </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structStepper.html">Stepper</a> *&#160;</td>
          <td class="paramname"><em>motor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>steps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>speed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>deafstep</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Move motor to absolute position at specified speed. </p>
<ul>
<li>steps position to reach in steps </li>
<li>speed speed in timer ticks (use <a class="el" href="ramp_8h.html#a42d42f0f46d83d44850674f55be3e21f" title="Convert microseconds to timer clock ticks.">TIME2CLOCKS()</a> to convert) </li>
</ul>

<p>Definition at line <a class="el" href="stepper_8c_source.html#l00887">887</a> of file <a class="el" href="stepper_8c_source.html">stepper.c</a>.</p>

</div>
</div>
</div>


